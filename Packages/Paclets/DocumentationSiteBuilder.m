(* ::Package:: *)

(************************************************************************)
(* This file was generated automatically by the Mathematica front end.  *)
(* It contains Initialization cells from a Notebook file, which         *)
(* typically will have the same name as this file except ending in      *)
(* ".nb" instead of ".m".                                               *)
(*                                                                      *)
(* This file is intended to be loaded into the Mathematica kernel using *)
(* the package loading commands Get or Needs.  Doing so is equivalent   *)
(* to using the Evaluate Initialization Cells menu command in the front *)
(* end.                                                                 *)
(*                                                                      *)
(* DO NOT EDIT THIS FILE.  This entire file is regenerated              *)
(* automatically each time the parent Notebook file is saved in the     *)
(* Mathematica front end.  Any changes you make to this file will be    *)
(* overwritten.                                                         *)
(************************************************************************)



DocumentationSiteBuild::usage=
	"Builds the documentation site";
DocumentationSiteDeploy::usage=
	"Deploys the documentation site";


Begin["`Private`"];


(* ::Subsection:: *)
(*DocumentationSite*)



$DocSiteDirectory:=
	$DocSiteDirectory=
		FileNameJoin@{
			$WebSiteDirectory,
			"DocumentationSite"
			};


Clear@DocSiteInitializedQ;
DocSiteInitializedQ[dir_String?DirectoryQ]:=
	AllTrue[{dir,FileNameJoin@{dir,"content"},FileNameJoin@{dir,"SiteConfig.wl"}},
		FileExistsQ
		];
DocSiteInitializedQ[___]:=False


$DocSiteInitialized:=
	DocSiteInitializedQ[$DocSiteDirectory];


possibleDocSiteQ=(DirectoryQ[#]||DirectoryQ[DirectoryName[#]]&);


DocumentationSiteInitialize//Clear
DocumentationSiteInitialize[
	dir:_String?possibleDocSiteQ|Automatic:Automatic
	]:=
	With[{d=Replace[dir, Automatic:>$DocSiteDirectory]},
		If[!DocSiteInitializedQ[d],	
			If[!DirectoryQ@d,	
				CreateDirectory[d,CreateIntermediateDirectories->True]
				]
			];
			With[{tempDir=PackageFilePath["Resources","Templates","DocumentationSite"]},
				Map[
					With[{
						tf=FileNameJoin@{d,FileNameDrop[#,FileNameDepth[tempDir]]}
						},
						If[!FileExistsQ@tf,
							If[DirectoryQ@#,
								CopyDirectory[#,tf],
								CopyFile[#,tf]
								]
							]
						]&,
					FileNames["*",tempDir]
					];
				]
			]


DocumentationSiteBuild//Clear


Options[DocumentationSiteBuild]=
	Join[
		{
			"BuildOverview"->False
			},
		Options[WebSiteBuild]
		];
DocumentationSiteBuild[
	dir:_String?possibleDocSiteQ|Automatic:Automatic,
	ops:OptionsPattern[]
	]:=
	With[{d=Replace[dir, Automatic:>$DocSiteDirectory]},
		With[{buildOverview=TrueQ@OptionValue["BuildOverview"]},
			DocumentationSiteInitialize[d];
			If[buildOverview,
				DocGen[
					"HTML",
					Evaluate@DocGen[
						"MultiPackageOverview",
						Evaluate@$DocGenDirectory,
						Method->"Save"
						],
					CloudDeploy->True
					]
				];
			WebSiteBuild[d,
				Sequence@@FilterRules[{ops},Options[WebSiteBuild]]
				]
			]
		];


DocumentationSiteDeploy//Clear
Options[DocumentationSiteDeploy]=
	Options[WebSiteDeploy];
DocumentationSiteDeploy[
	dir:_String?possibleDocSiteQ|Automatic:Automatic,
	ops:OptionsPattern[]
	]:=
	With[{d=Replace[dir, Automatic:>$DocSiteDirectory]},
		WebSiteDeploy[
			d,
			"/",
			Sequence@@
				FilterRules[{ops},Options[WebSiteDeploy]]
			]
		]


End[];



