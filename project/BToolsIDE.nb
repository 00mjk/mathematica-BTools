Notebook[{

Cell[CellGroupData[{
Cell["BuildSite", "CodeSection",
 CellChangeTimes->{{3.712582040881816*^9, 
  3.712582046912613*^9}},ExpressionUUID->"26bc515f-fec1-4cd9-982b-\
46cf508be295"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "usage"}], "=", "\"\<Builds a website\>\""}],
   ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteDeploy", "::", "usage"}], "=", 
   "\"\<Deploys a website\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGitHubDeploy", "::", "usage"}], "=", 
   "\"\<Deploys a directory to GitHub Pages\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteCloudDeploy", "::", "usage"}], "=", 
   "\"\<Deploys a directory to the Wolfram Cloud\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"f95ae60b-b1d7-44a4-a355-fc2e665670fc"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSites", "::", "usage"}], "=", "\"\<Lists websites\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteOptions", "::", "usage"}], "=", 
   "\"\<Gets configuration options for a website\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteSetOptions", "::", "usage"}], "=", 
   "\"\<Sets configuration options for a website\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"df6513b0-af15-4be1-a334-c6a7419d50b5"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteInitialize", "::", "usage"}], "=", 
   "\"\<Makes a new website in a directory\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteNewContent", "::", "usage"}], "=", 
   "\"\<Makes a new post notebook\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteNewTableOfContents", "::", "usage"}], "=", 
   "\"\<Makes a new Table fof Contents\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"c4e0f9d4-8932-428f-b531-1348d1772ed7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteThemes", "::", "usage"}], "=", "\"\<\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteFindTheme", "::", "usage"}], "=", 
   "\"\<Finds the theme for a website\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"e40911e3-ec65-4c4b-b78e-28ea32275be3"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteContent", "::", "usage"}], "=", 
   "\"\<Finds content in a site\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSitePages", "::", "usage"}], "=", 
   "\"\<Finds pages in a site\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSitePosts", "::", "usage"}], "=", 
   "\"\<Finds posts in a site\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"b582b773-a25e-49eb-a8fa-e2964707018f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$WebSiteDirectory", "::", "usage"}], "=", "\n", "\t", 
   "\"\<The base directory for websites\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$WebSitePath", "::", "usage"}], "=", "\n", "\t", 
   "\"\<The path for finding websites\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$WebSiteThemePath", "::", "usage"}], "=", "\n", "\t", 
   "\"\<The path for website themes\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$WebSiteBuildErrors", "::", "usage"}], "=", "\n", "\t", 
   "\"\<A stack of errors encountered in the build process\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"b63c6071-efd0-46f5-a9d3-bf9aaea62cde"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"6a99b9d6-b167-41ed-b1b7-\
c19c87f01391"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Config\[RightFloor]", "CodeSubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.71278761272464*^9, 
  3.7127876133329*^9}},ExpressionUUID->"5a33d63e-6127-4f83-ad4d-a21432f052e5"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteDirectory\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"8aab9c85-e526-44c6-a509-c285d663dc4a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteDirectory", "=", "\n", "\t", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{
     "$UserBaseDirectory", ",", "\n", "\t\t", "\"\<ApplicationData\>\"", ",", 
      "\n", "\t\t", "\"\<WebSites\>\""}], "\n", "\t\t", "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"2e0e3c30-3edb-4197-b5d8-02c5589591ea"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSitePath\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"0dfae26d-163e-41a6-bb6d-fe39de61b03a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSitePath", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", "$WebSiteDirectory", "\n", "\t\t", "}"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"94076f18-3b73-46e4-b3c3-c744ff0ba3c0"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteThemePath\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"1f4bd6ec-a9bb-4f64-b6e0-7e374bb1e2cb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Length", "@", 
      RowBox[{"OwnValues", "[", "$WebThemesURLBase", "]"}]}], "===", "0"}], 
    ",", "\n", "\t", 
    RowBox[{"$WebThemesURLBase", ":=", "\n", "\t\t", 
     RowBox[{
     "$WebThemesURLBase", "=", "\n", "\t\t\t", 
      "\"\<https://github.com/mresources/themes/releases/download/v1.0.1/\>\"\
"}]}]}], "\n", "\t\t\t", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{
     "CloudObject", "[", 
      "\"\<user:b3m2a1.paclets/PacletServer/Resources/SiteBuilder/Themes\>\"",
       "]"}], "[", 
     RowBox[{"[", "1", "]"}], "]"}], "*)"}], "\n", "\t", "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{"$WebSiteTempThemeDir", "=", "\n", "\t", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", 
     RowBox[{
     "$TemporaryDirectory", ",", " ", "\"\<SiteBuilder_tmp\>\"", ",", " ", 
      "\"\<Themes\>\""}], "}"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"$WebSiteThemePath", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"PackageFilePath", "[", 
      RowBox[{"\"\<Resources\>\"", ",", " ", "\"\<Themes\>\""}], "]"}], ",", 
     "\n", "\t\t", 
     RowBox[{"FileNameJoin", "@", 
      RowBox[{"{", 
       RowBox[{"$WebSiteDirectory", ",", " ", "\"\<Themes\>\""}], "}"}]}], 
     ",", "\n", "\t\t", "$WebSiteTempThemeDir"}], "\n", "\t\t", "}"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"a2cd2a92-b397-49b8-b5c5-9ada7f423eaa"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteTemplateLibDirectory\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"7aef3e26-564b-4baa-a155-087676631492"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteTemplateLibDirectory", "=", "\n", "\t", 
   RowBox[{"PackageFilePath", "[", 
    RowBox[{
    "\"\<Resources\>\"", ",", "\"\<Themes\>\"", ",", "\"\<template_lib\>\""}],
     "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"4b8a8382-3efe-4d42-b349-c7e3a1eb6c5f"]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Site Config\[RightFloor]", "CodeSubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7128335669161673`*^9, 
  3.712833571196659*^9}},ExpressionUUID->"4e83ef2e-3163-43fe-9d84-\
19890219bce5"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSites\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"107b2b07-71a9-45d6-99f2-c561a81cee30"],

Cell[BoxData[
 RowBox[{"WebSites", "//", "Clear"}]], "CodeInput",
 CellChangeTimes->{{3.723055464968233*^9, 
  3.723055465782651*^9}},ExpressionUUID->"9e625d7b-d55e-4d73-a5be-\
4d222b810c73"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSites", "[", 
    RowBox[{"site_:", "\"\<*\>\""}], "]"}], ":=", "\n", "\t", 
   RowBox[{
    RowBox[{"Select", "[", 
     RowBox[{
      RowBox[{"FileExistsQ", "@", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"#", ",", " ", "\"\<SiteConfig.wl\>\""}], "}"}]}]}], "&"}], 
     "]"}], "@", "\n", "\t\t", 
    RowBox[{"FileNames", "[", 
     RowBox[{"site", ",", " ", "$WebSitePath"}], "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteFind", "[", "siteName_", "]"}], ":=", "\n", "\t", 
   RowBox[{"SelectFirst", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"FileNames", "[", 
      RowBox[{"siteName", ",", " ", "$WebSitePath"}], "]"}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"FileExistsQ", "@", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"#", ",", " ", "\"\<SiteConfig.wl\>\""}], "}"}]}]}], "&"}], 
     ",", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"StringQ", "@", "siteName"}], ",", "\n", "\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"$WebSiteDirectory", ",", " ", "siteName"}], "}"}]}], ",", 
       "\n", "\t\t\t", "$Failed"}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
    "]"}]}], ";"}]}], "CodeInput",
 CellChangeTimes->{{3.723003184220989*^9, 3.723003222172657*^9}, {
  3.723003282032915*^9, 3.723003375869944*^9}, {3.723055458979436*^9, 
  3.723055463136051*^9}},ExpressionUUID->"791ad82d-6ca2-4c95-aa83-\
619d2b38f9aa"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Initialize\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"c58584e5-8065-41cd-a408-d0e323476de6"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteTemplate", "=", "\n", "\t", 
   RowBox[{"PackageFilePath", "[", 
    RowBox[{
    "\"\<Resources\>\"", ",", " ", "\"\<Templates\>\"", ",", " ", 
     "\"\<SiteBuilder\>\"", ",", " ", "\"\<WebSite\>\""}], "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"ef94a6b5-74d2-49aa-9266-e4651a45b341"],

Cell[BoxData[
 RowBox[{"WebSiteInitialize", "//", 
  "Clear"}]], \
"CodeInput",ExpressionUUID->"6c34b85c-b0f6-4deb-869e-b14e590f0ae4"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteInitialize", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", 
      RowBox[{"(", "\n", "\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"FileNameDepth", "[", "#", "]"}], ">", "1"}], "&&", 
         RowBox[{"DirectoryQ", "@", 
          RowBox[{"DirectoryName", "[", "#", "]"}]}]}], "&"}], "\n", "\t\t", 
       ")"}]}], ",", "\n", "\t", 
     RowBox[{"template", ":", 
      RowBox[{
       RowBox[{"_String", "?", "DirectoryQ"}], "|", "Automatic"}], ":", 
      "Automatic"}], ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"temp", "=", 
       RowBox[{"Replace", "[", 
        RowBox[{"template", ",", " ", 
         RowBox[{"Automatic", "\[RuleDelayed]", "$WebSiteTemplate"}]}], 
        "]"}]}], "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"CopyDirectory", "[", 
       RowBox[{"temp", ",", " ", "dir"}], "]"}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", 
          RowBox[{"Flatten", "@", 
           RowBox[{"{", "ops", "}"}]}]}], ">", "0"}], ",", "\n", "\t\t\t", 
        RowBox[{"Export", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"dir", ",", "\"\<SiteConfig.wl\>\""}], "}"}]}], ",", "\n",
           "\t", "\t\t\t", 
          RowBox[{"PrettyString", "@", "\n", "\t", "\t\t\t\t", 
           RowBox[{
            RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", 
            "\t", "\t", "\t\t\t\t", 
            RowBox[{"Flatten", "@", "\n", "\t", "\t", "\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t", 
              RowBox[{"ops", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
               RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"Get", "@", 
                  RowBox[{"FileNameJoin", "@", 
                   RowBox[{"{", 
                    RowBox[{"temp", ",", " ", "\"\<SiteConfig.wl\>\""}], 
                    "}"}]}]}], ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Except", "[", 
                   RowBox[{
                    RowBox[{"_", "?", "OptionQ"}], "|", 
                    RowBox[{"_", "?", "AssociationQ"}], "|", 
                    RowBox[{"_", "?", "AssociationQ"}]}], "]"}], 
                  "\[RuleDelayed]", 
                  RowBox[{"{", "}"}]}]}], "\n", "\t", "\t\t\t\t\t\t\t\t", 
                "]"}]}], "\n", "\t", "\t\t\t\t\t\t\t", "}"}]}]}]}], ",", "\n",
           "\t", "\t\t\t\t", "\"\<Text\>\""}], "\n", "\t\t\t\t\t", "]"}]}], 
       "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", "dir"}]}], "\n", "\t\t", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteInitialize", "[", "\n", "\t", 
   RowBox[{
    RowBox[{"dir_String", "?", 
     RowBox[{"(", "\n", "\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"FileNameDepth", "[", "#", "]"}], ">", "1"}], "&&", 
        RowBox[{"DirectoryQ", "@", 
         RowBox[{"DirectoryName", "[", "#", "]"}]}]}], "&"}], "\n", "\t\t", 
      ")"}]}], ",", "\n", "\t", 
    RowBox[{"template", ":", 
     RowBox[{
      RowBox[{"_String", "?", "DirectoryQ"}], "|", "Automatic"}], ":", 
     "Automatic"}], ",", "\n", "\t", 
    RowBox[{"a_", "?", "AssociationQ"}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"WebSiteInitialize", "[", 
   RowBox[{"dir", ",", " ", "template", ",", " ", 
    RowBox[{"Normal", "[", "a", "]"}]}], 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"71b5cc5d-b4bf-45fc-b57b-8a942a5cf6ce"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteInitialize", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"s_String", "?", 
      RowBox[{"(", "\n", "\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"FileNameDepth", "[", "#", "]"}], "\[Equal]", "1"}], "||", 
         "\n", "\t\t\t", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"Not", "@", 
            RowBox[{"FileExistsQ", "[", "#", "]"}]}], "&&", 
           RowBox[{"StringFreeQ", "[", 
            RowBox[{"#", ",", "$PathnameSeparator"}], "]"}]}], ")"}]}], "&"}],
        ")"}]}], ",", "\n", "\t", 
     RowBox[{"template", ":", 
      RowBox[{
       RowBox[{"_String", "?", "DirectoryQ"}], "|", "Automatic"}], ":", 
      "Automatic"}], ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"(", "\n", "\t\t", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"DirectoryQ", "@", "$WebSiteDirectory"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"CreateDirectory", "[", 
        RowBox[{"$WebSiteDirectory", ",", 
         RowBox[{"CreateIntermediateDirectories", "\[Rule]", "True"}]}], 
        "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"WebSiteInitialize", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"$WebSiteDirectory", ",", " ", "s"}], "}"}]}], ",", " ", 
       "\n", "\t\t\t", "template", ",", "\n", "\t\t\t", "ops"}], "\n", 
      "\t\t\t", "]"}]}], "\n", "\t\t", ")"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteInitialize", "[", "\n", "\t", 
   RowBox[{
    RowBox[{"s_String", "?", 
     RowBox[{"(", "\n", "\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"FileNameDepth", "[", "#", "]"}], "\[Equal]", "1"}], "||", 
        "\n", "\t\t\t", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"Not", "@", 
           RowBox[{"FileExistsQ", "[", "#", "]"}]}], "&&", 
          RowBox[{"StringFreeQ", "[", 
           RowBox[{"#", ",", "$PathnameSeparator"}], "]"}]}], ")"}]}], "&"}], 
      ")"}]}], ",", "\n", "\t", 
    RowBox[{"template", ":", 
     RowBox[{
      RowBox[{"_String", "?", "DirectoryQ"}], "|", "Automatic"}], ":", 
     "Automatic"}], ",", "\n", "\t", 
    RowBox[{"a_", "?", "AssociationQ"}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"WebSiteInitialize", "[", 
   RowBox[{"s", ",", " ", "template", ",", " ", 
    RowBox[{"Normal", "[", "a", "]"}]}], 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"9fc56f54-8b3c-4dc9-919c-e4bfdc279f4c"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Options\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7128339916993227`*^9, 3.712833995778417*^9}, {
  3.712834093593678*^9, 
  3.712834094528667*^9}},ExpressionUUID->"b833d13a-676c-4b21-89fe-\
a0167971cb09"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteOptions", "[", 
    RowBox[{"dir_String", "?", 
     RowBox[{"(", 
      RowBox[{"DirectoryQ", "@*", "DirectoryName"}], ")"}]}], "]"}], ":=", 
   "\n", "\t", 
   RowBox[{"Replace", "[", 
    RowBox[{
     RowBox[{"Quiet", "@", 
      RowBox[{"Get", "[", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"dir", ",", " ", "\"\<SiteConfig.wl\>\""}], "}"}]}], "]"}]}],
      ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Except", "[", 
       RowBox[{
        RowBox[{"_", "?", "OptionQ"}], "|", 
        RowBox[{"_", "?", "AssociationQ"}], "|", 
        RowBox[{"_", "?", "AssociationQ"}]}], "]"}], "->", "\n", "\t\t\t", 
      RowBox[{"{", "}"}]}]}], "\n", "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteOptions", "[", 
   RowBox[{
    RowBox[{"dir_String", "?", 
     RowBox[{"(", 
      RowBox[{"DirectoryQ", "@*", "DirectoryName"}], ")"}]}], ",", " ", 
    "vals_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"FilterRules", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"WebSiteOptions", "[", "dir", "]"}], ",", "\n", "\t\t", "vals"}], 
   "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"36c94255-fa59-4561-90c7-5dc6eb4b747d"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]SetOptions\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712834098451429*^9, 
  3.712834100376466*^9}},ExpressionUUID->"852da3e9-4d44-4811-8409-\
b7cba8353a88"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteSetOptions", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", 
      RowBox[{"(", 
       RowBox[{"DirectoryQ", "@*", "DirectoryName"}], ")"}]}], ",", "\n", 
     "\t", 
     RowBox[{"ops", ":", 
      RowBox[{
       RowBox[{"_", "?", "OptionQ"}], "|", 
       RowBox[{"_", "?", "AssociationQ"}]}]}]}], "\n", "\t", "]"}], ":=", 
   "\n", "\t", 
   RowBox[{"Export", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"FileNameJoin", "@", 
      RowBox[{"{", 
       RowBox[{"dir", ",", "\"\<SiteConfig.wl\>\""}], "}"}]}], ",", "\n", 
     "\t\t", 
     RowBox[{"PrettyString", "@", "\n", "\t\t\t", 
      RowBox[{"Merge", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"WebSiteOptions", "[", "dir", "]"}], ",", "\n", "\t", "\t", 
          "\t\t\t", "ops"}], "\n", "\t", "\t", "\t\t\t", "}"}], ",", "\n", 
        "\t\t\t\t", "Last"}], "\n", "\t\t\t\t", "]"}]}], ",", "\n", "\t\t", 
     "\"\<Text\>\""}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"bf24bfdc-da31-4457-85f9-5cbe91af5554"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]NewContent\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712834307506276*^9, 3.712834310370082*^9}, 
   3.722971020842743*^9, 
   3.723006769079563*^9},ExpressionUUID->"0b275a88-5f55-481a-92aa-\
9a333afb0d5c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteNewContentAutoname", "[", 
   RowBox[{"dir_", ",", " ", "place_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{"ToUpperCase", "[", 
    RowBox[{"StringTake", "[", 
     RowBox[{"place", ",", " ", "1"}], "]"}], "]"}], "<>", "\n", "\t\t", 
   RowBox[{"StringDrop", "[", 
    RowBox[{
     RowBox[{"StringTrim", "[", 
      RowBox[{"place", ",", " ", "\"\<s\>\""}], "]"}], ",", " ", "1"}], "]"}],
    "<>", "\n", "\t\t", "\"\< #\>\"", "<>", "\n", "\t\t", 
   RowBox[{"ToString", "@", "\n", "\t\t", 
    RowBox[{"(", "\n", "\t\t\t", 
     RowBox[{"1", "+", 
      RowBox[{"Length", "@", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"DeleteDuplicatesBy", "[", "FileBaseName", "]"}], "@", "\n", 
        "\t", "\t\t\t\t", 
        RowBox[{"FileNames", "[", 
         RowBox[{
          RowBox[{
          "\"\<*.nb\>\"", "|", "\"\<*.md\>\"", "|", "\"\<*.html\>\"", "|", 
           "\"\<*.xml\>\""}], ",", "\n", "\t\t\t\t\t\t", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"dir", ",", " ", "\"\<content\>\"", ",", " ", "place"}], 
            "}"}]}]}], "]"}]}]}]}], "\n", "\t\t\t", 
     ")"}]}]}]}]], \
"CodeInput",ExpressionUUID->"d0f3bb7b-c111-4a71-837a-a099babd5605"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"WebSiteNewContent", "[", "\n", "\t", 
     RowBox[{
      RowBox[{"dir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
      "place_String", ",", "\n", "\t", 
      RowBox[{"name", ":", 
       RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}], ",", "\n", 
      "\t", 
      RowBox[{"content", ":", 
       RowBox[{"_List", "|", "_Cell", "|", "Automatic"}], ":", "Automatic"}], 
      ",", "\n", "\t", 
      RowBox[{"ops", ":", 
       RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], "/;", 
    RowBox[{"DirectoryQ", "@", 
     RowBox[{"FileNameJoin", "@", 
      RowBox[{"{", 
       RowBox[{"dir", ",", "\"\<content\>\"", ",", "place"}], "}"}]}]}]}], ":=",
    "\n", "\t", 
   RowBox[{"With", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{"autoname", "=", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"StringTrim", "[", 
           RowBox[{"#", ",", " ", 
            RowBox[{"\"\<.\>\"", "<>", 
             RowBox[{"FileExtension", "[", "#", "]"}]}]}], "]"}], "<>", 
          "\"\<.nb\>\""}], "&"}], "@", "\n", "\t", "\t\t\t\t", 
        RowBox[{"Replace", "[", 
         RowBox[{"name", ",", " ", 
          RowBox[{"Automatic", ":>", 
           RowBox[{"webSiteNewContentAutoname", "[", 
            RowBox[{"dir", ",", " ", "place"}], "]"}]}]}], "]"}]}]}], "\n", 
      "\t", "\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"FileExistsQ", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "dir", ",", "\"\<content\>\"", ",", "place", ",", "autoname"}], 
           "}"}]}]}]}], ",", "\n", "\t\t\t", 
       RowBox[{"SystemOpen", "@", "\n", "\t\t\t", 
        RowBox[{"Export", "[", 
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{
            "dir", ",", "\"\<content\>\"", ",", "place", ",", "autoname"}], 
            "}"}]}], ",", "\n", "\t\t\t\t", 
          RowBox[{"Notebook", "[", 
           RowBox[{
            RowBox[{"Flatten", "@", 
             RowBox[{"{", "\n", "\t\t\t\t\t", 
              RowBox[{
               RowBox[{"Cell", "[", "\n", "\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"BoxData", "@", 
                  RowBox[{"ToBoxes", "@", "\n", "\t\t\t\t\t\t\t", 
                   RowBox[{"Merge", "[", 
                    RowBox[{
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Switch", "[", 
                    RowBox[{
                    "place", ",", "\n", "\t\t\t\t\t\t\t\t\t", "\"\<posts\>\"",
                     ",", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "\"\<Title\>\"", "\[Rule]", "\"\<< Post Title >\>\""}], 
                    ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Slug\>\"", "\[Rule]", "Automatic"}], ",", 
                    "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Date\>\"", "\[Rule]", "Now"}], ",", "\n", 
                    "\t", "\t", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Tags\>\"", "\[Rule]", 
                    RowBox[{"{", "}"}]}], ",", "\n", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Authors\>\"", "\[Rule]", 
                    RowBox[{"{", "}"}]}], ",", "\n", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Categories\>\"", "\[Rule]", 
                    RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    "|>"}], ",", "\n", "\t\t\t\t\t\t\t\t\t", "\"\<pages\>\"", 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "\"\<Title\>\"", "\[Rule]", "\"\<< Page Title >\>\""}], 
                    ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Slug\>\"", "\[Rule]", "Automatic"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "|>"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t", "_", ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"\"\<Title\>\"", "\[Rule]", "\"\<< Title >\>\""}],
                     ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"\"\<Slug\>\"", "\[Rule]", "Automatic"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "|>"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", "ops", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", 
                    "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", "Last"}], "\n", 
                    "\t\t\t\t\t\t\t\t", "]"}]}]}], ",", "\n", "\t\t\t\t\t\t", 
                 "\"\<Metadata\>\""}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n",
                "\t", "\t\t\t\t", 
               RowBox[{"Cell", "[", "\n", "\t\t\t\t\t\t", 
                RowBox[{
                "\"\<Check the style list for the entire set of supported \
styles\>\"", ",", "\n", "\t\t\t\t\t\t", "\"\<Text\>\""}], "\n", 
                "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
               RowBox[{"Cell", "[", "\n", "\t\t\t\t\t\t", 
                RowBox[{
                "\"\<Input style cells will be dropped\>\"", ",", "\n", 
                 "\t\t\t\t\t\t", "\"\<Text\>\""}], "\n", "\t\t\t\t\t\t", 
                "]"}], ",", "\n", "\t\t\t\t\t", 
               RowBox[{"Replace", "[", 
                RowBox[{"content", ",", "\n", "\t\t\t\t\t\t", 
                 RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
                  RowBox[{
                  "Automatic", "\[RuleDelayed]", "\n", "\t\t\t\t\t\t\t\t", 
                   RowBox[{"Switch", "[", 
                    RowBox[{
                    "place", ",", "\n", "\t", "\t", "\t", "\t\t\t\t\t\t", 
                    "\"\<posts\>\"", ",", "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Cell", "[", "\n", "\t", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<This is a post, so article.html is the theme \
template for it.\>\"", ",", "\n", "\t", "\t", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t", "\"\<Text\>\""}], "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t", "\"\<pages\>\"", ",", "\n", "\t", "\t", 
                    "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Cell", "[", "\n", "\t", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<This is a page, so page.html is the theme template \
for it.\>\"", ",", "\n", "\t", "\t", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
                    "\"\<Text\>\""}], "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", 
                    "\t\t\t\t\t\t", "_", ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", "Nothing"}], "\n", "\t", 
                    "\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t\t", 
                  "}"}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", 
              "}"}]}], ",", "\n", "\t\t\t\t\t", 
            RowBox[{"StyleDefinitions", "\[Rule]", "\n", "\t", "\t\t\t\t\t", 
             RowBox[{"FrontEnd`FileName", "[", 
              RowBox[{
               RowBox[{"Evaluate", "@", 
                RowBox[{"{", "$PackageName", "}"}]}], ",", "\n", "\t", 
               "\t\t\t\t\t\t", "\"\<MarkdownNotebook.nb\>\""}], "\n", "\t", 
              "\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
         "\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", "$Failed"}], "\n", 
      "\t\t\t", "]"}]}], "\n", "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteNewContent", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
     "place_String", ",", "\n", "\t", 
     RowBox[{"name", ":", 
      RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}], ",", "\n", 
     "\t", 
     RowBox[{"content", ":", 
      RowBox[{"_List", "|", "_Cell", "|", "Automatic"}], ":", "Automatic"}], 
     ",", "\n", "\t", 
     RowBox[{"a_", "?", "AssociationQ"}]}], "\n", "\t", "]"}], "/;", 
   RowBox[{"DirectoryQ", "@", 
    RowBox[{"FileNameJoin", "@", 
     RowBox[{"{", 
      RowBox[{"dir", ",", "\"\<content\>\"", ",", "place"}], "}"}]}]}]}], ":=",
   "\n", "\t", 
  RowBox[{"WebSiteNewContent", "[", "\n", "  \t", 
   RowBox[{
   "dir", ",", "\n", "  \t", "place", ",", "\n", "  \t", "name", ",", "\n", 
    "  \t", "content", ",", "\n", "  \t", 
    RowBox[{"Normal", "@", "a"}]}], "\n", "  \t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"1daf2354-7482-47a2-96bd-ee04d4182bc5"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TableOfContents\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7235735226709948`*^9, 
  3.723573525014244*^9}},ExpressionUUID->"b93958d2-fce2-4280-90aa-\
e809f33d33e1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteNewTableOfContents", "[", 
   RowBox[{"dir_String", "?", "DirectoryQ"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
     "outdir", ",", "\n", "\t\t\t", "metas", ",", "\n", "\t", "\t\t", "data", 
      ",", "\n", "\t\t\t", "cells", ",", "\n", "\t\t\t", 
      RowBox[{"postCounter", "=", "1"}]}], "\n", "\t\t\t", "}"}], ",", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"outdir", "=", "\n", "\t\t\t", 
      RowBox[{"FileNameJoin", "@", 
       RowBox[{"{", 
        RowBox[{
        "dir", ",", " ", "\"\<content\>\"", ",", " ", "\"\<posts\>\""}], 
        "}"}]}]}], ";", "\n", "\t\t", 
     RowBox[{"metas", "=", "\n", "\t\t\t", 
      RowBox[{"SortBy", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"AssociationMap", "[", "\n", "\t", "\t", "\t", "\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"Association", "@", "\n", "\t", "\t", "\t", "\t\t", 
            RowBox[{"Map", "[", "\n", "\t", "\t", "\t", "\t\t\t", 
             RowBox[{
              RowBox[{
               RowBox[{"Rule", "@@", 
                RowBox[{"StringTrim", "@", 
                 RowBox[{"StringSplit", "[", 
                  RowBox[{"#", ",", " ", "\"\<:\>\"", ",", " ", "2"}], 
                  "]"}]}]}], "&"}], ",", "\n", "\t", "\t", "\t", "\t\t\t", 
              RowBox[{
              "StringSplit", "[", "\n", "\t", "\t", "\t", "\t\t\t\t", 
               RowBox[{
                RowBox[{
                 RowBox[{"StringSplit", "[", 
                  RowBox[{
                   RowBox[{"Import", "[", 
                    RowBox[{"#", ",", "\"\<Text\>\""}], "]"}], ",", " ", 
                   "\"\<\\n\\n\>\"", ",", "2"}], "]"}], "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", "\n", "\t", "\t", "\t", 
                "\t\t\t\t", "\"\<\\n\>\""}], "\n", "\t", "\t", "\t", 
               "\t\t\t\t", "]"}]}], "\n", "\t", "\t", "\t", "\t\t\t", "]"}]}],
            "&"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Select", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNames", "[", 
             RowBox[{"\"\<*.md\>\"", ",", "outdir", ",", "\[Infinity]"}], 
             "]"}], ",", "\n", "\t", "\t", "\t", "\t\t\t", 
            RowBox[{
             RowBox[{"!", 
              RowBox[{"StringMatchQ", "[", 
               RowBox[{
                RowBox[{"FileBaseName", "[", "#", "]"}], ",", " ", 
                "\"\<toc\>\""}], "]"}]}], "&"}]}], "\n", "\t", "\t", "\t", 
           "\t\t\t", "]"}]}], "\n", "\t", "\t", "\t", "\t\t", "]"}], ",", 
        "\n", "\t", "\t", "\t", "\t", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"KeyMemberQ", "[", 
            RowBox[{"#", ",", " ", "\"\<ID\>\""}], "]"}], ",", "\n", "\t", 
           "\t", "\t", "\t\t", 
           RowBox[{"ToExpression", "[", "\n", "\t", "\t", "\t", "\t\t\t", 
            RowBox[{"StringSplit", "[", 
             RowBox[{"#ID", ",", " ", "\"\<.\>\""}], "]"}], "\n", "\t", "\t", 
            "\t", "\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", "\t\t", 
           RowBox[{"{", 
            RowBox[{"1000", ",", "1000", ",", "1000"}], "}"}]}], "\n", "\t", 
          "\t", "\t", "\t\t", "]"}], "&"}]}], "\n", "\t", "\t\t\t", "]"}]}], 
     ";", "\n", "\t\t", 
     RowBox[{"data", "=", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"GroupBy", "[", 
        RowBox[{"First", "\[Rule]", "Last"}], "]"}], "/@", "\n", "\t", "\t", 
       "\t\t", 
       RowBox[{
        RowBox[{"GroupBy", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", 
             RowBox[{"1", ",", "1"}], "]"}], "]"}], "&"}], "\[Rule]", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"[", 
               RowBox[{"1", ",", "2"}], "]"}], "]"}], "\[Rule]", 
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], "&"}], ")"}]}], "]"}], "@", 
        "\n", "\t\t\t\t\t", 
        RowBox[{"KeyValueMap", "[", "\n", "\t\t\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"KeyMemberQ", "[", 
               RowBox[{"#2", ",", " ", "\"\<Path\>\""}], "]"}], ",", " ", 
              "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"Take", "[", 
               RowBox[{
                RowBox[{"URLParse", "[", 
                 RowBox[{
                  RowBox[{"#2", "[", "\"\<Path\>\"", "]"}], ",", " ", 
                  "\"\<Path\>\""}], "]"}], ",", " ", 
                RowBox[{"UpTo", "[", "2", "]"}]}], "]"}], ",", "\n", 
              "\t\t\t\t\t\t\t\t", 
              RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], "->", 
            "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{
              "\"\<Path\>\"", "\[Rule]", "\n", "\t", "\t\t\t\t\t\t\t\t", 
               RowBox[{"URLBuild", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"Flatten", "@", 
                 RowBox[{
                 "{", "\n", "\t", "\t", "\t", "\t", "\t", "\t", "\t", 
                  "\t\t\t\t", 
                  RowBox[{
                  "\"\<..\>\"", ",", "\n", "\t", "\t", "\t", "\t", "\t", "\t",
                    "\t", "\t\t\t\t", 
                   RowBox[{"Most", "@", 
                    RowBox[{"FileNameSplit", "@", 
                    RowBox[{"StringTrim", "[", 
                    RowBox[{"#", ",", " ", "outdir"}], "]"}]}]}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"WebSiteBuildAttachExtension", "@", 
                    RowBox[{"#2", "[", "\"\<Slug\>\"", "]"}]}]}], "\n", 
                  "\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], "\n", 
                "\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
              "\t\t\t\t\t\t\t\t", 
              RowBox[{
              "\"\<Title\>\"", "\[Rule]", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{"KeyMemberQ", "[", 
                  RowBox[{"#2", ",", " ", "\"\<Title\>\""}], "]"}], ",", " ", 
                 "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"#2", "[", "\"\<Title\>\"", "]"}], ",", "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"\"\<Post #\>\"", "<>", 
                  RowBox[{"ToString", "[", 
                   RowBox[{"postCounter", "++"}], "]"}]}]}], "\n", 
                "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
             "|>"}]}], "&"}], ",", "\n", "\t\t\t\t\t\t", "metas"}], "\n", 
         "\t\t\t\t\t\t", "]"}]}]}]}], ";", "\n", "\t\t", 
     RowBox[{"cells", "=", "\n", "\t\t\t", 
      RowBox[{"KeyValueMap", "[", "\n", "\t", "\t", "\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"Cell", "[", "\n", "\t", "\t", "\t\t\t", 
          RowBox[{"CellGroupData", "[", 
           RowBox[{"Flatten", "@", 
            RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Cell", "[", 
               RowBox[{"#", ",", " ", "\"\<Section\>\""}], "]"}], ",", "\n", 
              "\t", "\t", "\t\t\t\t\t", 
              RowBox[{"KeyValueMap", "[", "\n", "\t", "\t", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{
                 RowBox[{"Cell", "[", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{
                  "CellGroupData", "[", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                   
                   RowBox[{"Flatten", "@", 
                    RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Cell", "[", 
                    RowBox[{"#", ",", "\"\<Subsection\>\""}], "]"}], ",", 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "Map", "[", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    "Cell", "[", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "TextData", "[", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"ButtonBox", "[", 
                    RowBox[{
                    "#Title", ",", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", " ", 
                    RowBox[{"BaseStyle", "\[Rule]", "\"\<Hyperlink\>\""}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "ButtonData", "\[Rule]", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "{", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FrontEnd`FileName", "[", 
                    RowBox[{"Evaluate", "@", 
                    RowBox[{"URLParse", "[", 
                    RowBox[{"#Path", ",", " ", "\"\<Path\>\""}], "]"}]}], 
                    "]"}], ",", " ", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", "\t", 
                    "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}]}], "\n", 
                    "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}], "\n", 
                    "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
                    "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", "\"\<Item\>\""}], 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", "]"}], "&"}], 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", "#2"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}], "\n", "\t\t\t\t\t\t\t\t\t", 
                  "]"}], "&"}], ",", "\n", "\t", "\t", "\t\t\t\t\t\t", "#2"}],
                "\n", "\t", "\t", "\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t", 
             "\t\t\t\t\t", "}"}]}], "\n", "\t", "\t", "\t\t\t\t", "]"}], "\n",
           "\t", "\t", "\t\t\t", "]"}], "&"}], ",", "\n", "\t\t\t\t", 
        "data"}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t", 
     RowBox[{"WebSiteNewContent", "[", 
      RowBox[{
      "dir", ",", "\n", "\t\t", "\"\<pages\>\"", ",", "\n", "\t\t", 
       "\"\<toc\>\"", ",", "\n", "\t\t", "cells", ",", "\n", "\t\t", 
       RowBox[{"{", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"\"\<Title\>\"", "\[Rule]", "\"\<Table of Contents\>\""}], 
         ",", "\n", "\t\t\t", 
         RowBox[{"\"\<Slug\>\"", "\[Rule]", "\"\<toc\>\""}]}], "\n", "\t\t\t",
         "}"}]}], "\n", "\t\t", "]"}]}]}], "\n", "\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"84c388d3-ec88-49fb-9da2-83d3914bdb6b"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]FindTheme\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7125375649332743`*^9, 3.712537566964675*^9}, {
  3.723000499184258*^9, 3.723000500014727*^9}, {3.723055488689538*^9, 
  3.723055488830216*^9}},ExpressionUUID->"a9c254ba-28fd-4570-95f7-\
398bb0ac2fc4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteThemes", "[", "themePat_", "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{"Select", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"DirectoryQ", "@", 
      RowBox[{"FileNameJoin", "@", 
       RowBox[{"{", 
        RowBox[{"#", ",", " ", "\"\<templates\>\""}], "}"}]}]}], "&"}], "\n", 
    "\t\t", "]"}], "@", "\n", "\t\t", 
   RowBox[{"FileNames", "[", 
    RowBox[{"themePat", ",", " ", "$WebSiteThemePath"}], 
    "]"}]}]}]], "CodeInput",
 CellChangeTimes->{{3.7230034448934927`*^9, 
  3.723003517515032*^9}},ExpressionUUID->"c51a3c31-bbe0-4312-bf2d-\
2bc02ccdf0d3"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"validThemeURL", "[", "s_", "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"parse", "=", 
       RowBox[{"URLParse", "[", "s", "]"}]}], "}"}], ",", "\n", "\t\t", 
     RowBox[{"MatchQ", "[", 
      RowBox[{
       RowBox[{"parse", "[", "\"\<Scheme\>\"", "]"}], ",", " ", 
       RowBox[{"\"\<http\>\"", "|", "\"\<https\>\""}]}], "]"}]}], "\n", 
    "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteInstallTheme", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"themeURL_String", "?", "validThemeURL"}], ",", " ", "\n", "\t", 
     
     RowBox[{"dir", ":", 
      RowBox[{
       RowBox[{"_String", "?", "DirectoryQ"}], "|", "Automatic"}], ":", 
      "Automatic"}]}], "\n", "\t", "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"d", "=", 
       RowBox[{"Replace", "[", 
        RowBox[{"dir", ",", " ", 
         RowBox[{"Automatic", "\[RuleDelayed]", "$WebSiteTempThemeDir"}]}], 
        "]"}]}], "}"}], ",", "\n", "\t\t", 
     RowBox[{"With", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"arc", "=", 
         RowBox[{"ExtractArchive", "[", 
          RowBox[{
           RowBox[{"URLDownload", "[", "themeURL", "]"}], ",", " ", "d"}], 
          "]"}]}], "}"}], ",", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"MinimalBy", "[", 
          RowBox[{
           RowBox[{"DirectoryName", "/@", "arc"}], ",", " ", 
           "FileNameDepth"}], "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"{", 
             RowBox[{"t_", ",", " ", "___"}], "}"}], "\[RuleDelayed]", "t"}], 
           ",", "\n", "\t\t\t\t\t", 
           RowBox[{"_", "\[Rule]", "$Failed"}]}], "\n", "\t\t\t\t\t", "}"}]}],
         "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
    "]"}]}], ";"}]}], "CodeInput",
 CellChangeTimes->{{3.728211352430552*^9, 3.728211580336132*^9}, {
   3.728211680742462*^9, 3.728211908324335*^9}, 
   3.728967545094336*^9},ExpressionUUID->"6b21823a-1982-407b-a26e-\
4eb88c1c3324"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteFindTheme", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "False"}], "\n", "\t\t", 
    "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteFindTheme", "[", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", "theme_String", ",",
      "\n", "\t", 
     RowBox[{"o", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"SelectFirst", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Join", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{"theme", ",", "\n", "\t\t\t\t", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"dir", ",", " ", "\"\<themes\>\"", ",", " ", "theme"}], 
           "}"}]}], ",", "\n", "\t\t\t\t", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"dir", ",", " ", "\"\<theme\>\""}], "}"}]}]}], "\n", 
        "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
       RowBox[{"Map", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"#", ",", " ", "theme"}], "}"}]}], "&"}], ",", "\n", 
         "\t\t\t\t", "$WebSiteThemePath"}], "\n", "\t\t\t\t", "]"}]}], "\n", 
      "\t\t\t", "]"}], ",", "\n", "\t\t", "DirectoryQ", ",", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"OptionValue", "[", "\"\<DownloadTheme\>\"", "]"}], "===", 
        "True"}], ",", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteInstallTheme", "[", "\n", "\t\t\t\t\t", 
          RowBox[{"URLBuild", "@", 
           RowBox[{"{", 
            RowBox[{"$WebThemesURLBase", ",", " ", 
             RowBox[{"theme", "<>", "\"\<.zip\>\""}]}], "}"}]}], "\n", 
          "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t", 
          RowBox[{"WebSiteFindTheme", "[", 
           RowBox[{"dir", ",", " ", "theme", ",", " ", 
            RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "False"}]}], 
           "]"}]}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t", 
       "$Failed"}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteFindTheme", "[", 
   RowBox[{
    RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", "theme_String", ",", 
    " ", 
    RowBox[{"a_", "?", "AssociationQ"}]}], "]"}], ":=", "\n", "\t", 
  RowBox[{"WebSiteFindTheme", "[", 
   RowBox[{"dir", ",", " ", "theme", ",", " ", 
    RowBox[{"Normal", "@", "a"}]}], "]"}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteFindTheme", "[", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", 
     RowBox[{"op", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"ops", "=", 
        RowBox[{"WebSiteOptions", "[", "dir", "]"}]}], ",", "\n", "\t", 
       "\t\t", "theme"}], "\n", "\t", "\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{"Replace", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Lookup", "[", 
        RowBox[{"ops", ",", " ", "\"\<Theme\>\""}], "]"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t", 
          RowBox[{"WebSiteFindTheme", "[", 
           RowBox[{"dir", ",", " ", "s", ",", " ", "op"}], "]"}]}], ",", "\n",
          "\t\t\t\t", 
         RowBox[{"_", "\[RuleDelayed]", "\n", "\t\t\t\t\t", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"DirectoryQ", "@", 
             RowBox[{"FileNameJoin", "@", 
              RowBox[{"{", 
               RowBox[{"dir", ",", " ", "\"\<theme\>\""}], "}"}]}]}], ",", 
            "\n", "\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<theme\>\""}], "}"}]}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"Replace", "[", 
             RowBox[{
              RowBox[{"WebSiteFindTheme", "[", 
               RowBox[{"dir", ",", " ", "\"\<minimal\>\"", ",", " ", "op"}], 
               "]"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"$Failed", ":>", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"SelectFirst", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"FileNames", "[", 
                  RowBox[{"\"\<*\>\"", ",", " ", "$WebSiteThemePath"}], "]"}],
                  ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"DirectoryQ", "@", 
                   RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"#", ",", " ", "\"\<templates\>\""}], "}"}]}]}], 
                  "&"}]}], "\n", "\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
             "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], "\n",
         "\t\t\t\t", "}"}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteFindTheme", "[", 
   RowBox[{
    RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", 
    RowBox[{"a_", "?", "AssociationQ"}]}], "]"}], ":=", "\n", "\t", 
  RowBox[{"WebSiteFindTheme", "[", 
   RowBox[{"dir", ",", " ", "theme", ",", " ", 
    RowBox[{"Normal", "@", "a"}]}], 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"94ebe91a-80a1-4a63-be4d-4a3da9579a9d"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Content\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"dfc0bd1d-1881-4055-9b19-76acfc9ad54b"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteContent", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", "\n", "\t", 
     RowBox[{"path", ":", 
      RowBox[{"{", "___String", "}"}], ":", 
      RowBox[{"{", "}"}]}], ",", " ", "\n", "\t", 
     RowBox[{"contentPat", ":", 
      RowBox[{"_", "?", "StringPattern`StringPatternQ"}]}]}], "\n", "\t", 
    "]"}], ":=", "\n", "\t", 
   RowBox[{
    RowBox[{"DeleteDuplicatesBy", "[", "FileBaseName", "]"}], "@", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"SortBy", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"FileExtension", "[", "#", "]"}], "=!=", "\"\<nb\>\""}], 
       "&"}], "]"}], "@", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"Select", "[", 
       RowBox[{"Not", "@*", "DirectoryQ"}], "]"}], "@", "\n", "\t\t\t\t", 
      RowBox[{"FileNames", "[", 
       RowBox[{"contentPat", ",", " ", 
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"dir", ",", " ", "\"\<content\>\"", ",", " ", "path"}], 
           "}"}]}]}]}], "]"}]}]}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"2471a5c5-bb30-4594-a0ab-0dcf736d3031"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSitePages", "[", 
   RowBox[{
    RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", 
    RowBox[{"contentPat", ":", 
     RowBox[{"_", "?", "StringPattern`StringPatternQ"}]}]}], "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"WebSiteContent", "[", 
   RowBox[{"dir", ",", " ", 
    RowBox[{"{", "\"\<pages\>\"", "}"}], ",", " ", "contentPat"}], 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"51d9298e-bcf3-4178-b3be-2b2819a0351a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSitePosts", "[", 
   RowBox[{
    RowBox[{"dir_String", "?", "DirectoryQ"}], ",", " ", 
    RowBox[{"contentPat", ":", 
     RowBox[{"_", "?", "StringPattern`StringPatternQ"}]}]}], "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"WebSiteContent", "[", 
   RowBox[{"dir", ",", " ", 
    RowBox[{"{", "\"\<posts\>\"", "}"}], ",", " ", "contentPat"}], 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"4a63ccac-3b15-4695-90b2-5af2cf894a67"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteOpenTheme\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723000190422576*^9, 3.723000191699443*^9}, {
  3.7230005042703114`*^9, 
  3.7230005053908033`*^9}},ExpressionUUID->"feaace21-138b-4597-90c5-\
03af910875c0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteOpenTheme", "[", 
   RowBox[{"dir_", ",", " ", 
    RowBox[{"theme", ":", 
     RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}]}], "]"}], ":=",
   "\n", "\t", 
  RowBox[{"Replace", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"theme", "===", "Automatic"}], ",", "\n", "\t\t\t", 
      RowBox[{"WebSiteFindTheme", "[", "dir", "]"}], ",", "\n", "\t\t\t", 
      RowBox[{"WebSiteFindTheme", "[", 
       RowBox[{"dir", ",", " ", "theme"}], "]"}]}], "\n", "\t\t\t", "]"}], 
    ",", "\n", "\t\t", 
    RowBox[{"d_String", "\[RuleDelayed]", 
     RowBox[{"SystemOpen", "[", "d", "]"}]}]}], "\n", "\t\t", 
   "]"}]}]], "CodeInput",
 CellChangeTimes->{{3.723000461708989*^9, 3.723000465198411*^9}, {
  3.723000506917292*^9, 3.7230005141650887`*^9}, {3.723000986058577*^9, 
  3.7230010895632973`*^9}},ExpressionUUID->"05f74d7a-7248-4282-9570-\
702ae8010219"]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ContentStack Manipulation\[RightFloor]", "CodeSubsection",
 
 Evaluatable->True,ExpressionUUID->"e4bd420f-6b89-4643-8df9-e2e442b30fc5"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteSetContentAttributes\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"5a3591b7-ee7b-48a9-ab38-2d54fc898ade"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteSetContentAttributes", "[", "\n", "\t", 
   RowBox[{"fname_", ",", "\n", "\t", "props_"}], "\n", "\t", "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"!", 
       RowBox[{"AssociationQ", "@", 
        RowBox[{"$WebSiteBuildContentStack", "[", "fname", "]"}]}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"$WebSiteBuildContentStack", "[", "fname", "]"}], "=", 
       RowBox[{"<|", "|>"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"!", 
       RowBox[{"AssociationQ", "@", 
        RowBox[{"$WebSiteBuildContentStack", "[", 
         RowBox[{"fname", ",", " ", "\"\<Attributes\>\""}], "]"}]}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"$WebSiteBuildContentStack", "[", 
        RowBox[{"fname", ",", " ", "\"\<Attributes\>\""}], "]"}], "=", 
       RowBox[{"<|", "|>"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
    RowBox[{"AssociateTo", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"$WebSiteBuildContentStack", "[", 
       RowBox[{"fname", ",", " ", "\"\<Attributes\>\""}], "]"}], ",", "\n", 
      "\t\t\t", "props"}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"10ab6db5-7b2d-4e9e-a079-d89395346e61"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteCollectContentURLs\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"5db73292-cee5-4c0b-8a16-ebbec81e545c"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"WebSiteCollectContentURLs", "[", "]"}], ":="}], "\n", "\t", 
  "*)"}]], "CodeInput",ExpressionUUID->"6fc92a97-5580-4d2e-9e1e-c68a5e5a9981"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Cache\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"5c9f400f-d770-415f-9d64-b87d52890541"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Basic\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"bd9e8294-389c-48ff-99a9-64ce974af23f"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteCachePath", "[", "dir_", "]"}], ":=", "\n", "\t", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", 
     RowBox[{"dir", ",", " ", "\"\<ContentCache.mx\>\""}], "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"9f3c335c-6c57-437b-a22e-0ca982c22638"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteFindCache", "[", "dir_", "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", 
   RowBox[{
    RowBox[{"WebSiteCachePath", "[", "dir", "]"}], ",", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"f", ":", 
        RowBox[{"Except", "[", 
         RowBox[{
          RowBox[{"\"\<\>\"", "|", 
           RowBox[{"_", "?", 
            RowBox[{"(", 
             RowBox[{"Not", "@*", "FileExistsQ"}], ")"}]}]}], ",", " ", 
          "_String"}], "]"}]}], ":>", "\n", "\t\t\t\t", "f"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t", "}"}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"3e0ebf8f-95a7-4554-b3cc-031b7b6e5674"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteLoadCache", "[", "dir_", "]"}], ":=", "\n", "\t", 
   RowBox[{"Replace", "[", 
    RowBox[{
     RowBox[{"WebSiteFindCache", "[", "dir", "]"}], ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"None", "\[Rule]", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"f_", ":>", 
        RowBox[{"Replace", "[", 
         RowBox[{
          RowBox[{"Quiet", "@", 
           RowBox[{"Import", "[", "f", "]"}]}], ",", " ", 
          RowBox[{
           RowBox[{"Except", "[", 
            RowBox[{"_", "?", "AssociationQ"}], "]"}], "\[Rule]", 
           RowBox[{"<|", "|>"}]}]}], "]"}]}]}], "\n", "\t\t\t", "}"}]}], "\n",
     "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"2b957a66-edaa-4bae-a667-f1640425bd14"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Template\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"772eab8d-4d65-4542-a046-5778886fb5c0"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteTemplateCachePath", "[", "dir_", "]"}], ":=", "\n", "\t", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", 
     RowBox[{"dir", ",", " ", "\"\<TemplateCache.mx\>\""}], "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"ba6746aa-ffd2-4cb8-bba2-2a1a053f5f37"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteFindTemplateCache", "[", "dir_", "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", 
   RowBox[{
    RowBox[{"WebSiteTemplateCachePath", "[", "dir", "]"}], ",", "\n", "\t\t", 
    
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"f", ":", 
        RowBox[{"Except", "[", 
         RowBox[{
          RowBox[{"\"\<\>\"", "|", 
           RowBox[{"_", "?", 
            RowBox[{"(", 
             RowBox[{"Not", "@*", "FileExistsQ"}], ")"}]}]}], ",", " ", 
          "_String"}], "]"}]}], ":>", "\n", "\t\t\t\t", "f"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t", "}"}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"652f4a96-b15d-4935-9b34-89559efaa2f4"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteLoadTemplateCache", "[", "dir_", "]"}], ":=", "\n", "\t", 
   RowBox[{"Replace", "[", 
    RowBox[{
     RowBox[{"WebSiteFindTemplateCache", "[", "dir", "]"}], ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"None", "\[Rule]", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"f_", ":>", 
        RowBox[{"Replace", "[", 
         RowBox[{
          RowBox[{"Quiet", "@", 
           RowBox[{"Import", "[", "f", "]"}]}], ",", " ", 
          RowBox[{
           RowBox[{"Except", "[", 
            RowBox[{"_", "?", "AssociationQ"}], "]"}], "\[Rule]", 
           RowBox[{"<|", "|>"}]}]}], "]"}]}]}], "\n", "\t\t\t", "}"}]}], "\n",
     "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"592c3ec9-a5c7-437e-b352-3688a9600548"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSitePrepContentName\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"38cb84af-8585-40fd-902c-02f8f8fc0fa8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSitePrepContentName", "[", 
   RowBox[{"content_", ",", " ", "root_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"StringQ", "@", "content"}], ",", "\n", "\t\t", 
    RowBox[{"StringTrim", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"StringTrim", "[", "\n", "\t", "\t\t\t", 
       RowBox[{
        RowBox[{"StringTrim", "[", 
         RowBox[{"content", ",", " ", "root"}], "]"}], ",", " ", "\n", "\t", 
        "\t\t\t", "$UserDocumentsDirectory"}], "\n", "\t", "\t\t\t", "]"}], 
      ",", "\n", "\t\t\t", "$HomeDirectory"}], "\n", "\t\t\t", "]"}], ",", 
    "\n", "\t\t", "content"}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"a8a2d87a-1196-4c67-adc7-7c0f98c93ba8"]
}, Closed]]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Site Building\[RightFloor]", "CodeSubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712787607780467*^9, 3.712787609758031*^9}, {
  3.7128335635270357`*^9, 
  3.712833564412951*^9}},ExpressionUUID->"019a6190-bda3-4dd1-97db-\
7959706b5580"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]XMLTemplateApply\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"712b97db-780f-45e0-978f-ef9bf99e3b7e"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]xmlTemplateApplyInit\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"89592074-0377-4899-823f-33a53d9c783a"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"xmlTemplateApplyInit", "[", 
    RowBox[{"root_", ",", " ", "template_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"(", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"$WSBCachedBuildData", "[", "\"\<Context\>\"", "]"}], "=", 
      "$Context"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"$WSBCachedBuildData", "[", "\"\<ContextPath\>\"", "]"}], "=", 
      "$ContextPath"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"$WSBCachedBuildData", "[", "\"\<TemplatePath\>\"", "]"}], "=", 
      "$TemplatePath"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"$WSBCachedBuildData", "[", "\"\<Path\>\"", "]"}], "=", 
      "$Path"}], ";", "\n", "\t\t", 
     RowBox[{"$TemplatePath", "=", "\n", "\t\t\t", 
      RowBox[{"Join", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"List", "@", "\n", "\t\t\t\t\t", 
          RowBox[{"Replace", "[", 
           RowBox[{"root", ",", " ", 
            RowBox[{"Automatic", "\[RuleDelayed]", 
             RowBox[{"DirectoryName", "@", "template"}]}]}], "]"}]}]}], ",", 
        "\n", "\t\t\t\t", "$TemplatePath", ",", "\n", "\t\t\t\t", 
        RowBox[{
        "{", "\n", "\t\t\t\t\t", "$WebSiteTemplateLibDirectory", "\n", 
         "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"$Path", "=", "\n", "\t\t\t", 
      RowBox[{"Join", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"List", "@", "\n", "\t\t\t\t\t", 
          RowBox[{"Replace", "[", 
           RowBox[{"root", ",", " ", 
            RowBox[{"Automatic", "\[RuleDelayed]", 
             RowBox[{"DirectoryName", "@", "template"}]}]}], "]"}]}]}], ",", 
        "\n", "\t\t\t\t", "$Path", ",", "\n", "\t\t\t\t", 
        RowBox[{
        "{", "\n", "\t\t\t\t\t", "$WebSiteTemplateLibDirectory", "\n", 
         "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"$Context", "=", "\"\<Templating`gen`\>\""}], ";", "\n", "\t\t", 
     
     RowBox[{"$ContextPath", "=", 
      RowBox[{"{", 
       RowBox[{
       "\"\<Templating`gen`\>\"", ",", " ", "\"\<Templating`lib`\>\"", ",", 
        " ", "\"\<System`\>\""}], "}"}]}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"TrueQ", "[", "$templateLibLoaded", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{
        RowBox[{"Templating`lib`$$", "=", 
         RowBox[{"<|", "|>"}]}], ";", "\n", "\t\t\t", 
        RowBox[{"Get", "[", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "\"\<include\>\"", ",", " ", "\"\<lib\>\"", ",", " ", 
            "\"\<loadTemplateLib.m\>\""}], "}"}]}], "]"}], ";", "\n", 
        "\t\t\t", 
        RowBox[{"$templateLibLoaded", "=", "True"}]}]}], "\n", "\t\t\t", 
      "]"}]}], "\n", "\t\t", ")"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"cf4a0717-449a-480f-8e8a-a7b4f6693815"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]xmlTemplateApplyRestore\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"bee11f69-0317-4b38-aee4-deb98e8f70d0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xmlTemplateApplyRestore", "[", "]"}], ":=", "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"Quiet", "@", 
     RowBox[{"Remove", "[", "\"\<Templating`gen`*\>\"", "]"}]}], ";", "\n", 
    "\t\t", 
    RowBox[{"System`Private`RestoreContextPath", "[", "]"}], ";", "\n", 
    "\t\t", 
    RowBox[{"$Context", "=", 
     RowBox[{"$WSBCachedBuildData", "[", "\"\<Context\>\"", "]"}]}], ";", 
    "\n", "\t\t", 
    RowBox[{"$TemplatePath", "=", 
     RowBox[{"$WSBCachedBuildData", "[", "\"\<TemplatePath\>\"", "]"}]}], ";",
     "\n", "\t\t", 
    RowBox[{"$Path", "=", 
     RowBox[{"$WSBCachedBuildData", "[", "\"\<Path\>\"", "]"}]}], ";", "\n", 
    "\t\t", 
    RowBox[{"$ContextPath", "=", 
     RowBox[{"$WSBCachedBuildData", "[", "\"\<ContextPath\>\"", "]"}]}], ";", 
    "\n", "\t\t", 
    RowBox[{"$WSBCachedBuildData", "//", "Clear"}]}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"4e763309-10c8-47aa-b8ed-63d3d4119720"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]xmlTemplatePostProcessWhitespace\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"45dc55ff-2538-4a7e-bd71-5e6945c66df1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xmlTemplatePostProcessWhitespace", "[", "s_", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"StringReplace", "[", 
   RowBox[{"s", ",", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"pre", ":", 
        RowBox[{"(", "\n", "\t\t\t\t", 
         RowBox[{"Shortest", "[", 
          RowBox[{"\"\<<pre\>\"", "~~", "___", "~~", "\"\<</pre>\>\""}], 
          "]"}], "\n", "\t\t\t\t", ")"}]}], "\[RuleDelayed]", "pre"}], ",", 
      "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Repeated", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"Whitespace", "?", 
             RowBox[{"(", 
              RowBox[{"StringFreeQ", "[", "\"\<\\n\>\"", "]"}], ")"}]}], "|", 
            "\"\<\>\""}], ")"}], "~~", "\"\<\\n\>\""}], ",", " ", "\n", "\t", 
         "\t", "\t\t", 
         RowBox[{"{", 
          RowBox[{"2", ",", " ", "\[Infinity]"}], "}"}]}], "\n", "\t", "\t", 
        "\t\t", "]"}], "\[Rule]", "\"\<\\n\>\""}]}], "\n", "\t\t\t", "}"}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"5cc95ede-4119-4cef-a366-e6fbea88f280"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]xmlTemplateLoad\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"209673ad-5e44-45fb-b204-d6f58046c8f0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xmlTemplateLoad", "[", "template_", "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"tdat", "=", 
      RowBox[{"$WebSiteTemplateCache", "[", "template", "]"}]}], "}"}], ",", 
    "\n", "\t\t", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"MissingQ", "[", "tdat", "]"}], "||", 
       RowBox[{"!", 
        RowBox[{"DateObjectQ", "@", "$WebSiteLastBuild"}]}], "||", "\n", 
       "\t\t\t", 
       RowBox[{
        RowBox[{"FileDate", "[", 
         RowBox[{"template", ",", " ", "\"\<Modification\>\""}], "]"}], "<=", 
        "$WebSiteLastBuild"}]}], ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"$WebSiteTemplateCache", "[", "template", "]"}], "=", "\n", 
       "\t\t\t\t", 
       RowBox[{"XMLTemplate", "[", 
        RowBox[{"File", "[", "template", "]"}], "]"}]}], ",", "\n", "\t\t\t", 
      "tdat"}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"afe0b1d7-508d-4e01-a1d8-c4c57573702f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteXMLTemplateApply\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"3f02d84a-5e6c-4015-be1a-8ca1ab8a0c60"],

Cell[BoxData[
 RowBox[{"WebSiteXMLTemplateApply", "//", 
  "Clear"}]], \
"CodeInput",ExpressionUUID->"a89faa85-8089-4793-85a9-81aedefb3085"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteXMLTemplateApply", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"root", ":", 
      RowBox[{"_String", "|", 
       RowBox[{"{", "__String", "}"}], "|", "Automatic"}], ":", "Automatic"}],
      ",", "\n", "\t", 
     RowBox[{"template", ":", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"_String", "|", "_File"}], ")"}], "?", "FileExistsQ"}]}], ",",
      "\n", "\t", 
     RowBox[{"args", ":", 
      RowBox[{
       RowBox[{"_", "?", "OptionQ"}], "|", 
       RowBox[{"_", "?", "AssociationQ"}]}], ":", 
      RowBox[{"{", "}"}]}]}], "\n", "\t", "]"}], ":=", "\n", "\t", 
   RowBox[{"Replace", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Internal`WithLocalSettings", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"xmlTemplateApplyInit", "[", 
        RowBox[{"root", ",", " ", "template"}], "]"}], ",", "\n", "\t\t\t", 
       RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"xmlTemplateLoad", "[", "template", "]"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"Templating`lib`$$", "=", 
          RowBox[{"Association", "@", "args"}]}]}], "\n", "\t\t\t\t", "]"}], 
       ",", "\n", "\t\t\t", 
       RowBox[{"xmlTemplateApplyRestore", "[", "]"}]}], "\n", "\t\t\t", "]"}],
      ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{"s_String", ":>", "\n", "\t\t\t\t", 
       RowBox[{"xmlTemplatePostProcessWhitespace", "[", "s", "]"}]}], "\n", 
      "\t\t\t", "}"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"ba24d925-bdc6-4d19-a230-a364f5d1748c"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Utils\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712670143457838*^9, 
  3.712670146008109*^9}},ExpressionUUID->"761c0fcc-aab9-4b68-9311-\
f2ba2003ee81"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildSlug\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"5489983b-6ff9-4e96-bae3-bdfb4adeb0c6"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildSlug", "[", "fname_", "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"fe", "=", 
      RowBox[{"FileExtension", "[", "fname", "]"}]}], "}"}], ",", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"StringReplace", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Nest", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"StringTrim", "[", 
           RowBox[{
            RowBox[{"StringTrim", "[", "#", "]"}], ",", " ", 
            RowBox[{"\"\<.\>\"", "<>", "fe"}]}], "]"}], "&"}], ",", " ", 
         "fname", ",", " ", "2"}], "]"}], ",", " ", "\n", "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WhitespaceCharacter", "\[Rule]", "\"\<-\>\""}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"ent", ":", "\"\<&#\>\""}], "~~", "NumberString", "~~", 
           "\"\<;\>\""}], "\[RuleDelayed]", "ent"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"\"\<*\>\"", "\[Rule]", "\"\<-ast-\>\""}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<#\>\"", "\[Rule]", "\"\<-num-\>\""}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<.\>\"", "\[Rule]", "\"\<-dot-\>\""}]}], "\n", 
        "\t\t\t\t", "}"}]}], "\n", "\t\t\t", "]"}], "<>", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"StringLength", "@", "fe"}], ">", "0"}], ",", " ", 
       RowBox[{"\"\<.\>\"", "<>", "fe"}], ",", " ", "\"\<\>\""}], "]"}]}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"92652adf-abe8-4806-b650-79ef0d721613"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildURL\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"3be9771c-673f-4dc9-8a9f-71057370e87b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildURL", "[", "fname_", "]"}], ":=", "\n", "\t", 
  RowBox[{"URLBuild", "@", 
   RowBox[{"FileNameSplit", "@", "\n", "\t\t", 
    RowBox[{
    "WebSiteBuildSlug", "@", 
     "fname"}]}]}]}]], \
"CodeInput",ExpressionUUID->"20cb2529-b7f5-48c6-b916-6d63ae6166ca"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildContentType\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"ed1f7ef1-2262-40c6-8fa1-5fd87c4c788a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildContentType", "[", 
   RowBox[{"fname_", ",", "dir_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"StringStartsQ", "[", 
     RowBox[{"fname", ",", "dir"}], "]"}], ",", "\n", "\t\t", 
    RowBox[{"Replace", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"FileNameTake", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"FileNameTake", "[", 
              RowBox[{"#", ",", "1"}], "]"}], "\[Equal]", "\"\<content\>\""}],
             ",", "\n", "\t", "\t", "\t\t\t", 
            RowBox[{"FileNameDrop", "[", 
             RowBox[{"#", ",", "1"}], "]"}], ",", "\n", "\t", "\t", "\t\t\t", 
            "#"}], "\n", "\t", "\t", "\t\t\t", "]"}], "&"}], "@", "\n", "\t", 
         "\t\t\t\t", 
         RowBox[{"FileNameDrop", "[", 
          RowBox[{"fname", ",", 
           RowBox[{"FileNameDepth", "@", "dir"}]}], "]"}]}], ",", "\n", "\t", 
        "\t\t\t", "1"}], "\n", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t", 
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"\"\<posts\>\"", "\[Rule]", "\"\<post\>\""}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"\"\<pages\>\"", "\[Rule]", "\"\<page\>\""}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"_", "\[Rule]", "\"\<misc\>\""}]}], "\n", "\t\t\t\t", "}"}]}],
      "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", "\"\<misc\>\""}], "\n", 
   "\t\t", "]"}]}]], "CodeInput",
 CellChangeTimes->{{3.712765294396653*^9, 
  3.712765367653697*^9}},ExpressionUUID->"c9ff9393-2a40-4230-81f9-\
acd80191810e"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteContentDirectoryTemplateMap\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"59d35197-1690-4d57-8e1b-b07bcfb82e0d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteContentDirectoryTemplateMap", "=", "\n", "\t", 
   RowBox[{"<|", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<post\>\"", "\[Rule]", "\"\<article.html\>\""}], ",", "\n", 
     "\t\t", 
     RowBox[{"\"\<page\>\"", "\[Rule]", "\"\<page.html\>\""}], ",", "\n", 
     "\t\t", 
     RowBox[{"\"\<misc\>\"", "\[Rule]", "\"\<base.html\>\""}]}], "\n", "\t\t",
     "|>"}]}], ";"}]], "CodeInput",
 CellChangeTimes->{{3.7127651503568487`*^9, 3.712765186712968*^9}, {
  3.712765385165907*^9, 
  3.712765393548715*^9}},ExpressionUUID->"9d687d3b-3538-4b8d-a4ad-\
a7038b5ce49c"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildGetTemplates\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"2800927d-c59f-4377-9562-c9d105f7676d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildGetTemplates", "[", 
   RowBox[{"content_", ",", "dir_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"Fold", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"Lookup", "[", 
        RowBox[{"#", ",", "#2", ",", 
         RowBox[{"<|", "|>"}]}], "]"}], "&"}], ",", "\n", "\t\t\t", 
      RowBox[{"{", 
       RowBox[{
       "$WebSiteBuildContentStack", ",", "\"\<Attributes\>\"", ",", 
        "\"\<Templates\>\""}], "}"}]}], "\n", "\t\t\t", "]"}], ",", "\n", 
    "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"s_String", ":>", "\n", "\t\t\t\t", 
       RowBox[{"StringTrim", "@", 
        RowBox[{"StringSplit", "[", 
         RowBox[{"s", ",", "\"\<,\>\""}], "]"}]}]}], ",", "\n", "\t", "\t\t", 
      
      RowBox[{
       RowBox[{"Except", "[", 
        RowBox[{"_String", "|", 
         RowBox[{"{", "__String", "}"}]}], "]"}], ":>", "\n", "\t", "\t\t\t", 
       
       RowBox[{"Lookup", "[", 
        RowBox[{
        "$WebSiteContentDirectoryTemplateMap", ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{"WebSiteBuildContentType", "[", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"content", ",", "\n", "\t", "\t\t\t\t\t", "longDir"}], "\n",
           "\t", "\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t\t\t\t", 
         "\"\<base.html\>\""}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t",
      "}"}]}], "\n", "\t\t", "]"}]}]], "CodeInput",
 CellChangeTimes->{{3.712765520609771*^9, 3.712765552606987*^9}, {
   3.712765609241109*^9, 3.712765682993848*^9}, 
   3.723038914385352*^9},ExpressionUUID->"893745e8-c881-4298-841b-\
ad4bdb73cbfa"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildFilePath\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"703786ea-3330-4ba6-9b6b-91f07baff821"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildFilePath", "[", 
   RowBox[{"fname_", ",", " ", "dir_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"StringStartsQ", "[", 
     RowBox[{"fname", ",", " ", "dir"}], "]"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"FileNameTake", "[", 
            RowBox[{"#", ",", "1"}], "]"}], "\[Equal]", "\"\<posts\>\""}], 
          ",", "\n", "\t\t\t", 
          RowBox[{"FileNameDrop", "[", 
           RowBox[{"#", ",", " ", "1"}], "]"}], ",", "\n", "\t\t\t", "#"}], 
         "\n", "\t\t\t", "]"}], "&"}], "@", "\n", "\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"FileNameTake", "[", 
           RowBox[{"#", ",", " ", "1"}], "]"}], "\[Equal]", 
          "\"\<content\>\""}], ",", "\n", "\t", "\t\t\t", 
         RowBox[{"FileNameDrop", "[", 
          RowBox[{"#", ",", " ", "1"}], "]"}], ",", "\n", "\t\t\t\t", "#"}], 
        "\n", "\t", "\t\t\t", "]"}]}], "&"}], "@", "\n", "\t\t\t\t", 
     RowBox[{"FileNameDrop", "[", 
      RowBox[{"fname", ",", " ", 
       RowBox[{"FileNameDepth", "@", "dir"}]}], "]"}]}], ",", "\n", "\t\t", 
    RowBox[{"FileNameTake", "[", "fname", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"3e53d801-e8ab-43d8-aa7f-353b19fb115d"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteBuildSafeExportXMLElements\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"67659dab-bbeb-4330-a5d8-0ddf6bb08815"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteBuildSafeExportXMLElements", "=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", 
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{"\"\<script\>\"", ",", "\n", "\t\t", "\"\<style\>\""}], "\n", 
     "\t\t", "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"94ac49f2-d9c7-482a-a923-5ec95c816850"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteBuildSafeExportXMLMap\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"77bed87f-4993-4f3e-a6b1-0e41c9102881"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteBuildSafeExportXMLMap", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{
     "\"\<\\\"\>\"", "\[Rule]", 
      "\"\<safeXMLExportProtectedCharacterQuot\>\""}], ",", "\n", "\t\t", 
     RowBox[{
     "\"\<<\>\"", "\[Rule]", "\"\<safeXMLExportProtectedCharacterLt\>\""}], 
     ",", "\n", "\t\t", 
     RowBox[{
     "\"\<>\>\"", "\[Rule]", "\"\<safeXMLExportProtectedCharacterGt\>\""}], 
     ",", "\n", "\t\t", 
     RowBox[{
     "\"\<&\>\"", "\[Rule]", "\"\<safeXMLExportProtectedCharacterAmp\>\""}], 
     ",", "\n", "\t\t", 
     RowBox[{
     "\"\<'\>\"", "\[Rule]", 
      "\"\<safeXMLExportProtectedCharacterApos\>\""}]}], "\n", "\t\t", 
    "}"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"e0c15ca9-ebc6-4b46-83e6-fcda32904a65"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildSafeExportXML\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"6a1ffc5c-68d2-4434-8749-3e9976659827"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildSafeExportXML", "[", "xml_", "]"}], ":=", "\n", "\t", 
  RowBox[{"StringReplace", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"ExportString", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"xml", "/.", "\n", "\t", "\t\t\t", 
       RowBox[{
        RowBox[{"el", ":", 
         RowBox[{"XMLElement", "[", 
          RowBox[{"$WebSiteBuildSafeExportXMLElements", ",", " ", "__"}], 
          "]"}]}], ":>", "\n", "\t", "\t\t\t", 
        RowBox[{"(", 
         RowBox[{"el", "/.", 
          RowBox[{"s_String", "\[RuleDelayed]", 
           RowBox[{"StringReplace", "[", 
            RowBox[{"s", ",", " ", "$WebSiteBuildSafeExportXMLMap"}], 
            "]"}]}]}], ")"}]}]}], ",", "\n", "\t", "\t\t", "\"\<XML\>\""}], 
     "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", 
    RowBox[{
    "Reverse", "/@", "\n", "\t\t\t", "$WebSiteBuildSafeExportXMLMap"}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"f536e463-6cb6-494a-8ba8-74bf04878696"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildAttachExtension\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"76a876d0-5b5b-41b0-85d6-efaffd217fcc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildAttachExtension", "[", "s_", "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"!", 
     RowBox[{"MemberQ", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<html\>\"", ",", " ", "\"\<xml\>\""}], "}"}], ",", " ", 
       RowBox[{"ToLowerCase", "@", 
        RowBox[{"FileExtension", "@", "s"}]}]}], "]"}]}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"StringTrim", "[", 
      RowBox[{"s", ",", " ", 
       RowBox[{"\"\<.\>\"", "<>", 
        RowBox[{"FileExtension", "[", "s", "]"}]}]}], "]"}], "<>", 
     "\"\<.html\>\""}], ",", "\n", "\t\t", "s"}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"eaeac893-686f-4861-b0fc-63c6ab42d2d6"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateProcessFonts\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"9f5b8613-accd-4ac4-b8d3-28d71d675c27"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]HTML Reps\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723256236639769*^9, 3.7232562387976093`*^9}, {
  3.723258072701812*^9, 
  3.723258073212553*^9}},ExpressionUUID->"d38fc7bd-6222-4cf7-b5df-\
2cb4d3be983e"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$XMLFontPatchDumbSpecialCharListLong\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"b630b6de-3484-4303-8ac9-f6001766ec7c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"$XMLFontPatchDumbSpecialCharListLong", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
    "\"\<AliasDelimiter\>\"", ",", "\"\<AliasIndicator\>\"", ",", 
     "\"\<Alpha\>\"", ",", "\"\<AltKey\>\"", ",", "\"\<And\>\"", ",", 
     "\"\<AquariusSign\>\"", ",", "\n", "\t", "\t", "\"\<AriesSign\>\"", ",", 
     "\"\<AutoPlaceholder\>\"", ",", "\"\<Backslash\>\"", ",", 
     "\"\<BeamedEighthNote\>\"", ",", "\"\<BeamedSixteenthNote\>\"", ",", 
     "\"\<Beta\>\"", ",", "\n", "\t", "\t", "\"\<BlackBishop\>\"", ",", 
     "\"\<BlackKing\>\"", ",", "\"\<BlackKnight\>\"", ",", 
     "\"\<BlackPawn\>\"", ",", "\"\<BlackQueen\>\"", ",", "\"\<BlackRook\>\"",
      ",", "\n", "\t", "\t", "\"\<CancerSign\>\"", ",", "\"\<Cap\>\"", ",", 
     "\"\<CapitalDifferentialD\>\"", ",", "\"\<CapitalDigamma\>\"", ",", 
     "\"\<CapitalKoppa\>\"", ",", "\"\<CapitalSampi\>\"", ",", "\n", "\t", 
     "\t", "\"\<CapitalStigma\>\"", ",", "\"\<CapricornSign\>\"", ",", 
     "\"\<Cent\>\"", ",", "\"\<CenterDot\>\"", ",", "\"\<CenterEllipsis\>\"", 
     ",", "\"\<Checkmark\>\"", ",", "\n", "\t", "\t", "\"\<Chi\>\"", ",", 
     "\"\<CircleDot\>\"", ",", "\"\<CircleMinus\>\"", ",", 
     "\"\<CirclePlus\>\"", ",", "\"\<CircleTimes\>\"", ",", 
     "\"\<ClockwiseContourIntegral\>\"", ",", "\n", "\t", "\t", 
     "\"\<CommandKey\>\"", ",", "\"\<Conditioned\>\"", ",", 
     "\"\<Conjugate\>\"", ",", "\"\<ConjugateTranspose\>\"", ",", 
     "\"\<ConstantC\>\"", ",", "\"\<Continuation\>\"", ",", "\n", "\t", "\t", 
     "\"\<ContourIntegral\>\"", ",", "\"\<ControlKey\>\"", ",", 
     "\"\<CounterClockwiseContourIntegral\>\"", ",", "\"\<Cross\>\"", ",", 
     "\"\<Cup\>\"", ",", "\"\<CurlyCapitalUpsilon\>\"", ",", "\n", "\t", 
     "\t", "\"\<CurlyEpsilon\>\"", ",", "\"\<CurlyKappa\>\"", ",", 
     "\"\<CurlyPhi\>\"", ",", "\"\<CurlyPi\>\"", ",", "\"\<CurlyRho\>\"", 
     ",", "\"\<CurlyTheta\>\"", ",", "\n", "\t", "\t", "\"\<DeleteKey\>\"", 
     ",", "\"\<DifferenceDelta\>\"", ",", "\"\<DifferentialD\>\"", ",", 
     "\"\<Digamma\>\"", ",", "\"\<DirectedEdge\>\"", ",", 
     "\"\<DiscreteRatio\>\"", ",", "\n", "\t", "\t", "\"\<DiscreteShift\>\"", 
     ",", "\"\<DiscretionaryPageBreakAbove\>\"", ",", 
     "\"\<DiscretionaryPageBreakBelow\>\"", ",", "\"\<Distributed\>\"", ",", 
     "\"\<Divide\>\"", ",", "\"\<DotEqual\>\"", ",", "\n", "\t", "\t", 
     "\"\<DotlessJ\>\"", ",", "\"\<DottedSquare\>\"", ",", 
     "\"\<DoubleDagger\>\"", ",", "\"\<DoubledGamma\>\"", ",", 
     "\"\<DoubledPi\>\"", ",", "\"\<DoubleDownArrow\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubledPi\>\"", ",", "\"\<DoubleLeftArrow\>\"", ",", 
     "\"\<DoubleLeftRightArrow\>\"", ",", "\"\<DoubleLeftTee\>\"", ",", 
     "\"\<DoubleLongLeftArrow\>\"", ",", "\"\<DoubleLongLeftRightArrow\>\"", 
     ",", "\n", "\t", "\t", "\"\<DoubleLongRightArrow\>\"", ",", 
     "\"\<DoubleRightArrow\>\"", ",", "\"\<DoubleStruckA\>\"", ",", 
     "\"\<DoubleStruckB\>\"", ",", "\"\<DoubleStruckC\>\"", ",", 
     "\"\<DoubleStruckA\>\"", ",", "\n", "\t", "\t", "\"\<DoubleStruckB\>\"", 
     ",", "\"\<DoubleStruckC\>\"", ",", "\"\<DoubleStruckCapitalA\>\"", ",", 
     "\"\<DoubleStruckCapitalB\>\"", ",", "\"\<DoubleStruckCapitalC\>\"", 
     ",", "\"\<DoubleStruckCapitalD\>\"", ",", "\n", "\t", "\t", 
     "\"\<DoubleStruckCapitalE\>\"", ",", "\"\<DoubleStruckCapitalF\>\"", 
     ",", "\"\<DoubleStruckCapitalG\>\"", ",", "\"\<DoubleStruckCapitalH\>\"",
      ",", "\"\<DoubleStruckCapitalI\>\"", ",", 
     "\"\<DoubleStruckCapitalJ\>\"", ",", "\n", "\t", "\t", 
     "\"\<DoubleStruckCapitalK\>\"", ",", "\"\<DoubleStruckCapitalL\>\"", 
     ",", "\"\<DoubleStruckCapitalM\>\"", ",", "\"\<DoubleStruckCapitalN\>\"",
      ",", "\"\<DoubleStruckCapitalO\>\"", ",", 
     "\"\<DoubleStruckCapitalP\>\"", ",", "\n", "\t", "\t", 
     "\"\<DoubleStruckCapitalQ\>\"", ",", "\"\<DoubleStruckCapitalR\>\"", 
     ",", "\"\<DoubleStruckCapitalS\>\"", ",", "\"\<DoubleStruckCapitalT\>\"",
      ",", "\"\<DoubleStruckCapitalU\>\"", ",", 
     "\"\<DoubleStruckCapitalV\>\"", ",", "\n", "\t", "\t", 
     "\"\<DoubleStruckCapitalW\>\"", ",", "\"\<DoubleStruckCapitalX\>\"", 
     ",", "\"\<DoubleStruckCapitalY\>\"", ",", "\"\<DoubleStruckCapitalZ\>\"",
      ",", "\"\<DoubleStruckD\>\"", ",", "\"\<DoubleStruckE\>\"", ",", "\n", 
     "\t", "\t", "\"\<DoubleStruckEight\>\"", ",", "\"\<DoubleStruckF\>\"", 
     ",", "\"\<DoubleStruckFive\>\"", ",", "\"\<DoubleStruckFour\>\"", ",", 
     "\"\<DoubleStruckG\>\"", ",", "\"\<DoubleStruckH\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubleStruckI\>\"", ",", "\"\<DoubleStruckJ\>\"", ",", 
     "\"\<DoubleStruckK\>\"", ",", "\"\<DoubleStruckL\>\"", ",", 
     "\"\<DoubleStruckM\>\"", ",", "\"\<DoubleStruckN\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubleStruckNine\>\"", ",", "\"\<DoubleStruckO\>\"", ",", 
     "\"\<DoubleStruckOne\>\"", ",", "\"\<DoubleStruckP\>\"", ",", 
     "\"\<DoubleStruckQ\>\"", ",", "\"\<DoubleStruckR\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubleStruckS\>\"", ",", "\"\<DoubleStruckSeven\>\"", ",", 
     "\"\<DoubleStruckSix\>\"", ",", "\"\<DoubleStruckT\>\"", ",", 
     "\"\<DoubleStruckThree\>\"", ",", "\"\<DoubleStruckTwo\>\"", ",", "\n", 
     "\t", "\t", "\"\<DoubleStruckU\>\"", ",", "\"\<DoubleStruckV\>\"", ",", 
     "\"\<DoubleStruckW\>\"", ",", "\"\<DoubleStruckX\>\"", ",", 
     "\"\<DoubleStruckY\>\"", ",", "\"\<DoubleStruckZ\>\"", ",", "\n", "\t", 
     "\t", "\"\<DoubleStruckZero\>\"", ",", "\"\<DoubleUpArrow\>\"", ",", 
     "\"\<DoubleUpDownArrow\>\"", ",", "\"\<DownArrowBar\>\"", ",", 
     "\"\<DownArrow\>\"", ",", "\"\<DownBreve\>\"", ",", "\n", "\t", "\t", 
     "\"\<DownLeftRightVector\>\"", ",", "\"\<DownLeftTeeVector\>\"", ",", 
     "\"\<DownLeftVector\>\"", ",", "\"\<DownLeftVectorBar\>\"", ",", 
     "\"\<DownPointer\>\"", ",", "\"\<DownRightTeeVector\>\"", ",", "\n", 
     "\t", "\t", "\"\<DownRightVector\>\"", ",", "\"\<DownRightVectorBar\>\"",
      ",", "\"\<DownTeeArrow\>\"", ",", "\"\<Earth\>\"", ",", 
     "\"\<EighthNote\>\"", ",", "\"\<Element\>\"", ",", "\n", "\t", "\t", 
     "\"\<Ellipsis\>\"", ",", "\"\<EmptyRectangle\>\"", ",", 
     "\"\<EmptySet\>\"", ",", "\"\<EnterKey\>\"", ",", "\"\<EntityEnd\>\"", 
     ",", "\"\<EntityStart\>\"", ",", "\n", "\t", "\t", "\"\<Epsilon\>\"", 
     ",", "\"\<Equal\>\"", ",", "\"\<Equilibrium\>\"", ",", 
     "\"\<Equivalent\>\"", ",", "\"\<ErrorIndicator\>\"", ",", 
     "\"\<EscapeKey\>\"", ",", "\n", "\t", "\t", "\"\<Eta\>\"", ",", 
     "\"\<Euro\>\"", ",", "\"\<ExponentialE\>\"", ",", 
     "\"\<FilledSmallCircle\>\"", ",", "\"\<FinalSigma\>\"", ",", 
     "\"\<FirstPage\>\"", ",", "\n", "\t", "\t", "\"\<FormalA\>\"", ",", 
     "\"\<FormalAlpha\>\"", ",", "\"\<FormalB\>\"", ",", "\"\<FormalBeta\>\"",
      ",", "\"\<FormalC\>\"", ",", "\"\<FormalCapitalA\>\"", ",", "\n", "\t", 
     "\t", "\"\<FormalCapitalAlpha\>\"", ",", "\"\<FormalCapitalB\>\"", ",", 
     "\"\<FormalCapitalBeta\>\"", ",", "\"\<FormalCapitalC\>\"", ",", 
     "\"\<FormalCapitalChi\>\"", ",", "\"\<FormalCapitalD\>\"", ",", "\n", 
     "\t", "\t", "\"\<FormalCapitalDelta\>\"", ",", 
     "\"\<FormalCapitalDigamma\>\"", ",", "\"\<FormalCapitalE\>\"", ",", 
     "\"\<FormalCapitalEpsilon\>\"", ",", "\"\<FormalCapitalEta\>\"", ",", 
     "\"\<FormalCapitalF\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalCapitalG\>\"", ",", "\"\<FormalCapitalGamma\>\"", ",", 
     "\"\<FormalCapitalH\>\"", ",", "\"\<FormalCapitalI\>\"", ",", 
     "\"\<FormalCapitalIota\>\"", ",", "\"\<FormalCapitalJ\>\"", ",", "\n", 
     "\t", "\t", "\"\<FormalCapitalK\>\"", ",", "\"\<FormalCapitalKappa\>\"", 
     ",", "\"\<FormalCapitalKoppa\>\"", ",", "\"\<FormalCapitalL\>\"", ",", 
     "\"\<FormalCapitalLambda\>\"", ",", "\"\<FormalCapitalM\>\"", ",", "\n", 
     "\t", "\t", "\"\<FormalCapitalMu\>\"", ",", "\"\<FormalCapitalN\>\"", 
     ",", "\"\<FormalCapitalNu\>\"", ",", "\"\<FormalCapitalO\>\"", ",", 
     "\"\<FormalCapitalOmega\>\"", ",", "\"\<FormalCapitalOmicron\>\"", ",", 
     "\n", "\t", "\t", "\"\<FormalCapitalP\>\"", ",", 
     "\"\<FormalCapitalPhi\>\"", ",", "\"\<FormalCapitalPi\>\"", ",", 
     "\"\<FormalCapitalPsi\>\"", ",", "\"\<FormalCapitalQ\>\"", ",", 
     "\"\<FormalCapitalR\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalCapitalRho\>\"", ",", "\"\<FormalCapitalS\>\"", ",", 
     "\"\<FormalCapitalSampi\>\"", ",", "\"\<FormalCapitalSigma\>\"", ",", 
     "\"\<FormalCapitalStigma\>\"", ",", "\"\<FormalCapitalT\>\"", ",", "\n", 
     "\t", "\t", "\"\<FormalCapitalTau\>\"", ",", 
     "\"\<FormalCapitalTheta\>\"", ",", "\"\<FormalCapitalU\>\"", ",", 
     "\"\<FormalCapitalUpsilon\>\"", ",", "\"\<FormalCapitalV\>\"", ",", 
     "\"\<FormalCapitalW\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalCapitalX\>\"", ",", "\"\<FormalCapitalXi\>\"", ",", 
     "\"\<FormalCapitalY\>\"", ",", "\"\<FormalCapitalZ\>\"", ",", 
     "\"\<FormalCapitalZeta\>\"", ",", "\"\<FormalChi\>\"", ",", "\n", "\t", 
     "\t", "\"\<FormalCurlyCapitalUpsilon\>\"", ",", 
     "\"\<FormalCurlyEpsilon\>\"", ",", "\"\<FormalCurlyKappa\>\"", ",", 
     "\"\<FormalCurlyPhi\>\"", ",", "\"\<FormalCurlyPi\>\"", ",", 
     "\"\<FormalCurlyRho\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalCurlyTheta\>\"", ",", "\"\<FormalD\>\"", ",", 
     "\"\<FormalDelta\>\"", ",", "\"\<FormalDigamma\>\"", ",", 
     "\"\<FormalE\>\"", ",", "\"\<FormalEpsilon\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalEta\>\"", ",", "\"\<FormalF\>\"", ",", 
     "\"\<FormalFinalSigma\>\"", ",", "\"\<FormalG\>\"", ",", 
     "\"\<FormalGamma\>\"", ",", "\"\<FormalH\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalI\>\"", ",", "\"\<FormalIota\>\"", ",", "\"\<FormalJ\>\"", 
     ",", "\"\<FormalK\>\"", ",", "\"\<FormalKappa\>\"", ",", 
     "\"\<FormalKoppa\>\"", ",", "\n", "\t", "\t", "\"\<FormalL\>\"", ",", 
     "\"\<FormalLambda\>\"", ",", "\"\<FormalM\>\"", ",", "\"\<FormalMu\>\"", 
     ",", "\"\<FormalN\>\"", ",", "\"\<FormalNu\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalO\>\"", ",", "\"\<FormalOmega\>\"", ",", 
     "\"\<FormalOmicron\>\"", ",", "\"\<FormalP\>\"", ",", 
     "\"\<FormalPhi\>\"", ",", "\"\<FormalPi\>\"", ",", "\n", "\t", "\t", 
     "\"\<FormalPsi\>\"", ",", "\"\<FormalQ\>\"", ",", "\"\<FormalR\>\"", 
     ",", "\"\<FormalRho\>\"", ",", "\"\<FormalS\>\"", ",", 
     "\"\<FormalSampi\>\"", ",", "\n", "\t", "\t", "\"\<FormalSigma\>\"", 
     ",", "\"\<FormalStigma\>\"", ",", "\"\<FormalT\>\"", ",", 
     "\"\<FormalTau\>\"", ",", "\"\<FormalTheta\>\"", ",", "\"\<FormalU\>\"", 
     ",", "\n", "\t", "\t", "\"\<FormalUpsilon\>\"", ",", "\"\<FormalV\>\"", 
     ",", "\"\<FormalW\>\"", ",", "\"\<FormalX\>\"", ",", "\"\<FormalXi\>\"", 
     ",", "\"\<FormalY\>\"", ",", "\n", "\t", "\t", "\"\<FormalZ\>\"", ",", 
     "\"\<FormalZeta\>\"", ",", "\"\<FreakedSmiley\>\"", ",", 
     "\"\<Function\>\"", ",", "\"\<GeminiSign\>\"", ",", "\"\<GothicA\>\"", 
     ",", "\n", "\t", "\t", "\"\<GothicB\>\"", ",", "\"\<GothicC\>\"", ",", 
     "\"\<GothicCapitalA\>\"", ",", "\"\<GothicCapitalB\>\"", ",", 
     "\"\<GothicCapitalC\>\"", ",", "\"\<GothicCapitalD\>\"", ",", "\n", "\t",
      "\t", "\"\<GothicCapitalE\>\"", ",", "\"\<GothicCapitalF\>\"", ",", 
     "\"\<GothicCapitalG\>\"", ",", "\"\<GothicCapitalH\>\"", ",", 
     "\"\<GothicCapitalI\>\"", ",", "\"\<GothicCapitalJ\>\"", ",", "\n", "\t",
      "\t", "\"\<GothicCapitalK\>\"", ",", "\"\<GothicCapitalL\>\"", ",", 
     "\"\<GothicCapitalM\>\"", ",", "\"\<GothicCapitalN\>\"", ",", 
     "\"\<GothicCapitalO\>\"", ",", "\"\<GothicCapitalP\>\"", ",", "\n", "\t",
      "\t", "\"\<GothicCapitalQ\>\"", ",", "\"\<GothicCapitalR\>\"", ",", 
     "\"\<GothicCapitalS\>\"", ",", "\"\<GothicCapitalT\>\"", ",", 
     "\"\<GothicCapitalU\>\"", ",", "\"\<GothicCapitalV\>\"", ",", "\n", "\t",
      "\t", "\"\<GothicCapitalW\>\"", ",", "\"\<GothicCapitalX\>\"", ",", 
     "\"\<GothicCapitalY\>\"", ",", "\"\<GothicCapitalZ\>\"", ",", 
     "\"\<GothicD\>\"", ",", "\"\<GothicE\>\"", ",", "\n", "\t", "\t", 
     "\"\<GothicEight\>\"", ",", "\"\<GothicF\>\"", ",", "\"\<GothicFive\>\"",
      ",", "\"\<GothicFour\>\"", ",", "\"\<GothicG\>\"", ",", 
     "\"\<GothicH\>\"", ",", "\n", "\t", "\t", "\"\<GothicI\>\"", ",", 
     "\"\<GothicJ\>\"", ",", "\"\<GothicK\>\"", ",", "\"\<GothicL\>\"", ",", 
     "\"\<GothicM\>\"", ",", "\"\<GothicN\>\"", ",", "\n", "\t", "\t", 
     "\"\<GothicNine\>\"", ",", "\"\<GothicO\>\"", ",", "\"\<GothicOne\>\"", 
     ",", "\"\<GothicP\>\"", ",", "\"\<GothicQ\>\"", ",", "\"\<GothicR\>\"", 
     ",", "\n", "\t", "\t", "\"\<GothicS\>\"", ",", "\"\<GothicSeven\>\"", 
     ",", "\"\<GothicSix\>\"", ",", "\"\<GothicT\>\"", ",", 
     "\"\<GothicThree\>\"", ",", "\"\<GothicTwo\>\"", ",", "\n", "\t", "\t", 
     "\"\<GothicU\>\"", ",", "\"\<GothicV\>\"", ",", "\"\<GothicW\>\"", ",", 
     "\"\<GothicX\>\"", ",", "\"\<GothicY\>\"", ",", "\"\<GothicZ\>\"", ",", 
     "\n", "\t", "\t", "\"\<GothicZero\>\"", ",", "\"\<GrayCircle\>\"", ",", 
     "\"\<GraySquare\>\"", ",", "\"\<Hacek\>\"", ",", 
     "\"\<HermitianConjugate\>\"", ",", "\"\<ImaginaryI\>\"", ",", "\n", "\t",
      "\t", "\"\<ImaginaryJ\>\"", ",", "\"\<Implies\>\"", ",", 
     "\"\<IndentingNewLine\>\"", ",", "\"\<Iota\>\"", ",", "\"\<Kappa\>\"", 
     ",", "\"\<KernelIcon\>\"", ",", "\n", "\t", "\t", "\"\<Koppa\>\"", ",", 
     "\"\<Lambda\>\"", ",", "\"\<LastPage\>\"", ",", "\"\<LeftArrow\>\"", 
     ",", "\"\<LeftArrowRightArrow\>\"", ",", "\"\<LeftAssociation\>\"", ",", 
     "\n", "\t", "\t", "\"\<LeftBracketingBar\>\"", ",", 
     "\"\<LeftDoubleBracket\>\"", ",", "\"\<LeftDoubleBracketingBar\>\"", 
     ",", "\"\<LeftDownTeeVector\>\"", ",", "\"\<LeftDownVectorBar\>\"", ",", 
     "\"\<LeftModified\>\"", ",", "\n", "\t", "\t", "\"\<LeftRightArrow\>\"", 
     ",", "\"\<LeftRightVector\>\"", ",", "\"\<LeftSkeleton\>\"", ",", 
     "\"\<LeftTeeArrow\>\"", ",", "\"\<LeftTeeVector\>\"", ",", 
     "\"\<LeftTriangleBar\>\"", ",", "\n", "\t", "\t", 
     "\"\<LeftTriangleEqual\>\"", ",", "\"\<LeftUpDownVector\>\"", ",", 
     "\"\<LeftUpTeeVector\>\"", ",", "\"\<LeftUpVectorBar\>\"", ",", 
     "\"\<LeftVector\>\"", ",", "\"\<LeftVectorBar\>\"", ",", "\n", "\t", 
     "\t", "\"\<LeoSign\>\"", ",", "\"\<LightBulb\>\"", ",", "\"\<Limit\>\"", 
     ",", "\"\<LineSeparator\>\"", ",", "\"\<LibraSign\>\"", ",", 
     "\"\<LongDash\>\"", ",", "\n", "\t", "\t", "\"\<LongEqual\>\"", ",", 
     "\"\<LongLeftArrow\>\"", ",", "\"\<LongLeftRightArrow\>\"", ",", 
     "\"\<LongRightArrow\>\"", ",", "\"\<LowerLeftArrow\>\"", ",", 
     "\"\<LowerRightArrow\>\"", ",", "\n", "\t", "\t", "\"\<Mars\>\"", ",", 
     "\"\<MathematicaIcon\>\"", ",", "\"\<MaxLimit\>\"", ",", 
     "\"\<MinLimit\>\"", ",", "\"\<Mu\>\"", ",", "\"\<Natural\>\"", ",", "\n",
      "\t", "\t", "\"\<Neptune\>\"", ",", "\"\<NestedGreaterGreater\>\"", 
     ",", "\"\<NestedLessLess\>\"", ",", "\"\<NeutralSmiley\>\"", ",", 
     "\"\<NotElement\>\"", ",", "\n", "\t", "\t", "\"\<NotEqual\>\"", ",", 
     "\"\<NotEqualTilde\>\"", ",", "\"\<NotGreaterGreater\>\"", ",", 
     "\"\<NotGreaterSlantEqual\>\"", ",", "\"\<NotHumpDownHump\>\"", ",", 
     "\"\<NotHumpEqual\>\"", ",", "\n", "\t", "\t", 
     "\"\<NotLeftTriangleBar\>\"", ",", "\"\<NotLessEqual\>\"", ",", 
     "\"\<NotLessLess\>\"", ",", "\"\<NotLessSlantEqual\>\"", ",", 
     "\"\<NotNestedGreaterGreater\>\"", ",", "\"\<NotNestedLessLess\>\"", ",",
      "\n", "\t", "\t", "\"\<NotPrecedesEqual\>\"", ",", 
     "\"\<NotPrecedesTilde\>\"", ",", "\"\<NotRightTriangleBar\>\"", ",", 
     "\"\<NotSquareSubset\>\"", ",", "\"\<NotSquareSuperset\>\"", ",", 
     "\"\<NotSucceedsEqual\>\"", ",", "\n", "\t", "\t", 
     "\"\<NotSucceedsTilde\>\"", ",", "\"\<NotVerticalBar\>\"", ",", 
     "\"\<NumberSign\>\"", ",", "\"\<Omega\>\"", ",", "\"\<Omicron\>\"", ",", 
     "\"\<OptionKey\>\"", ",", "\n", "\t", "\t", "\"\<OverBracket\>\"", ",", 
     "\"\<ParagraphSeparator\>\"", ",", "\"\<PermutationProduct\>\"", ",", 
     "\"\<Phi\>\"", ",", "\"\<Pi\>\"", ",", "\"\<Piecewise\>\"", ",", "\n", 
     "\t", "\t", "\"\<PiscesSign\>\"", ",", "\"\<Placeholder\>\"", ",", 
     "\"\<Proportional\>\"", ",", "\"\<Psi\>\"", ",", "\n", "\t\t", 
     "\"\<ReturnKey\>\"", ",", "\"\<ReverseElement\>\"", ",", 
     "\"\<ReverseEquilibrium\>\"", ",", "\"\<ReverseUpEquilibrium\>\"", ",", 
     "\"\<Rho\>\"", ",", "\"\<RightAngle\>\"", ",", "\n", "\t", "\t", 
     "\"\<RightArrow\>\"", ",", "\"\<RightArrowBar\>\"", ",", 
     "\"\<RightArrowLeftArrow\>\"", ",", "\"\<RightAssociation\>\"", ",", 
     "\"\<RightBracketingBar\>\"", ",", "\"\<RightCeiling\>\"", ",", "\n", 
     "\t", "\t", "\"\<RightDoubleBracket\>\"", ",", 
     "\"\<RightDoubleBracketingBar\>\"", ",", "\"\<RightDownTeeVector\>\"", 
     ",", "\"\<RightDownVector\>\"", ",", "\"\<RightDownVectorBar\>\"", ",", 
     "\"\<RightModified\>\"", ",", "\n", "\t", "\t", "\"\<RightSkeleton\>\"", 
     ",", "\"\<RightTeeArrow\>\"", ",", "\"\<RightTeeVector\>\"", ",", 
     "\"\<RightTriangleBar\>\"", ",", "\"\<RightUpDownVector\>\"", ",", 
     "\"\<RightUpTeeVector\>\"", ",", "\n", "\t", "\t", 
     "\"\<RightUpVector\>\"", ",", "\"\<RightUpVectorBar\>\"", ",", 
     "\"\<RightVector\>\"", ",", "\"\<RightVectorBar\>\"", ",", 
     "\"\<RoundImplies\>\"", ",", "\"\<RoundSpaceIndicator\>\"", ",", "\n", 
     "\t", "\t", "\"\<Rule\>\"", ",", "\"\<RuleDelayed\>\"", ",", 
     "\"\<SagittariusSign\>\"", ",", "\"\<Sampi\>\"", ",", 
     "\"\<ScorpioSign\>\"", ",", "\"\<ScriptA\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptB\>\"", ",", "\"\<ScriptC\>\"", ",", "\"\<ScriptCapitalA\>\"",
      ",", "\"\<ScriptCapitalB\>\"", ",", "\"\<ScriptCapitalC\>\"", ",", 
     "\"\<ScriptCapitalD\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptCapitalE\>\"", ",", "\"\<ScriptCapitalF\>\"", ",", 
     "\"\<ScriptCapitalG\>\"", ",", "\"\<ScriptCapitalH\>\"", ",", 
     "\"\<ScriptCapitalI\>\"", ",", "\"\<ScriptCapitalJ\>\"", ",", "\n", "\t",
      "\t", "\"\<ScriptCapitalK\>\"", ",", "\"\<ScriptCapitalL\>\"", ",", 
     "\"\<ScriptCapitalM\>\"", ",", "\"\<ScriptCapitalN\>\"", ",", 
     "\"\<ScriptCapitalO\>\"", ",", "\"\<ScriptCapitalP\>\"", ",", "\n", "\t",
      "\t", "\"\<ScriptCapitalQ\>\"", ",", "\"\<ScriptCapitalR\>\"", ",", 
     "\"\<ScriptCapitalS\>\"", ",", "\"\<ScriptCapitalT\>\"", ",", 
     "\"\<ScriptCapitalU\>\"", ",", "\"\<ScriptCapitalV\>\"", ",", "\n", "\t",
      "\t", "\"\<ScriptCapitalW\>\"", ",", "\"\<ScriptCapitalX\>\"", ",", 
     "\"\<ScriptCapitalY\>\"", ",", "\"\<ScriptCapitalZ\>\"", ",", 
     "\"\<ScriptD\>\"", ",", "\"\<ScriptDotlessI\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptDotlessJ\>\"", ",", "\"\<ScriptE\>\"", ",", 
     "\"\<ScriptEight\>\"", ",", "\"\<ScriptF\>\"", ",", "\"\<ScriptFive\>\"",
      ",", "\"\<ScriptFour\>\"", ",", "\n", "\t", "\t", "\"\<ScriptG\>\"", 
     ",", "\"\<ScriptH\>\"", ",", "\"\<ScriptI\>\"", ",", "\"\<ScriptJ\>\"", 
     ",", "\"\<ScriptK\>\"", ",", "\"\<ScriptL\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptM\>\"", ",", "\"\<ScriptN\>\"", ",", "\"\<ScriptNine\>\"", 
     ",", "\"\<ScriptO\>\"", ",", "\"\<ScriptOne\>\"", ",", "\"\<ScriptP\>\"",
      ",", "\n", "\t", "\t", "\"\<ScriptQ\>\"", ",", "\"\<ScriptR\>\"", ",", 
     "\"\<ScriptS\>\"", ",", "\"\<ScriptSeven\>\"", ",", "\"\<ScriptSix\>\"", 
     ",", "\"\<ScriptT\>\"", ",", "\n", "\t", "\t", "\"\<ScriptThree\>\"", 
     ",", "\"\<ScriptTwo\>\"", ",", "\"\<ScriptU\>\"", ",", "\"\<ScriptV\>\"",
      ",", "\"\<ScriptW\>\"", ",", "\"\<ScriptX\>\"", ",", "\n", "\t", "\t", 
     "\"\<ScriptY\>\"", ",", "\"\<ScriptZ\>\"", ",", "\"\<ScriptZero\>\"", 
     ",", "\"\<SelectionPlaceholder\>\"", ",", "\"\<ShortLeftArrow\>\"", ",", 
     "\"\<ShortRightArrow\>\"", ",", "\n", "\t", "\t", "\"\<Sigma\>\"", ",", 
     "\"\<SpaceKey\>\"", ",", "\"\<SpanFromAbove\>\"", ",", 
     "\"\<SpanFromBoth\>\"", ",", "\"\<SpanFromLeft\>\"", ",", 
     "\"\<SphericalAngle\>\"", ",", "\n", "\t", "\t", "\"\<Sqrt\>\"", ",", 
     "\"\<Square\>\"", ",", "\"\<Sterling\>\"", ",", "\"\<Stigma\>\"", ",", 
     "\"\<SuchThat\>\"", ",", "\"\<Sum\>\"", ",", "\n", "\t", "\t", 
     "\"\<SystemEnterKey\>\"", ",", "\"\<SystemsModelDelay\>\"", ",", 
     "\"\<SZ\>\"", ",", "\"\<TabKey\>\"", ",", "\"\<Tau\>\"", ",", 
     "\"\<TaurusSign\>\"", ",", "\n", "\t", "\t", "\"\<TensorProduct\>\"", 
     ",", "\"\<TensorWedge\>\"", ",", "\"\<Theta\>\"", ",", "\"\<Thorn\>\"", 
     ",", "\"\<Transpose\>\"", ",", "\"\<TripleDot\>\"", ",", "\n", "\t", 
     "\t", "\"\<TwoWayRule\>\"", ",", "\"\<UnderBracket\>\"", ",", 
     "\"\<UndirectedEdge\>\"", ",", "\"\<UnionPlus\>\"", ",", 
     "\"\<UpArrowBar\>\"", ",", "\"\<UpArrowDownArrow\>\"", ",", "\n", "\t", 
     "\t", "\"\<UpEquilibrium\>\"", ",", "\"\<UpperLeftArrow\>\"", ",", 
     "\"\<UpperRightArrow\>\"", ",", "\"\<UpPointer\>\"", ",", 
     "\"\<Upsilon\>\"", ",", "\"\<UpTeeArrow\>\"", ",", "\n", "\t", "\t", 
     "\"\<Uranus\>\"", ",", "\"\<VerticalBar\>\"", ",", 
     "\"\<VerticalSeparator\>\"", ",", "\"\<VirgoSign\>\"", ",", 
     "\"\<WarningSign\>\"", ",", "\"\<WatchIcon\>\"", ",", "\n", "\t", "\t", 
     "\"\<WhiteBishop\>\"", ",", "\"\<WhiteKing\>\"", ",", 
     "\"\<WhiteKnight\>\"", ",", "\"\<WhitePawn\>\"", ",", 
     "\"\<WhiteQueen\>\"", ",", "\"\<WhiteRook\>\"", ",", "\n", "\t", "\t", 
     "\"\<Wolf\>\"", ",", "\"\<WolframLanguageLogo\>\"", ",", 
     "\"\<WolframLanguageLogoCircle\>\"", ",", "\"\<Xi\>\"", ",", 
     "\"\<Xnor\>\"", ",", "\"\<Yen\>\"", ",", "\n", "\t", "\t", 
     "\"\<Zeta\>\""}], "\n", "\t", "\t", "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"$XMLFontPatchDumbSpecialCharListConv", "=", "\n", "\t", 
   RowBox[{"ToExpression", "@", "\n", "\t\t", 
    RowBox[{"Map", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"\"\<\\\"\\\\[\>\"", "<>", "#", "<>", "\"\<]\\\"\>\""}], "&"}],
       ",", "\n", "\t\t\t", "$XMLFontPatchDumbSpecialCharListLong"}], "\n", 
     "\t\t\t", "]"}]}]}], ";"}]}], "CodeInput",
 CellChangeTimes->{{3.7232581633696337`*^9, 3.723258299326816*^9}, 
   3.7232584782700663`*^9, {3.723258525790472*^9, 3.723258538640119*^9}, {
   3.7232595701116743`*^9, 3.723259654447546*^9}, 3.7232597699983387`*^9, {
   3.7232599091135406`*^9, 3.723259922319975*^9}, {3.723260041404097*^9, 
   3.7232600812411833`*^9}, {3.723261298034605*^9, 3.7232613049516993`*^9}, {
   3.7232613507512417`*^9, 3.7232613514632874`*^9}, {3.723261592615275*^9, 
   3.723261600664452*^9}, {3.723489481175343*^9, 
   3.723489484439087*^9}},ExpressionUUID->"56c8a397-fd90-42ee-9b2c-\
21f1db535299"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$XMLFontPatchKeyboardElements\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"a3b546c1-d5c6-4141-bf26-370f051711bb"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$XMLKBDPatchStyles", "=", "\n", "\t", 
   RowBox[{"{", 
    RowBox[{
    "\"\<style\>\"", "\[Rule]", 
     "\"\<color: gray; font-size: 10px; border: solid 1px gray;\>\""}], 
    "}"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"6dec77a8-94a7-4ab5-a973-c6bc7d06e155"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"xmlFontPatchKBDEl", "[", "k_", "]"}], ":=", "\n", "\t", 
   RowBox[{"XMLElement", "[", 
    RowBox[{"\"\<span\>\"", ",", "\n", "\t\t", 
     RowBox[{"Flatten", "@", 
      RowBox[{"{", 
       RowBox[{"$XMLKBDPatchStyles", ",", " ", "$XMLFontPatchFlag"}], "}"}]}],
      ",", "\n", "\t\t", 
     RowBox[{"{", 
      RowBox[{"XMLElement", "[", 
       RowBox[{"\"\<kbd\>\"", ",", 
        RowBox[{"{", "$XMLFontPatchFlag", "}"}], ",", 
        RowBox[{"{", "k", "}"}]}], "]"}], "}"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"14a37b77-bdb8-43a5-b09f-e4f72c02ad7d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$XMLFontPatchKeyboardElements", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"\"\<\\\\[AltKey]\>\"", "|", "\"\<\[AltKey]\>\""}], "\[Rule]", 
      "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<ALT\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[CommandKey]\>\"", "|", "\"\<\[CommandKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "[", "\"\<CMD\>\"", "]"}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[ControlKey]\>\"", "|", "\"\<\[ControlKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<CTRL\>\""}]}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[DeleteKey]\>\"", "|", "\"\<\[DeleteKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<DEL\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[EnterKey]\>\"", "|", "\"\<\[EnterKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<ENTER\>\""}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[EscapeKey]\>\"", "|", "\"\<\[EscapeKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<ESC\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[OptionKey]\>\"", "|", "\"\<\[OptionKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<OPTION\>\""}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[ReturnKey]\>\"", "|", "\"\<\[ReturnKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<RET\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[ShiftKey]\>\"", "|", "\"\<\[ShiftKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<SHIFT\>\""}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"\"\<\\\\[SpaceKey]\>\"", "|", "\"\<\[SpaceKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<SPACE\>\""}]}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{
      "\"\<\\\\[SystemEnterKey]\>\"", "|", "\"\<\[SystemEnterKey]\>\""}], 
      "\[Rule]", "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<RET\>\""}]}], ",", "\n", "\t\t", 
     
     RowBox[{
      RowBox[{"\"\<\\\\[TabKey]\>\"", "|", "\"\<\[TabKey]\>\""}], "\[Rule]", 
      "\n", "\t\t\t", 
      RowBox[{"xmlFontPatchKBDEl", "@", "\"\<TAB\>\""}]}]}], "\n", "\t\t", 
    "}"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"6fbfea6c-ad9d-487f-b12c-2f37b8ac9d20"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$XMLFontPatchManualUnicodeReassignments\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"fdf2b25d-14ce-4375-bdb5-f36eec95a23d"],

Cell[BoxData[
 RowBox[{"\n", 
  RowBox[{
   RowBox[{"$XMLFontPatchManualUnicodeReassignments", "=", "\n", "\t", 
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"\"\<\\\\[KeyBar]\>\"", "|", "\"\<\[KeyBar]\>\""}], "\[Rule]", 
       "\n", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"$XMLFontPatchFlag", ",", " ", 
            RowBox[{
            "\"\<style\>\"", "\[Rule]", 
             "\"\<font-weight: bold; font-size: 8px;\>\""}]}], "}"}]}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"{", "\"\<\:2011\>\"", "}"}]}], "\n", "\t\t\t\t", "]"}]}], 
      ",", "\n", "\t\t", 
      RowBox[{
       RowBox[{"\"\<\\\\[RightPointer]\>\"", "|", "\"\<\[RightPointer]\>\""}],
        "\[Rule]", "\n", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"$XMLFontPatchFlag", ",", " ", 
            RowBox[{
            "\"\<style\>\"", "\[Rule]", 
             "\"\<font-weight: bold; font-size: 8px;\>\""}]}], "}"}]}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"{", "\"\<\[FilledRightTriangle]\>\"", "}"}]}], "\n", 
        "\t\t\t\t", "]"}]}], ",", "\n", "\t\t", 
      RowBox[{
       RowBox[{"\"\<\\\\[LeftPointer]\>\"", "|", "\"\<\[LeftPointer]\>\""}], 
       "\[Rule]", "\n", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", " ", "\n", "\t\t\t\t", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{"$XMLFontPatchFlag", ",", " ", 
            RowBox[{
            "\"\<style\>\"", "\[Rule]", 
             "\"\<font-weight: bold; font-size: 8px;\>\""}]}], "}"}]}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"{", "\"\<\[FilledLeftTriangle]\>\"", "}"}]}], "\n", 
        "\t\t\t\t", "]"}]}]}], "\n", "\t\t", "}"}]}], 
   ";"}]}]], \
"CodeInput",ExpressionUUID->"d04f0a2d-5314-4d9b-8815-9c35ca797795"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$XMLFontPatchStringToXMLElementRules\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"a62533b2-c4a2-4ebe-83a7-a5fc7f108afe"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$XMLFontPatchFlag", "=", "\n", "\t", 
   RowBox[{"\"\<-fake-attr-fonts-patched\>\"", "\[Rule]", "\"\<true\>\""}]}], 
  ";"}]], "CodeInput",
 CellChangeTimes->{{3.723489972755496*^9, 
  3.72348998372502*^9}},ExpressionUUID->"ca14a7b1-873c-4dee-8b22-\
e3f84d520799"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"$XMLFontPatchDumbSpecialCharListLong", "=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", "$XMLFontPatchDumbSpecialCharListLong"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"$XMLFontPatchDumbSpecialCharListConv", "=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", "$XMLFontPatchDumbSpecialCharListConv"}]}], 
  ";"}]}], "CodeInput",
 CellChangeTimes->{{3.723258358010404*^9, 3.7232583671918163`*^9}, {
  3.723489459974172*^9, 
  3.723489486262783*^9}},ExpressionUUID->"b01f5d0a-0cc8-481b-b033-\
1be93d25c25e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$XMLFontPatchStringToXMLElementRules", "=", "\n", "\t", 
   RowBox[{"Flatten", "@", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
     "$XMLFontPatchKeyboardElements", ",", "\n", "\t\t\t", 
      "$XMLFontPatchManualUnicodeReassignments", ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"\"\<\\\\[\>\"", "~~", 
        RowBox[{"s", ":", 
         RowBox[{"(", "$XMLFontPatchDumbSpecialCharListLong", ")"}]}], "~~", 
        "\"\<]\>\""}], ":>", "\n", "\t", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"\"\<class\>\"", "\[Rule]", 
            RowBox[{"\"\<special-character \>\"", "<>", "s"}]}], ",", "\n", 
           "\t", "\t\t\t\t\t", "$XMLFontPatchFlag"}], "\n", "\t", 
          "\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"ToExpression", "[", 
           RowBox[{"\"\<\\\"\\\\[\>\"", "<>", "s", "<>", "\"\<]\\\"\>\""}], 
           "]"}], "\n", "\t", "\t\t\t\t\t", "}"}]}], "\n", "\t", "\t\t\t\t", 
        "]"}]}], ",", "\n", "\t", "\t\t", 
      RowBox[{
       RowBox[{"char", ":", "$XMLFontPatchDumbSpecialCharListConv"}], ":>", 
       "\n", "\t", "\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<span\>\"", ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"\"\<class\>\"", "\[Rule]", 
            RowBox[{"\"\<special-character \>\"", "<>", 
             RowBox[{"CharacterName", "[", "char", "]"}]}]}], ",", " ", "\n", 
           "\t", "\t\t\t\t\t", "$XMLFontPatchFlag"}], "\n", "\t", 
          "\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t\t\t\t", 
         RowBox[{
         "{", "\n", "\t", "\t\t\t\t\t", "char", "\n", "\t", "\t\t\t\t\t", 
          "}"}]}], "\n", "\t", "\t\t\t\t", "]"}]}]}], "\n", "\t", "\t\t", 
     "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"2e8223e9-d238-4cca-be11-16ea5318b85b"]
}, Closed]]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplatePreProcess\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712633214138015*^9, 3.712633223527268*^9}, 
   3.71268299564373*^9},ExpressionUUID->"f22cbd1b-e8f9-44d3-a1fc-\
ceecd873b04d"],

Cell[BoxData[
 RowBox[{"$WebSiteTemplateAttachIDElements", "=", "\n", "\t", 
  RowBox[{"{", "\n", "\t\t", 
   RowBox[{
   "\"\<pre\>\"", ",", " ", "\"\<h1\>\"", ",", " ", "\"\<h2\>\"", ",", " ", 
    "\n", "\t\t", "\"\<img\>\"", ",", " ", "\"\<p\>\""}], "\n", "\t\t", 
   "}"}]}]], \
"CodeInput",ExpressionUUID->"a8987c20-f4ba-4870-97da-c9add12e7fc8"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessAttachIDs\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"df64dba7-1f57-414b-8f9f-cb62df994c1b"],

Cell[BoxData[
 RowBox[{"$WebSiteTemplateAttachIDElements", "=", "\n", "\t", 
  RowBox[{"{", 
   RowBox[{
   "\"\<pre\>\"", ",", " ", "\"\<p\>\"", ",", " ", "\"\<blockquote\>\"", ",", 
    " ", "\"\<img\>\"", ",", " ", "\"\<h1\>\"", ",", " ", "\"\<h2\>\"", ",", 
    " ", "\"\<h3\>\""}], 
   "}"}]}]], \
"CodeInput",ExpressionUUID->"085f7201-a5db-476b-8f23-33a4aad46096"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessAttachIDs", "[", "xml_", "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"$$id", "=", "1"}], "}"}], ",", "\n", "\t\t", 
    RowBox[{"ReplaceRepeated", "[", "\n", "\t\t\t", 
     RowBox[{"xml", ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"XMLElement", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"el", ":", 
          RowBox[{
          "Alternatives", "@@", "$WebSiteTemplateAttachIDElements"}]}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"c_", "?", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{"#", ",", "\"\<id\>\"", ",", "None"}], "]"}], "===", 
             "None"}], "&"}], ")"}]}], ",", "\n", "\t\t\t\t", "e_"}], "\n", 
        "\t\t\t\t", "]"}], ":>", "\n", "\t\t\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"el", ",", " ", 
         RowBox[{"Append", "[", 
          RowBox[{"c", ",", " ", 
           RowBox[{"\"\<id\>\"", "\[Rule]", 
            RowBox[{"el", "<>", 
             RowBox[{"ToString", "[", 
              RowBox[{"$$id", "++"}], "]"}]}]}]}], "]"}], ",", " ", "e"}], 
        "]"}]}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"512ace1f-907b-479f-a5a4-021793a1f476"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessPrettyPrint\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"93ea5c5e-9d50-455e-bd71-f9de64d2b5d4"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"webSiteTemplatePreProcessCodeHighlighting", "[", 
    RowBox[{"tag_", ",", " ", "lang_"}], "]"}], "[", "xml_", "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"nullang", "=", "\n", "\t\t\t\t", 
       RowBox[{"Switch", "[", 
        RowBox[{
        "tag", ",", " ", "\n", "\t\t\t\t\t", "\"\<prettyprint\>\"", ",", " ", 
         "\"\<lang-none\>\"", ",", " ", "\n", "\t\t\t\t\t", 
         "\"\<highlight\>\"", ",", " ", "\"\<highlight-source-none\>\"", ",", 
         "\n", "\t\t\t\t\t", "_", ",", " ", "\"\<language-none\>\""}], "\n", 
        "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
      RowBox[{"langTag", "=", "\n", "\t\t\t\t", 
       RowBox[{"Switch", "[", 
        RowBox[{
        "tag", ",", " ", "\n", "\t\t\t\t\t", "\"\<prettyprint\>\"", ",", " ", 
         "\"\<lang-\>\"", ",", " ", "\n", "\t\t\t\t\t", "\"\<highlight\>\"", 
         ",", " ", "\"\<highlight-source-\>\"", ",", "\n", "\t\t\t\t\t", "_", 
         ",", " ", "\"\<language-\>\""}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n",
      "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{"ReplaceRepeated", "[", "\n", "\t\t\t", 
     RowBox[{"xml", ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t", 
         RowBox[{"c_", "?", 
          RowBox[{"(", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"StringFreeQ", "[", 
              RowBox[{
               RowBox[{"Lookup", "[", 
                RowBox[{"#", ",", "\"\<class\>\"", ",", "\"\<\>\""}], "]"}], 
               ",", " ", 
               RowBox[{"tag", "|", "nullang"}]}], "]"}], ")"}], "\n", 
            "\t\t\t\t\t\t", "&"}], ")"}]}], ",", "\n", "\t\t\t\t", "e_"}], 
        "\n", "\t\t\t\t", "]"}], ":>", "\n", "\t\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t", 
          RowBox[{"ReplacePart", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Association", "@", "c"}], ",", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{"StringTrim", "@", "\n", "\t\t\t\t\t\t\t\t\t", 
              RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
               RowBox[{
               "\"\<`base` `tag` `lang`\>\"", ",", "\n", 
                "\t\t\t\t\t\t\t\t\t\t", 
                RowBox[{"<|", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"\"\<base\>\"", "->", 
                   RowBox[{"Lookup", "[", 
                    RowBox[{
                    "c", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                    "]"}]}], ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"\"\<tag\>\"", "\[Rule]", "tag"}], ",", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                  "\"\<lang\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"StringQ", "@", "lang"}], "&&", 
                    RowBox[{"StringFreeQ", "[", 
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    "c", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                    "]"}], ",", " ", "langTag"}], "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"langTag", "<>", "lang"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "\"\<\>\""}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t\t", "|>"}]}], "\n", 
               "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}]}], "\n", "\t\t\t\t\t\t\t", 
           "]"}]}], ",", "\n", "\t\t\t\t\t", "e"}], "\n", "\t\t\t\t\t", 
        "]"}]}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"38f95470-1e3e-4f70-8486-5ffc428363f8"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessFonts\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"d99e2048-b5ee-4af4-b7fa-bc3d779f03e7"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessFonts", "[", "xml_", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"ReplaceRepeated", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"ReplaceRepeated", "[", "\n", "\t\t\t", 
     RowBox[{"xml", ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"a_", ",", " ", 
         RowBox[{"b_", "?", 
          RowBox[{"(", 
           RowBox[{"FreeQ", "[", "$XMLFontPatchFlag", "]"}], ")"}]}], ",", 
         " ", "d_"}], "]"}], ":>", "\n", "\t\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"a", ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Append", "[", 
          RowBox[{"b", ",", " ", "$XMLFontPatchFlag"}], "]"}], ",", "\n", 
         "\t\t\t\t\t", 
         RowBox[{"Replace", "[", 
          RowBox[{"d", ",", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"s_String", ":>", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Replace", "[", 
              RowBox[{
               RowBox[{"StringExpression", "[", "expr___", "]"}], 
               "\[RuleDelayed]", "expr"}], "]"}], "@", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"StringReplace", "[", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
              "s", ",", "\n", "\t\t\t\t\t\t\t\t", 
               "$XMLFontPatchStringToXMLElementRules"}], "\n", 
              "\t\t\t\t\t\t\t\t", "]"}]}]}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"{", "1", "}"}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", 
        "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"XMLElement", "[", 
      RowBox[{"a_", ",", " ", 
       RowBox[{"b_", "?", 
        RowBox[{"(", 
         RowBox[{"MemberQ", "[", "$XMLFontPatchFlag", "]"}], ")"}]}], ",", 
       " ", "c_"}], "]"}], ":>", "\n", "\t\t\t", 
     RowBox[{"XMLElement", "[", 
      RowBox[{"a", ",", " ", 
       RowBox[{"Most", "[", "b", "]"}], ",", " ", "c"}], "]"}]}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"403b46e2-7c3b-4c5e-b384-2d0d01b5d7de"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessInOut\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"02ce8ed9-5bda-4b73-b45f-cbdefbac6137"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "$WebSiteTemplatePreProcessInOutToken", "=", "\n", "\t", 
   "\"\<(*Out:*)\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "$WebSiteTemplatePreProcessInOutInTag", "=", "\n", "\t", 
   "\"\<mma-input\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "$WebSiteTemplatePreProcessInOutOutTag", "=", "\n", "\t", 
   "\"\<mma-output\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"c004a236-307e-4a4d-818d-c6bc704566f3"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessSplitOutput\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"1568aaee-64c9-4aae-8f24-3a3a9fde8755"],

Cell["\<\
\[LeftCeiling]
\twebSiteTemplatePreProcessProcessSplitString
\t\tdoes the actual dirty work of splitting the cells
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"efde85e7-66cb-4551-b925-3ee352dbe771"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessProcessSplitString", "[", 
   RowBox[{
   "splits_", ",", " ", "pc_", ",", " ", "cc_", ",", " ", "head_", ",", " ", 
    "tail_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Length", "@", 
      RowBox[{"DeleteCases", "[", 
       RowBox[{"splits", ",", " ", "\"\<\>\""}], "]"}]}], "\[Equal]", "0"}], 
    ",", "\n", "\t\t", "Nothing", ",", "\n", "\t\t", 
    RowBox[{"Sequence", "@@", "\n", "\t\t\t", 
     RowBox[{"Flatten", "@", 
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"StringLength", "@", 
             RowBox[{"splits", "[", 
              RowBox[{"[", "1", "]"}], "]"}]}], ">", "0"}], "||", 
           RowBox[{
            RowBox[{"Length", "@", "head"}], ">", "0"}]}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"XMLElement", "[", 
           RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", 
             "\t\t\t\t\t\t\t", 
             RowBox[{"Prepend", "[", 
              RowBox[{"pc", ",", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"StringTrim", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Lookup", "[", 
                   RowBox[{
                   "pc", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                   "]"}], "<>", "\"\< \>\"", "<>", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t\t", 
                  "$WebSiteTemplatePreProcessInOutInTag"}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
              "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"List", "@", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"XMLElement", "[", 
              RowBox[{
              "\"\<code\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", "cc", ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"Flatten", "@", 
                RowBox[{"{", 
                 RowBox[{"head", ",", " ", 
                  RowBox[{"splits", "[", 
                   RowBox[{"[", "1", "]"}], "]"}]}], "}"}]}]}], "\n", 
              "\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t", "]"}], ",",
           "\n", "\t\t\t\t\t", "Nothing"}], "\n", "\t\t\t\t\t", "]"}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "@", "splits"}], ">", "2"}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"StringLength", "@", "#"}], ">", "0"}], ",", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"XMLElement", "[", 
                RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", 
                  "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Prepend", "[", 
                   RowBox[{"pc", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "StringTrim", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    "pc", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                    "]"}], "<>", "\"\< \>\"", "<>", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    "$WebSiteTemplatePreProcessInOutOutTag"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"List", "@", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"XMLElement", "[", 
                   RowBox[{
                   "\"\<code\>\"", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", "cc", 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", "#", "}"}]}], "\n", "\t\t\t\t\t\t\t\t\t\t", 
                   "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t", "Nothing"}], "\n", "\t\t\t\t\t\t\t", "]"}], 
             "&"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Most", "@", 
             RowBox[{"Rest", "@", "splits"}]}]}], "\n", "\t\t\t\t\t\t", "]"}],
           ",", "\n", "\t\t\t\t\t", "Nothing"}], "\n", "\t\t\t\t\t", "]"}], 
        ",", "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"Length", "@", "splits"}], ">", "1"}], "&&", 
             RowBox[{
              RowBox[{"StringLength", "@", 
               RowBox[{"Last", "@", "splits"}]}], ">", "0"}]}], ")"}], "||", 
           RowBox[{
            RowBox[{"Length", "@", 
             RowBox[{"Flatten", "@", 
              RowBox[{"{", "tail", "}"}]}]}], ">", "0"}]}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"XMLElement", "[", 
           RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", 
             "\t\t\t\t\t\t\t", 
             RowBox[{"Prepend", "[", 
              RowBox[{"pc", ",", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"StringTrim", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Lookup", "[", 
                   RowBox[{
                   "pc", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                   "]"}], "<>", "\"\< \>\"", "<>", "\n", 
                  "\t\t\t\t\t\t\t\t\t\t\t", 
                  "$WebSiteTemplatePreProcessInOutOutTag"}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
              "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"List", "@", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"XMLElement", "[", 
              RowBox[{
              "\"\<code\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", "cc", ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"Flatten", "@", 
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Length", "@", "splits"}], ">", "1"}], "&&", 
                    RowBox[{
                    RowBox[{"StringLength", "@", 
                    RowBox[{"Last", "@", "splits"}]}], ">", "0"}]}], ")"}], 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Last", "@", "splits"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", "Nothing"}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}], ",", " ", "\n", 
                  "\t\t\t\t\t\t\t\t\t", "tail"}], "\n", "\t\t\t\t\t\t\t\t\t", 
                 "}"}]}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
           "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", "Nothing"}], "\n", 
         "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "}"}]}]}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"1022ee02-095d-4c71-ad59-0507b4a01b1a"],

Cell["\<\
\[LeftCeiling]
\twebSiteTemplatePreProcessSplitOutput
\t\tthe more general function that delegates to the lower-level splitter
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"820d88b0-db4c-422a-961b-3b2f380175c9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessSplitOutput", "[", 
   RowBox[{
   "pc_", ",", " ", "cc_", ",", " ", "head_", ",", " ", "c_", ",", " ", 
    "tail_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"splits", "=", "\n", "\t\t\t\t", 
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"groupUpFlag", "=", "False"}], "}"}], ",", "\n", 
         "\t\t\t\t\t", 
         RowBox[{"SplitBy", "[", 
          RowBox[{
           RowBox[{"Flatten", "@", 
            RowBox[{"{", "tail", "}"}]}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Function", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"If", "[", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"MatchQ", "[", 
                RowBox[{"#", ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"_String", "?", 
                  RowBox[{"(", 
                   RowBox[{
                   "StringContainsQ", "[", 
                    "$WebSiteTemplatePreProcessInOutToken", "]"}], ")"}]}]}], 
                "\n", "\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"groupUpFlag", "=", 
                RowBox[{"Not", "@", "groupUpFlag"}]}]}], "\n", 
              "\t\t\t\t\t\t\t\t", "]"}], ";", "\n", "\t\t\t\t\t\t\t", 
             "groupUpFlag"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", 
          "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"firstSplit", "=", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"StringStartsQ", "[", 
           RowBox[{"c", ",", " ", "$WebSiteTemplatePreProcessInOutToken"}], 
           "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Prepend", "[", "\"\<\>\"", "]"}], ",", "\n", "\t\t\t\t\t", 
          "Identity"}], "\n", "\t\t\t\t\t", "]"}], "@", "\n", "\t\t\t\t", 
        RowBox[{"StringTrim", "@", 
         RowBox[{"StringSplit", "[", 
          RowBox[{"c", ",", " ", "$WebSiteTemplatePreProcessInOutToken"}], 
          "]"}]}]}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", 
         RowBox[{"DeleteCases", "[", 
          RowBox[{"splits", ",", " ", 
           RowBox[{"{", "}"}]}], "]"}]}], "==", "0"}], "&&", 
       RowBox[{
        RowBox[{"Length", "@", 
         RowBox[{"DeleteCases", "[", 
          RowBox[{"firstSplit", ",", " ", "\"\<\>\""}], "]"}]}], "\[Equal]", 
        "0"}]}], ",", "\n", "\t\t\t", "Nothing", ",", "\n", "\t\t\t", 
      RowBox[{"Sequence", "@@", "\n", "\t\t\t\t", 
       RowBox[{"Flatten", "@", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"Length", "@", "splits"}], "==", "0"}], "||", 
             RowBox[{"StringQ", "@", 
              RowBox[{"splits", "[", 
               RowBox[{"[", 
                RowBox[{"1", ",", " ", "1"}], "]"}], "]"}]}]}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{
            "webSiteTemplatePreProcessProcessSplitString", "[", "\n", 
             "\t\t\t\t\t\t  ", 
             RowBox[{
             "firstSplit", ",", " ", "\n", "\t\t\t\t\t\t\t", "pc", ",", " ", 
              "cc", ",", " ", "head", ",", " ", 
              RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"sp", "=", 
                RowBox[{"splits", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"splits", "=", 
                RowBox[{"Rest", "@", "splits"}]}], ";", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"webSiteTemplatePreProcessProcessSplitString", "[", 
                RowBox[{
                "firstSplit", ",", " ", "\n", "\t\t\t\t\t\t\t\t", "pc", ",", 
                 " ", "cc", ",", " ", 
                 RowBox[{"Join", "[", 
                  RowBox[{"head", ",", " ", "sp"}], "]"}], ",", " ", 
                 RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}]}], 
             "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}], 
          ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{
             "webSiteTemplatePreProcessProcessSplitString", "[", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{"StringQ", "@", 
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}]}], ",", "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"(*", 
                  RowBox[{
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"StringStartsQ", "[", 
                    RowBox[{
                    RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
                    "$WebSiteTemplatePreProcessInOutToken"}], "]"}], ",", 
                    "\n", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Prepend", "[", "\"\<\>\"", "]"}], ",", "\n", 
                    "\t", "\t", "\t", "\t", "\t\t\t\t\t", "Identity"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t", "]"}], "@"}], "*)"}], "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"StringSplit", "[", 
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
                   "$WebSiteTemplatePreProcessInOutToken"}], "]"}], ",", "\n",
                  "\t\t\t\t\t\t\t\t", 
                 RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], ",", 
               " ", "\n", "\t\t\t\t\t\t\t", "pc", ",", " ", "\n", 
               "\t\t\t\t\t\t\t", "cc", ",", " ", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"{", "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"If", "[", 
                RowBox[{
                 RowBox[{"StringQ", "@", 
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                 RowBox[{"Rest", "@", "#"}], ",", " ", "#"}], "]"}]}], "\n", 
              "\t\t\t\t\t\t\t", "]"}], "&"}], ",", "\n", "\t\t\t\t\t\t", 
            "splits"}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", 
         "}"}]}]}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"1d9add31-3317-4a92-98fe-cf2df510d77c"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplatePreProcessInOut\[RightFloor]", \
"CodeSubsubsubsubsection",
 Evaluatable->True,ExpressionUUID->"12400d51-a898-4217-8980-250b786f9ba8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplatePreProcessInOut", "[", "xml_", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"ReplaceRepeated", "[", "\n", "\t\t", 
   RowBox[{"xml", ",", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{
        "\"\<pre\>\"", ",", "\n", "\t", "\t\t\t", "pc_", ",", "\n", "\t", 
         "\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t\t\t\t", 
          RowBox[{"___", ",", "\n", "\t", "\t\t\t\t", 
           RowBox[{"XMLElement", "[", 
            RowBox[{
            "\"\<code\>\"", ",", "\n", "\t", "\t\t\t\t\t", "cc_", ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"head", ":", 
                RowBox[{"Shortest", "[", "___", "]"}]}], ",", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"c_String", "?", 
                RowBox[{"(", 
                 RowBox[{
                 "StringContainsQ", "[", 
                  "$WebSiteTemplatePreProcessInOutToken", "]"}], ")"}]}], ",",
                "\n", "\t\t\t\t\t\t\t", "tail___"}], "\n", "\t\t\t\t\t\t\t", 
              "}"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
           "\t\t\t\t", "___"}], "\n", "\t", "\t\t\t\t", "}"}]}], "\n", "\t", 
        "\t\t\t", "]"}], ":>", "\n", "\t", "\t\t\t", 
       RowBox[{"webSiteTemplatePreProcessSplitOutput", "[", 
        RowBox[{"pc", ",", " ", "cc", ",", " ", 
         RowBox[{"{", "head", "}"}], ",", " ", "c", ",", " ", 
         RowBox[{"{", "tail", "}"}]}], "]"}]}], ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t", 
         RowBox[{"pc_", "?", 
          RowBox[{"(", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"StringFreeQ", "[", 
             RowBox[{
              RowBox[{"Lookup", "[", 
               RowBox[{"#", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}],
                "]"}], ",", " ", "\n", "\t\t\t\t\t\t", 
              RowBox[{
              "$WebSiteTemplatePreProcessInOutInTag", "|", "\n", 
               "\t\t\t\t\t\t", "$WebSiteTemplatePreProcessInOutOutTag"}]}], 
             "\n", "\t\t\t\t\t\t", "]"}], "&"}], "\n", "\t\t\t\t\t", ")"}]}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{"c", ":", 
          RowBox[{"{", "\n", "\t\t\t\t\t", 
           RowBox[{"___", ",", "\n", "\t\t\t\t\t", 
            RowBox[{"XMLElement", "[", 
             RowBox[{
             "\"\<code\>\"", ",", "\n", "\t\t\t\t\t\t", "_", ",", "\n", 
              "\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"_String", "?", 
                RowBox[{"(", 
                 RowBox[{
                 "StringFreeQ", "[", "$WebSiteTemplatePreProcessInOutToken", 
                  "]"}], ")"}]}], "\n", "\t\t\t\t\t\t\t", "}"}]}], "\n", 
             "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", "___"}], "\n", 
           "\t\t\t\t\t", "}"}]}]}], "\n", "\t\t\t\t", "]"}], ":>", "\n", 
       "\t\t\t\t", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<pre\>\"", ",", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", 
          "\t\t\t\t\t\t", 
          RowBox[{"Prepend", "[", 
           RowBox[{"pc", ",", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"\"\<class\>\"", "->", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{"StringTrim", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"Lookup", "[", 
                RowBox[{
                "pc", ",", " ", "\"\<class\>\"", ",", " ", "\"\<\>\""}], 
                "]"}], "<>", "\"\< \>\"", "<>", "\n", "\t", 
               "\t\t\t\t\t\t\t\t\t", "$WebSiteTemplatePreProcessInOutInTag"}],
               "\n", "\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t", 
           "]"}]}], ",", "\n", "\t\t\t\t\t", "c"}], "\n", "\t\t\t\t\t", 
        "]"}]}]}], "\n", "\t\t\t", "}"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"dff75dee-bd0d-4fba-bca5-1f9015d6b077"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteTemplatePreProcess\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"1d94582f-4a4a-4a83-962b-a0f2e6893b1d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteTemplatePreProcess", "[", 
   RowBox[{"fileContent_", ",", "args_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"ids", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<AttachIDs\>\""}], "]"}]}], ",", "\n", 
      "\t\t\t", "idtags", ",", "\n", "\t\t\t", 
      RowBox[{"lang", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<CodeLanguage\>\""}], "]"}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{"highlight", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<CodeHighlighting\>\""}], "]"}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{"prettyprint", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<PrettyPrint\>\""}], "]"}]}], ",", "\n",
       "\t", "\t\t", 
      RowBox[{"patchfonts", "=", "\n", "\t", "\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<PatchFonts\>\""}], "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"splitout", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"args", ",", " ", "\"\<SplitInOut\>\""}], "]"}]}], ",", "\n", 
      "\t\t\t", "splittags", ",", "\n", "\t\t\t", 
      RowBox[{"srcbase", "=", "\n", "\t\t\t\t", 
       RowBox[{"Replace", "[", 
        RowBox[{
         RowBox[{"Lookup", "[", 
          RowBox[{"args", ",", " ", "\"\<SiteURL\>\""}], "]"}], ",", " ", 
         RowBox[{
          RowBox[{"Except", "[", "_String", "]"}], "\[RuleDelayed]", 
          "\"\<\>\""}]}], "]"}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"StringQ", "@", "ids"}], ",", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"idtags", "=", "ids"}], ";", "\n", "\t\t\t", 
        RowBox[{"ids", "=", "True"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"idtags", "=", "$WebSiteTemplateAttachIDElements"}]}], "\n", 
      "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"OptionQ", "@", "splitout"}], ",", "\n", "\t\t\t", 
       RowBox[{"splittags", "=", "\n", "\t\t\t\t", 
        RowBox[{"MapThread", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"StringQ", "@", "#"}], ",", " ", "#", ",", " ", "#2"}], 
            "]"}], "&"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"{", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Lookup", "[", 
             RowBox[{"splitout", ",", " ", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
               "\"\<Token\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<OutTag\>\"", ",", "\n", "\t", "\t", "\t\t\t\t\t\t", 
                "\"\<InTag\>\""}], "\n", "\t\t\t\t\t\t\t\t", "}"}]}], "\n", 
             "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
             "$WebSiteTemplatePreProcessInOutToken", ",", "\n", 
              "\t\t\t\t\t\t\t", "$WebSiteTemplatePreProcessInOutInTag", ",", 
              "\n", "\t\t\t\t\t\t\t", 
              "$WebSiteTemplatePreProcessInOutOutTag"}], "\n", 
             "\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t", "}"}]}], "\n", 
         "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"splittags", "=", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
         "$WebSiteTemplatePreProcessInOutToken", ",", "\n", "\t\t\t\t\t", 
          "$WebSiteTemplatePreProcessInOutInTag", ",", "\n", "\t\t\t\t\t", 
          "$WebSiteTemplatePreProcessInOutOutTag"}], "\n", "\t\t\t\t\t", 
         "}"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"StringQ", "[", "srcbase", "]"}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"ReplaceAll", "[", "\n", "\t\t\t\t", 
          RowBox[{"#", ",", "\n", "\t\t\t\t", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"\"\<src\>\"", "\[Rule]", "f_"}], ")"}], 
            "\[RuleDelayed]", "\n", "\t\t\t\t\t", 
            RowBox[{"(", 
             RowBox[{"\"\<src\>\"", "\[Rule]", 
              RowBox[{"StringReplace", "[", 
               RowBox[{"f", ",", " ", 
                RowBox[{"\"\<{filename}\>\"", "\[Rule]", "srcbase"}]}], 
               "]"}]}], ")"}]}]}], "\n", "\t\t\t\t", "]"}], "&"}], ",", "\n", 
        "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", "ids"}], ",", "\n", "\t\t\t", 
         RowBox[{"Block", "[", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t", 
            RowBox[{"$WebSiteTemplateAttachIDElements", "=", "idtags"}], "\n",
             "\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t", 
           "webSiteTemplatePreProcessAttachIDs"}], "\n", "\t\t\t\t", "]"}], 
         ",", "\n", "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", 
       "\t\t", 
       RowBox[{
        RowBox[{"If", "[", "\n", "\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"TrueQ", "[", "prettyprint", "]"}], "||", "\n", "\t\t\t\t", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"StringQ", "[", "lang", "]"}], "&&", 
             RowBox[{"!", 
              RowBox[{"TrueQ", "[", "highlight", "]"}]}], "&&", 
             RowBox[{"!", 
              RowBox[{"StringQ", "[", "highlight", "]"}]}], "&&", 
             RowBox[{"prettyprint", "=!=", "False"}]}], ")"}]}], ",", "\n", 
          "\t\t\t", 
          RowBox[{
          "webSiteTemplatePreProcessCodeHighlighting", "[", "\n", "\t\t\t\t", 
           
           RowBox[{"\"\<prettyprint\>\"", ",", "\n", "\t\t\t\t", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"StringQ", "@", "lang"}], ",", " ", "lang", ",", " ", 
              "None"}], "]"}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t",
           "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"TrueQ", "[", "highlight", "]"}], ",", "\n", "\t\t\t", 
           RowBox[{
           "webSiteTemplatePreProcessCodeHighlighting", "[", "\n", "\t\t\t\t", 
            RowBox[{"\"\<highlight\>\"", ",", "\n", "\t\t\t\t", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"StringQ", "@", "lang"}], ",", " ", "lang", ",", " ", 
               "None"}], "]"}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", 
           "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"StringQ", "[", "highlight", "]"}], ",", "\n", "\t\t\t", 
            RowBox[{
            "webSiteTemplatePreProcessCodeHighlighting", "[", "\n", 
             "\t\t\t\t", 
             RowBox[{"highlight", ",", "\n", "\t\t\t\t", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{"StringQ", "@", "lang"}], ",", " ", "lang", ",", " ", 
                "None"}], "]"}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", 
            "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
          
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"TrueQ", "[", "patchfonts", "]"}], ",", "\n", "\t\t\t", 
             "webSiteTemplatePreProcessFonts", ",", "\n", "\t\t\t", 
             "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"TrueQ", "[", "splitout", "]"}], ",", "\n", "\t\t\t", 
              RowBox[{
               RowBox[{"Block", "[", "\n", "\t\t\t\t", 
                RowBox[{
                 RowBox[{"{", "\n", "\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"$WebSiteTemplatePreProcessInOutToken", "=", 
                    RowBox[{"splittags", "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], ",", "\n", "\t\t\t\t\t", 
                   RowBox[{"$WebSiteTemplatePreProcessInOutInTag", "=", 
                    RowBox[{"splittags", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], ",", "\n", "\t\t\t\t\t", 
                   RowBox[{"$WebSiteTemplatePreProcessInOutOutTag", "=", 
                    RowBox[{"splittags", "[", 
                    RowBox[{"[", "3", "]"}], "]"}]}]}], "\n", "\t\t\t\t\t", 
                  "}"}], ",", "\n", "\t\t\t\t", 
                 RowBox[{"webSiteTemplatePreProcessInOut", "[", "#", "]"}]}], 
                "\n", "\t\t\t\t", "]"}], "&"}], ",", "\n", "\t\t\t", 
              "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t\t", 
            RowBox[{"FirstCase", "[", "\n", "\t\t\t\t", 
             RowBox[{"fileContent", ",", "\n", "\t\t\t\t", 
              RowBox[{
               RowBox[{"XMLElement", "[", 
                RowBox[{"\"\<body\>\"", ",", "_", ",", "b_"}], "]"}], 
               "\[RuleDelayed]", "\n", "\t\t\t\t\t", "b"}], ",", "\n", 
              "\t\t\t\t", "fileContent", ",", "\n", "\t\t\t\t", 
              "\[Infinity]"}], "\n", "\t\t\t\t", "]"}]}]}]}]}]}]}]}]}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"83a8357b-3a81-4d43-9190-8d74f80cad69"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateGatherArgs\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"271eea31-0a9a-45ce-95ce-d1157eb70496"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteSummaryBaseUnits\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"54aef8e3-4c30-4e8a-8f4d-20e10b605655"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteSummaryBaseUnits", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
    "\"\<Characters\>\"", ",", "\"\<Words\>\"", ",", "\"\<Characters\>\"", 
     ",", "\n", "\t\t", "\"\<Sentences\>\"", ",", "\"\<Paragraphs\>\"", ",", 
     "\"\<Lines\>\""}], "\n", "\t\t", "}"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"d4df4aaf-9bf7-4528-bae0-a07f1d2e0dd8"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteSummaryIndependentUnits\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"7c435f76-fc0d-409c-a786-cb9a08715b3e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteSummaryIndependentUnits", ":=", "\n", "\t", 
   RowBox[{"$WebSiteSummaryIndependentUnits", "=", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Quantity", "/@", "$WebSiteSummaryBaseUnits"}], "//", 
     "QuantityUnit"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"531b154f-3323-4469-b767-55a53e82d62a"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebSiteSummaryUnits\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"f172df44-8c9b-4952-af08-73b0a26c4f6b"],

Cell[BoxData[
 RowBox[{"$WebSiteSummaryUnits", ":=", "\n", "\t", 
  RowBox[{"$WebSiteSummaryUnits", "=", "\n", "\t\t", 
   RowBox[{"Alternatives", "@@", "\n", "\t\t\t", 
    RowBox[{"Join", "[", 
     RowBox[{
     "$WebSiteSummaryBaseUnits", ",", "$WebSiteSummaryIndependentUnits"}], 
     "]"}]}]}]}]], \
"CodeInput",ExpressionUUID->"4f159939-c557-49c4-88fa-e1790d074c44"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteTemplateGatherSummary\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"5450dcf0-484e-411d-8fa8-b08fdb948073"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTemplateGatherSummary", "[", 
   RowBox[{"len_", ",", " ", "content_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"sl", ",", "\n", "\t\t\t", "cont"}], "\n", "\t\t\t", "}"}], ",", 
    "\n", "\t\t", 
    RowBox[{
     RowBox[{"sl", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{"len", ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"i_Integer", "?", "Positive"}], ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"{", 
            RowBox[{"i", ",", " ", "\"\<Characters\>\""}], "}"}]}], ",", "\n",
           "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"_", "[", 
            RowBox[{
             RowBox[{"i_Integer", "?", "Positive"}], ",", " ", 
             RowBox[{"u", ":", 
              RowBox[{"Alternatives", "@@", "$WebSiteSummaryBaseUnits"}]}]}], 
            "]"}], ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"{", 
            RowBox[{"i", ",", " ", "u"}], "}"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"_", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"{", 
            RowBox[{"3", ",", " ", "\"\<Lines\>\""}], "}"}]}]}], "\n", 
         "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"cont", "=", 
      RowBox[{"ImportString", "[", 
       RowBox[{"content", ",", " ", "\"\<HTML\>\""}], "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"Replace", "[", 
      RowBox[{"sl", ",", "\n", "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"{", "\n", "\t\t\t\t\t", 
           RowBox[{"i_", ",", "\n", "\t", "\t\t\t\t", 
            RowBox[{"\"\<Characters\>\"", "|", 
             RowBox[{"IndependentUnit", "[", "\"\<characters\>\"", "]"}]}]}], 
           "\n", "\t", "\t\t\t\t", "}"}], ":>", "\n", "\t", "\t\t\t\t", 
          RowBox[{
           RowBox[{"Function", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{"If", "[", "\n", "\t", "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{
               RowBox[{"StringLength", "[", "#", "]"}], ">", "i"}], ",", "\n",
               "\t", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"StringTake", "[", 
                RowBox[{"#", ",", 
                 RowBox[{"i", "-", "3"}]}], "]"}], "<>", "\"\<...\>\""}], ",",
               "\n", "\t", "\t\t\t\t\t\t", "#"}], "\n", "\t", "\t\t\t\t\t\t", 
             "]"}], "\n", "\t", "\t\t\t\t\t", "]"}], "@", "\n", "\t", 
           "\t\t\t\t\t", 
           RowBox[{"StringReplace", "[", 
            RowBox[{"cont", ",", 
             RowBox[{"Whitespace", "\[Rule]", "\"\< \>\""}]}], "]"}]}]}], ",",
          "\n", "\t", "\t\t\t", 
         RowBox[{
          RowBox[{"{", "\n", "\t", "\t\t\t\t", 
           RowBox[{"i_", ",", "\n", "\t", "\t\t\t\t", 
            RowBox[{"\"\<Lines\>\"", "|", 
             RowBox[{"IndependentUnit", "[", 
              RowBox[{"\"\<lines\>\"", "|", "\"\<lines of code\>\""}], 
              "]"}]}]}], "\n", "\t", "\t\t\t\t", "}"}], ":>", "\n", "\t", 
          "\t\t\t\t", 
          RowBox[{"StringRiffle", "@", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Take", "[", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"StringSplit", "[", 
              RowBox[{"cont", ",", "\"\<\\n\>\""}], "]"}], ",", "\n", "\t", 
             "\t\t\t\t\t\t", 
             RowBox[{"UpTo", "[", "i", "]"}]}], "\n", "\t", "\t\t\t\t\t\t", 
            "]"}]}]}], ",", "\n", "\t", "\t\t\t", 
         RowBox[{
          RowBox[{"{", "\n", "\t", "\t\t\t\t", 
           RowBox[{"i_", ",", "\n", "\t", "\t\t\t\t", 
            RowBox[{
             RowBox[{"IndependentUnit", "[", "t_", "]"}], "|", "t_String"}]}],
            "\n", "\t", "\t\t\t\t", "}"}], ":>", "\n", "\t", "\t\t\t\t", 
          RowBox[{"StringRiffle", "[", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"TextCases", "[", 
             RowBox[{"cont", ",", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"ToUpperCase", "[", 
                  RowBox[{"StringTake", "[", 
                   RowBox[{"#", ",", "1"}], "]"}], "]"}], "<>", "\n", "\t", 
                 "\t\t\t\t\t\t\t", 
                 RowBox[{"StringDrop", "[", 
                  RowBox[{"#", ",", "1"}], "]"}]}], "&"}], "@", "t"}], ",", 
              "\n", "\t", "\t\t\t\t\t\t", "i"}], "]"}], ",", "\n", "\t", 
            "\t\t\t\t\t", "\"\< \>\""}], "\n", "\t\t\t\t\t\t", "]"}]}]}], 
        "\n", "\t\t\t\t", "}"}]}], "\n", "\t\t", "]"}]}]}], "\n", "\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"08d587e3-4efc-4525-ab6c-aafe093420a7"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteTemplateGatherArgs\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"6740c99d-d233-4774-9511-8ffb059d39bd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteTemplateGatherArgs", "[", 
   RowBox[{"fileContent_", ",", " ", "args_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
     "url", ",", "\n", "\t\t\t", "slug", ",", "\n", "\t\t\t", "fp", ",", "\n",
       "\t\t\t", "title", ",", "\n", "\t\t\t", "content", ",", "\n", "\t\t\t",
       "summary", ",", "\n", "\t\t\t", "date", ",", "\n", "\t\t\t", 
      "modified", ",", "\n", "\t\t\t", "siteURL", ",", "\n", "\t\t\t", 
      "siteName"}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"url", "=", 
      RowBox[{"Lookup", "[", 
       RowBox[{"args", ",", " ", "\"\<URL\>\""}], "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"slug", "=", 
      RowBox[{"Lookup", "[", 
       RowBox[{"args", ",", " ", "\"\<Slug\>\""}], "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"fp", "=", 
      RowBox[{"Lookup", "[", 
       RowBox[{"args", ",", " ", "\"\<FilePath\>\""}], "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"content", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", 
       RowBox[{"fileContent", ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"l", ":", 
            RowBox[{"{", "__XMLElement", "}"}]}], "\[RuleDelayed]", "\n", 
           "\t\t\t\t\t\t", 
           RowBox[{"StringRiffle", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"WebSiteBuildSafeExportXML", "/@", "l"}], ",", "\n", 
             "\t\t\t\t\t\t\t", "\"\<\\n\>\""}], "\n", "\t\t\t\t\t\t\t", 
            "]"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"x_XMLElement", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"WebSiteBuildSafeExportXML", "[", "x", "]"}]}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{
          "None", "->", "\n", "\t\t\t\t\t\t", 
           "\"\<<html><body>No content...</body><html>\>\""}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"e", ":", 
            RowBox[{"Except", "[", "_String", "]"}]}], ":>", "\n", 
           "\t\t\t\t\t\t", 
           RowBox[{"(", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"WebSiteBuildLogError", "[", 
              RowBox[{"fp", ",", " ", "\"\<BadContent\>\"", ",", " ", "e"}], 
              "]"}], ";", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"PackageThrowMessage", "[", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"\"\<SiteBuilder\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"Evaluate", "@", 
                RowBox[{"WebSiteBuild", "::", "nocnt"}]}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"\"\<MessageParameters\>\"", "\[RuleDelayed]", 
                RowBox[{"{", 
                 RowBox[{"Short", "[", "e", "]"}], "}"}]}]}], "\n", 
              "\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t\t", ")"}]}]}], 
         "\n", "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"title", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"FirstCase", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"StringQ", "[", "fileContent", "]"}], ",", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"ImportString", "[", 
             RowBox[{"fileContent", ",", " ", 
              RowBox[{"{", 
               RowBox[{"\"\<HTML\>\"", ",", " ", "\"\<XMLObject\>\""}], 
               "}"}]}], "]"}], ",", "\n", "\t\t\t\t\t\t", "fileContent"}], 
           "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"t", ":", 
            RowBox[{"XMLElement", "[", 
             RowBox[{"\"\<title\>\"", ",", " ", "_", ",", " ", "_"}], "]"}]}],
            "\[RuleDelayed]", "\n", "\t\t\t\t\t\t", 
           RowBox[{
           "System`Convert`XMLDump`getSymbolicXMLPlaintext", "@", "\n", 
            "\t\t\t\t\t\t\t", 
            RowBox[{"XMLElement", "[", 
             RowBox[{"\"\<body\>\"", ",", 
              RowBox[{"{", "}"}], ",", " ", "t"}], "]"}]}]}], ",", "\n", 
          "\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "\[Infinity]"}], 
         "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"Except", "[", "_String", "]"}], "\[Rule]", "\n", 
           "\t\t\t\t\t\t", "None"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"s_String", "\[RuleDelayed]", "\n", "\t\t\t\t\t\t", "s"}]}],
          "\n", "\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"summary", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", " ", "\"\<Summary\>\""}], "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{
         RowBox[{"Except", "[", 
          RowBox[{"_String", "?", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{"StringLength", "[", "#", "]"}], ">", "0"}], "&"}], 
            ")"}]}], "]"}], ":>", "\n", "\t\t\t\t\t", 
         RowBox[{"webSiteTemplateGatherSummary", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Lookup", "[", 
            RowBox[{"args", ",", " ", "\"\<SummaryLength\>\""}], "]"}], ",", 
           "\n", "\t\t\t\t\t\t", "content"}], "\n", "\t\t\t\t\t\t", "]"}]}]}],
        "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"date", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", "\"\<Date\>\"", ",", "Now"}], "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"s_String", "\[RuleDelayed]", 
         RowBox[{"Quiet", "@", 
          RowBox[{"Check", "[", 
           RowBox[{
            RowBox[{"DateObject", "[", "s", "]"}], ",", " ", "s"}], 
           "]"}]}]}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"modified", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", "\"\<Modified\>\"", ",", "Now"}], "]"}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"s_String", "\[RuleDelayed]", 
         RowBox[{"Quiet", "@", 
          RowBox[{"Check", "[", 
           RowBox[{
            RowBox[{"DateObject", "[", "s", "]"}], ",", " ", "s"}], 
           "]"}]}]}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"siteURL", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", " ", "\"\<SiteURL\>\"", ",", " ", "Automatic"}],
          "]"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t", 
         RowBox[{"With", "[", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{"bit", "=", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"Length", "@", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Lookup", "[", 
                 RowBox[{
                 "args", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                  "\"\<URL\>\"", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"FileNameSplit", "@", 
                   RowBox[{"Lookup", "[", 
                    RowBox[{
                    "args", ",", " ", "\"\<FilePath\>\"", ",", " ", 
                    "\"\<??\>\""}], "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 "]"}], ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"URLParse", "[", 
                  RowBox[{"s", ",", "\"\<Path\>\""}], "]"}]}]}], "\n", 
               "\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t", "}"}], 
           ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"bit", ",", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"1", "\[Rule]", "\"\<.\>\""}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"n_", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"URLBuild", "@", 
                 RowBox[{"ConstantArray", "[", 
                  RowBox[{"\"\<..\>\"", ",", " ", 
                   RowBox[{"n", "-", "1"}]}], "]"}]}]}]}], "\n", 
              "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
          "\n", "\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t", "]"}]}], ";", 
     "\n", "\t\t", 
     RowBox[{"siteName", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{"args", ",", "\"\<SiteName\>\"", ",", "Automatic"}], "]"}], 
        ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"URLParse", "[", 
             RowBox[{"s", ",", "\"\<Path\>\""}], "]"}], "[", 
            RowBox[{"[", 
             RowBox[{"-", "1"}], "]"}], "]"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Except", "[", "_String", "]"}], ":>", "\n", 
           "\t\t\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{"args", ",", " ", "\"\<SiteURL\>\""}], "]"}], ",", "\n",
              "\t\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"URLParse", "[", 
                  RowBox[{"s", ",", "\"\<Path\>\""}], "]"}], "[", 
                 RowBox[{"[", 
                  RowBox[{"-", "1"}], "]"}], "]"}]}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Except", "[", "_String", "]"}], ":>", "\n", 
                "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"Replace", "[", 
                 RowBox[{
                  RowBox[{"Lookup", "[", 
                   RowBox[{"args", ",", " ", "\"\<SiteDirectory\>\""}], "]"}],
                   ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"Except", "[", "_String", "]"}], ":>", "\n", 
                   "\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"Replace", "[", 
                    RowBox[{"$WolframID", ",", 
                    RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "s_String", ":>", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"StringSplit", "[", 
                    RowBox[{"s", ",", "\"\<@\>\""}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}]}], ",", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"_", "\[Rule]", "$UserName"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
              "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t", 
         "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"Merge", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{"args", ",", "\n", "\t\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"StringQ", "@", "title"}], ",", " ", 
           RowBox[{"\"\<Title\>\"", "->", "title"}], ",", " ", "Nothing"}], 
          "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"\"\<Summary\>\"", "\[Rule]", "summary"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<Date\>\"", "->", "date"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"\"\<Modified\>\"", "\[Rule]", "modified"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<SiteName\>\"", "\[Rule]", "siteName"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"\"\<SiteURL\>\"", "\[Rule]", "siteURL"}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"StringQ", "@", "url"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"\"\<URL\>\"", "\[Rule]", 
            RowBox[{
             RowBox[{"StringReplace", "[", 
              RowBox[{"Whitespace", "\[Rule]", "\"\<-\>\""}], "]"}], "@", 
             "url"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"StringQ", "@", "slug"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"StringReplace", "[", 
              RowBox[{"Whitespace", "\[Rule]", "\"\<-\>\""}], "]"}], "@", 
             "\n", "\t\t\t\t\t\t\t  ", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"StringQ", "[", "fp", "]"}], ",", "\n", "  ", "\t", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"URLBuild", "@", "\n", "  \t\t\t\t\t\t\t\t\t", 
                RowBox[{"Append", "[", "\n", "                  ", 
                 RowBox[{
                  RowBox[{"Most", "@", 
                   RowBox[{"FileNameSplit", "[", "fp", "]"}]}], ",", " ", 
                  "\n", "                  ", 
                  RowBox[{"WebSiteBuildAttachExtension", "@", "slug"}]}], 
                 "\n", "                  ", "]"}]}], ",", "\n", 
               "  \t\t\t\t\t\t\t\t", 
               RowBox[{"WebSiteBuildAttachExtension", "@", "slug"}]}], "\n", 
              "  ", "\t\t\t\t\t\t\t\t", "]"}]}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"StringQ", "@", "title"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t  ", 
            RowBox[{
             RowBox[{"StringReplace", "[", 
              RowBox[{"Whitespace", "\[Rule]", "\"\<-\>\""}], "]"}], "@", 
             "\n", "  ", "\t\t\t\t\t\t  ", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"StringQ", "[", "fp", "]"}], ",", "\n", "  ", "\t", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"URLBuild", "@", "\n", "  ", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"Append", "[", "\n", "  ", "\t              ", 
                 RowBox[{
                  RowBox[{"Most", "@", 
                   RowBox[{"FileNameSplit", "[", "fp", "]"}]}], ",", "\n", 
                  "  ", "\t              ", 
                  RowBox[{"WebSiteBuildAttachExtension", "@", "title"}]}], 
                 "\n", "  ", "\t              ", "]"}]}], ",", "\n", "  ", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"WebSiteBuildAttachExtension", "@", "title"}]}], "\n", 
              "  ", "\t\t\t\t\t\t\t\t", "]"}]}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"StringQ", "[", "fp", "]"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"URLBuild", "@", "\n", "\t\t\t\t\t\t\t  ", 
             RowBox[{
              RowBox[{"StringReplace", "[", 
               RowBox[{"Whitespace", "\[Rule]", "\"\<-\>\""}], "]"}], "@", 
              "\n", "\t\t\t\t\t\t\t\t  ", 
              RowBox[{"Append", "[", "\n", "\t\t\t\t\t\t\t\t    ", 
               RowBox[{
                RowBox[{"Most", "@", 
                 RowBox[{"FileNameSplit", "[", "fp", "]"}]}], ",", " ", "\n", 
                "  ", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"WebSiteBuildAttachExtension", "@", 
                 RowBox[{"FileNameTake", "@", "fp"}]}]}], "\n", 
               "                ", "]"}]}]}]}], ",", "\n", "\t\t\t\t\t", 
           "True", ",", "\t", "\n", "\t\t\t\t\t\t", "Nothing"}], "\n", 
          "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"\"\<Content\>\"", "->", "\n", "\t\t\t\t\t", "content"}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{
         "\"\<RawXML\>\"", "->", "\n", "\t\t\t\t\t", "fileContent"}]}], "\n", 
        "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", "Last"}], "\n", "\t", "\t\t", 
      "]"}]}]}], "\n", "\t", "\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"c1da0480-d6c2-4496-87bf-3f510e543d43"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateApply\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712538068908094*^9, 3.712538071089961*^9}, {
  3.712682964322591*^9, 
  3.7126829648491917`*^9}},ExpressionUUID->"f5615055-6574-427b-b797-\
dfed9551763a"],

Cell[BoxData[
 RowBox[{"WebSiteTemplateApply", "//", "ClearAll"}]], "CodeInput",
 CellChangeTimes->{{3.712597244415457*^9, 3.712597249303433*^9}, 
   3.712674844639879*^9},ExpressionUUID->"e4ca5f0f-8144-4f30-9f26-\
43f428c19e45"],

Cell["\<\
\[LeftCeiling]
\tIteratively apply templates to the provided content, unwrapping from or \
reexporting to XML as necessary. Generally only one template will be used and \
imports will be handled within the template.
\[RightFloor]\
\>", "Text",
 Evaluatable->True,
 CellChangeTimes->{{3.712626047703267*^9, 3.71262609854807*^9}, {
  3.723039315773836*^9, 
  3.723039322445921*^9}},ExpressionUUID->"e56ea7ac-4060-409a-af36-\
372596179f54"],

Cell[BoxData[
 RowBox[{
  RowBox[{"getApplicationTemplate", "[", 
   RowBox[{"root_", ",", " ", "name_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"With", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{"dp", "=", "\n", "\t\t\t\t\t", 
        RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNameJoin", "@*", "FileNameSplit"}], ",", "\n", 
          "\t\t\t\t\t\t", 
          RowBox[{"Append", "[", 
           RowBox[{"root", ",", " ", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "$WebSiteTemplateLibDirectory", ",", " ", "\"\<templates\>\""}],
               "}"}]}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", 
         "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "}"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"SortBy", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"FileNames", "[", 
         RowBox[{"name", ",", " ", "dp"}], "]"}], ",", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Position", "[", 
          RowBox[{"dp", ",", " ", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"FileNameSplit", "@", 
             RowBox[{"DirectoryName", "@", "#"}]}]}]}], "]"}], "&"}]}], "\n", 
       "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"f_", ",", " ", "___"}], "}"}], "\[RuleDelayed]", "f"}], "\n", 
     "\t\t\t", "}"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"f5c7ccc8-6340-47f6-99a5-9da4dfe2c581"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "nocnt"}], "=", "\n", "\t", 
   "\"\<Can't export content `` to string\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteTemplateApply", "[", "\n", "\t", 
   RowBox[{
    RowBox[{"root", ":", 
     RowBox[{
      RowBox[{"_String", "?", "DirectoryQ"}], "|", 
      RowBox[{"{", 
       RowBox[{"__String", "?", "DirectoryQ"}], "}"}]}]}], ",", "\n", "\t", 
    RowBox[{"content", ":", 
     RowBox[{"_String", "|", "_File", "|", "None"}]}], ",", "\n", "\t", 
    RowBox[{"templates", ":", 
     RowBox[{
      RowBox[{"{", "__String", "}"}], "|", "_String"}]}], ",", "\n", "\t", 
    RowBox[{"info", ":", 
     RowBox[{"_", "?", "AssociationQ"}], ":", 
     RowBox[{"<|", "|>"}]}]}], "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"AssociationQ", "@", "$WebSiteBuildContentStack"}], ",", "\n", 
    "\t\t", 
    RowBox[{"Module", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{
       "cname", ",", "\n", "\t\t\t\t", "fils", ",", "\n", "\t\t\t\t", 
        "args"}], "\n", "\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{"cname", "=", 
        RowBox[{"webSitePrepContentName", "[", 
         RowBox[{"content", ",", " ", "root"}], "]"}]}], ";", "\n", 
       "\t\t\t\t", 
       RowBox[{"fils", "=", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"getApplicationTemplate", "[", 
            RowBox[{"root", ",", " ", "#"}], "]"}], "&"}], "/@", "\n", 
          "\t\t\t\t\t\t", 
          RowBox[{"Flatten", "@", 
           RowBox[{"List", "@", "templates"}]}]}], "//", "Flatten"}]}], ";", 
       "\n", "\t\t\t", 
       RowBox[{"args", "=", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"MemberQ", "[", 
             RowBox[{
              RowBox[{"Lookup", "[", 
               RowBox[{"#", ",", " ", "\"\<Templates\>\"", ",", " ", 
                RowBox[{"{", "}"}]}], "]"}], ",", " ", 
              "\"\<article.html\>\""}], "]"}], ",", "\n", "\t\t\t\t\t", 
            RowBox[{"Merge", "[", 
             RowBox[{
              RowBox[{"{", "\n", "\t\t\t\t\t\t", 
               RowBox[{"#", ",", "\n", "\t\t\t\t\t\t", 
                RowBox[{"\"\<Categories\>\"", "\[Rule]", 
                 RowBox[{"{", "\"\<misc\>\"", "}"}]}]}], "\n", "\t\t\t\t\t\t",
                "}"}], ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{
                  RowBox[{"{", 
                   RowBox[{"l_List", ",", "l2_List"}], "}"}], ":>", "\n", 
                  "\t\t\t\t\t\t\t\t", 
                  RowBox[{"DeleteDuplicates", "@", 
                   RowBox[{"Flatten", "@", 
                    RowBox[{"{", 
                    RowBox[{"l", ",", "l2"}], "}"}]}]}]}], ",", "\n", 
                 "\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"{", "e_", "}"}], "\[RuleDelayed]", "e"}]}], "\n", 
                "\t\t\t\t\t\t\t", "}"}], "]"}]}], "\n", "\t\t\t\t\t\t", "]"}],
             ",", "\n", "\t\t\t\t\t", "#"}], "\n", "\t\t\t\t\t", "]"}], "&"}],
          "@", "\n", "\t\t\t\t", 
         RowBox[{"Merge", "[", 
          RowBox[{"(*", " ", 
           RowBox[{
           "Collect", " ", "the", " ", "arguments", " ", "to", " ", "pass", 
            " ", "to", " ", "the", " ", "template"}], " ", "*)"}], "\n", 
          "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{"$WebSiteBuildAggStack", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"\"\<Templates\>\"", "\[Rule]", 
              RowBox[{"Flatten", "@", 
               RowBox[{"{", "templates", "}"}]}]}], ",", "\n", "\t\t\t\t\t\t",
              "info", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"(*", " ", 
              RowBox[{"Include", " ", "extracted", " ", "attributes"}], " ", 
              "*)"}], "\n", "\t\t\t\t\t\t", 
             RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                "$WebSiteBuildContentStack", ",", " ", "\n", 
                 "\t\t\t\t\t\t\t\t", "cname", ",", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{"<|", "|>"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}], ",",
                "\n", "\t\t\t\t\t\t\t", "\"\<Attributes\>\"", ",", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", 
            "\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", "Last"}], "\n", 
          "\t\t\t\t\t", "]"}]}]}], ";", "\n", "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{"Allows", " ", "for", " ", "custom", " ", "slugs"}], " ", 
        "*)"}], "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"Fold", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{"#", ",", " ", "#2", ",", " ", 
               RowBox[{"<|", "|>"}]}], "]"}], "&"}], ",", "\n", "\t\t\t\t\t", 
            "$WebSiteBuildContentStack", ",", "\n", "\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"cname", ",", " ", "\"\<Attributes\>\""}], "}"}]}], "\n",
            "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "\"\<Slug\>\"", ",", 
          "\n", "\t\t\t\t", "Automatic"}], "\n", "\t\t\t\t", "]"}], "->", 
        "\n", "\t\t\t\t", 
        RowBox[{"Fold", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"WebSiteXMLTemplateApply", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
            "root", ",", "\n", "\t\t\t\t\t\t", "#2", ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"WebSiteTemplateGatherArgs", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"#", ",", "\n", "\t\t\t\t\t\t\t", "args"}], "\n", 
              "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}], "&"}], 
          ",", "\n", "\t\t\t\t\t", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"cname", "=!=", "None"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"$WebSiteBuildContentStack", "[", 
             RowBox[{"cname", ",", " ", "\"\<Content\>\""}], "]"}], ",", "\n",
             "\t\t\t\t\t\t", "None"}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n",
           "\t\t\t\t\t", "fils"}], "\n", "\t\t\t\t\t", "]"}]}]}]}], "\n", 
     "\t\t\t\t", "]"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"PackageThrowMessage", "[", "\n", "\t\t\t", 
      RowBox[{"Automatic", ",", "\n", "\t\t\t", 
       RowBox[{"Evaluate", "[", 
        RowBox[{"WebSiteBuild", "::", "nost"}], "]"}]}], "\n", "\t\t\t", 
      "]"}], ";", "\n", "\t\t", "$Failed"}]}], "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"20e3562b-276a-4834-996c-fff830ecae80"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateExport\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"745964bf-dee5-4b42-8d65-4d58eab7dde4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteTEAutoConfig", "[", "\n", "\t", 
   RowBox[{
   "failinput_", ",", "\n", "\t", "fout_", ",", "\n", "\t", "root_", ",", 
    "\n", "\t", "content_", ",", "\n", "\t", "templates_", ",", "\n", "\t", 
    "config_"}], "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"Join", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"<|", "\n", "\t\t\t", 
     RowBox[{"\"\<FilePath\>\"", "\[Rule]", "\n", "\t\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
       RowBox[{
        RowBox[{"SelectFirst", "[", 
         RowBox[{"root", ",", " ", "\n", "\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"StringStartsQ", "[", 
            RowBox[{"fout", ",", " ", "#"}], "]"}], "&"}]}], "\n", 
         "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t\t", 
         RowBox[{
          RowBox[{"f_String", ":>", 
           RowBox[{"FileNameDrop", "[", 
            RowBox[{"fout", ",", " ", 
             RowBox[{
              RowBox[{"FileNameDepth", "[", "f", "]"}], "+", "1"}]}], "]"}]}],
           ",", "\n", "\t\t\t\t\t\t", 
          RowBox[{"_", "\[RuleDelayed]", 
           RowBox[{
            RowBox[{"StringSplit", "[", 
             RowBox[{"fout", ",", " ", "\"\<output\>\""}], "]"}], "[", 
            RowBox[{"[", 
             RowBox[{"-", "1"}], "]"}], "]"}]}]}], "\n", "\t\t\t\t\t\t", 
         "}"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t", "|>"}], ",", 
    "\n", "\t\t", "config"}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"fe75532e-c57e-4c40-9eb4-17082372ca7c"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteTemplateExport", "[", "\n", "\t", 
    RowBox[{
    "failinput_", ",", "\n", "\t", "fout_", ",", "\n", "\t", "root_", ",", 
     "\n", "\t", "content_", ",", "\n", "\t", "templates_", ",", "\n", "\t", 
     "config_"}], "\n", "\t", "]"}], ":=", "\t", "\n", "\t", 
   RowBox[{"Replace", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"WebSiteTemplateApply", "[", "\n", "\t\t\t", 
      RowBox[{
      "root", ",", "\n", "\t\t\t", "content", ",", "\n", "\t\t\t", 
       "templates", ",", "\n", "\t\t\t", 
       RowBox[{"webSiteTEAutoConfig", "[", "\n", "\t\t\t\t", 
        RowBox[{
        "failinput", ",", " ", "fout", ",", " ", "root", ",", " ", "\n", 
         "\t\t\t\t", "content", ",", " ", "templates", ",", " ", "config"}], 
        "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"f_", "->", "html_String"}], ")"}], ":>", "\n", "\t\t\t\t", 
        RowBox[{"With", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"{", "\n", "\t\t\t\t\t\t", 
           RowBox[{"fil", "=", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"Replace", "[", 
             RowBox[{"f", ",", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"WebSiteBuildAttachExtension", "@", "fout"}]}], ",", 
                "\n", "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"s_String", ":>", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                 "FileNameJoin", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Append", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{"Most", "@", 
                    RowBox[{"FileNameSplit", "[", "fout", "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"WebSiteBuildAttachExtension", "@", "s"}]}], "\n",
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}]}], "\n", 
               "\t\t\t\t\t\t\t\t\t", "}"}]}], "]"}]}], "\n", "\t\t\t\t\t\t\t",
            "}"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"If", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{"!", 
              RowBox[{"FileExistsQ", "[", "fil", "]"}]}], "||", 
             RowBox[{"(*", " ", 
              RowBox[{
              "to", " ", "preserve", " ", "the", " ", "modification", " ", 
               "date"}], " ", "*)"}], "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"(", "\n", "\t\t\t\t\t\t\t  ", 
              RowBox[{"html", "=!=", 
               RowBox[{"Quiet", "[", 
                RowBox[{"ReadString", "[", "fil", "]"}], "]"}]}], "\n", 
              "\t\t\t\t\t\t\t    ", 
              RowBox[{"(*", 
               RowBox[{
                RowBox[{
                 RowBox[{
                 "System`Convert`TextDump`PlaintextImport", "[", "fil", "]"}],
                  "[", 
                 RowBox[{"[", "2", "]"}], "]"}], " ", "]"}], "*)"}], "\n", 
              "\t\t\t\t\t\t\t  ", ")"}]}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Quiet", "@", 
              RowBox[{"Close", "[", "fil", "]"}]}], ";", "\n", "\t\t\t\t\t\t", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"!", 
                RowBox[{"DirectoryQ", "@", 
                 RowBox[{"DirectoryName", "[", "fil", "]"}]}]}], ",", "\n", 
               "\t\t\t\t\t\t\t", 
               RowBox[{"CreateDirectory", "[", 
                RowBox[{
                 RowBox[{"DirectoryName", "[", "fil", "]"}], ",", " ", 
                 RowBox[{
                 "CreateIntermediateDirectories", "\[Rule]", "True"}]}], 
                "]"}]}], "\n", "\t\t\t\t\t\t\t", "]"}], ";", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"Export", "[", 
              RowBox[{"fil", ",", " ", "html", ",", " ", "\"\<Text\>\""}], 
              "]"}]}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", 
         "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"e_", ":>", "\n", "\t\t\t\t", 
        RowBox[{"(", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"WebSiteBuildLogError", "[", 
           RowBox[{
           "failinput", ",", " ", "\"\<GenerationFailed\>\"", ",", " ", "e"}],
            "]"}], ";", " ", "\n", "\t\t\t\t\t", 
          RowBox[{"Message", "[", 
           RowBox[{
            RowBox[{"WebSiteBuild", "::", "genfl"}], ",", " ", "failinput"}], 
           "]"}], ";", "$Failed"}], "\n", "\t\t\t\t\t", ")"}]}]}], "\n", 
      "\t\t\t", "}"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"e4afe4bf-419b-42ff-b1d1-69aa1038abbf"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]TemplateExportPaginated\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723297611292035*^9, 
  3.7232976176106663`*^9}},ExpressionUUID->"0de5695f-4100-46fe-8167-\
13bcb0ec524e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteTemplateExportPaginated", "]"}], "=", "\n",
    "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<PageSize\>\"", "\[Rule]", "0"}], ",", "\n", "\t\t", 
     RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteTemplateExportPaginated", "[", "\n", "\t", 
    RowBox[{
    "failInput_", ",", "\n", "\t", "baseName_", ",", "\n", "\t", "dir_", ",", 
     " ", "outDir_", ",", "\n", "\t", "root_", ",", "\n", "\t", "content_", 
     ",", "\n", "\t", "templates_", ",", "\n", "\t", "config_", ",", "\n", 
     "\t", "articles_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Block", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"pageSize", "=", "\n", "\t\t\t\t", 
        RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"page", "=", "\"\<\>\""}]}], "\n", "\t\t\t", "}"}], ",", "\n", 
     "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", 
          RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "Monitor",
          ",", " ", 
         RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"IntegerQ", "[", "pageSize", "]"}], "&&", 
            RowBox[{"pageSize", ">", "0"}], "&&", "\n", "\t\t\t\t\t", 
            RowBox[{"MemberQ", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"\"\<html\>\"", ",", " ", "\"\<\>\""}], "}"}], ",", 
              " ", 
              RowBox[{"FileExtension", "[", "baseName", "]"}]}], "]"}]}], ",",
            "\n", "\t\t\t\t\t", 
           RowBox[{"Table", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"failInput", "<>", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"i", ">", "1"}], ",", " ", 
                  RowBox[{"\"\<, page \>\"", "<>", 
                   RowBox[{"ToString", "[", "i", "]"}]}], ",", " ", 
                  "\"\<\>\""}], "]"}]}], ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"FileNameJoin", "@", 
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{"dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"StringTrim", "[", 
                    RowBox[{"baseName", ",", " ", "\"\<.html\>\""}], "]"}], "<>",
                    "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"i", ">", "1"}], ",", " ", 
                    RowBox[{"ToString", "[", "i", "]"}], ",", " ", 
                    "\"\<\>\""}], "]"}], "<>", "\"\<.html\>\""}]}], "\n", 
                 "\t\t\t\t\t\t\t\t", "}"}]}], ",", "\n", "\t\t\t\t\t\t\t", 
               "root", ",", "\n", "\t\t\t\t\t\t\t", "None", ",", "\n", 
               "\t\t\t\t\t\t\t", "templates", ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"config", ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Set", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"page", ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{
                    "FileNameDrop", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"baseName", "<>", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"i", ">", "1"}], ",", " ", 
                    RowBox[{"ToString", "[", "i", "]"}], ",", " ", 
                    "\"\<\>\""}], "]"}], "<>", "\"\<.html\>\""}]}], "\n", 
                    "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], ",", 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDepth", "[", "outDir", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<IndexListing\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Take", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "articles", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"1", "+", 
                    RowBox[{"pageSize", "*", 
                    RowBox[{"(", 
                    RowBox[{"i", "-", "1"}], ")"}]}]}], ",", " ", 
                    RowBox[{"UpTo", "[", 
                    RowBox[{"pageSize", "*", "i"}], "]"}]}], "}"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"\"\<PaginationCurrent\>\"", "\[Rule]", "i"}], ",",
                    "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<PaginationCount\>\"", "\[Rule]", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Ceiling", "[", 
                    RowBox[{
                    RowBox[{"Length", "[", "articles", "]"}], "/", 
                    "pageSize"}], "]"}]}], ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<PaginationPageSize\>\"", "\[Rule]", "pageSize"}], ",",
                    "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<PaginationPreviousURL\>\"", "->", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"i", ">", "1"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{
                    "FileNameDrop", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"baseName", "<>", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"i", "-", "1"}], ">", "1"}], ",", " ", 
                    RowBox[{"ToString", "[", 
                    RowBox[{"i", "-", "1"}], "]"}], ",", " ", "\"\<\>\""}], 
                    "]"}], "<>", "\"\<.html\>\""}]}], "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], ",", "\n", "\t", 
                    "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDepth", "[", "outDir", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                   "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "\"\<PaginationNextURL\>\"", "->", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"i", "<", 
                    RowBox[{"Ceiling", "[", 
                    RowBox[{
                    RowBox[{"Length", "[", "articles", "]"}], "/", 
                    "pageSize"}], "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{
                    "FileNameDrop", "[", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"baseName", "<>", 
                    RowBox[{"ToString", "[", 
                    RowBox[{"i", "+", "1"}], "]"}], "<>", "\"\<.html\>\""}]}],
                     "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDepth", "[", "outDir", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                  "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                 "Last"}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], "\n", 
              "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"{", 
              RowBox[{"i", ",", " ", 
               RowBox[{"Ceiling", "[", 
                RowBox[{
                 RowBox[{"Length", "[", "articles", "]"}], "/", "pageSize"}], 
                "]"}]}], "}"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{"failInput", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"FileNameJoin", "@", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"WebSiteBuildAttachExtension", "@", "baseName"}]}], 
               "\n", "\t\t\t\t\t\t\t\t", "}"}]}], ",", "\n", "\t\t\t\t\t\t", 
             "root", ",", "\n", "\t\t\t\t\t\t", "None", ",", "\n", 
             "\t\t\t\t\t\t", "templates", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Merge", "[", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"config", ",", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                 "\"\<IndexListing\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t", 
                  "articles"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{"\"\<URL\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Set", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"page", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "FileNameDrop", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "dir", ",", " ", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildAttachExtension", "@", "baseName"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "}"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDepth", "[", "outDir", "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
               "Last"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
            "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";"}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t", 
         RowBox[{"TemplateApply", "[", 
          RowBox[{"\"\<Generating ``\>\"", ",", " ", "page"}], "]"}]}]}], 
       "\n", "\t\t\t\t", "]"}], ";"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"6a77f0aa-9eb0-4ada-a2df-c0a022036699"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ImportMeta\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712582203353249*^9, 
  3.712582212388088*^9}},ExpressionUUID->"13b1deb5-d9b0-4415-afa6-\
018cabe6b778"],

Cell[BoxData[
 RowBox[{
  RowBox[{"prepMetaContent", "[", 
   RowBox[{"n_", ",", " ", "c_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"n", "->", "\n", "\t\t", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"MemberQ", "[", 
       RowBox[{"$DefaultWebSiteAggregationTypes", ",", " ", "n"}], "]"}], "||",
       "\n", "\t", "\t\t", 
      RowBox[{"StringContainsQ", "[", 
       RowBox[{"c", ",", " ", "\n", "\t", "\t\t\t", 
        RowBox[{"Repeated", "[", "\n", "\t", "\t\t\t\t", 
         RowBox[{
          RowBox[{"__", "~~", 
           RowBox[{"Except", "[", 
            RowBox[{"WhitespaceCharacter", "|", "\"\<,\>\""}], "]"}], "~~", 
           "\"\<,\>\"", "~~", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Except", "[", 
            RowBox[{"WhitespaceCharacter", "|", "\"\<,\>\""}], "]"}]}], ",", 
          "\n", "\t", "\t\t\t\t", 
          RowBox[{"{", "2", "}"}]}], "\n", "\t", "\t\t\t\t", "]"}]}], "\n", 
       "\t", "\t\t\t", "]"}], "||", "\n", "\t", "\t\t", 
      RowBox[{"StringMatchQ", "[", 
       RowBox[{"c", ",", " ", "\n", "\t", "\t\t\t", 
        RowBox[{
         RowBox[{"WordCharacter", ".."}], "~~", 
         RowBox[{"Except", "[", 
          RowBox[{"WhitespaceCharacter", "|", "\"\<,\>\""}], "]"}], "~~", 
         "\"\<,\>\"", "~~", "\n", "\t", "\t\t\t\t", 
         RowBox[{"Except", "[", 
          RowBox[{"WhitespaceCharacter", "|", "\"\<,\>\""}], "]"}], "~~", 
         RowBox[{"WordCharacter", ".."}]}]}], "\n", "\t", "\t\t\t", "]"}]}], 
     ",", "\n", "\t", "\t\t", 
     RowBox[{"StringTrim", "@", 
      RowBox[{"StringSplit", "[", 
       RowBox[{"c", ",", "\"\<,\>\""}], "]"}]}], ",", "\n", "\t", "\t\t", 
     "c"}], "\n", "\t", "\t\t", 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"cd223345-5f86-45ed-bafb-2c01dc5f5768"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteImportMeta", "[", 
    RowBox[{"xml", ":", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        RowBox[{"XMLObject", "[", "___", "]"}], "[", "___", "]"}], "|", 
       RowBox[{"XMLElement", "[", 
        RowBox[{"\"\<html\>\"", ",", "___"}], "]"}]}], ")"}]}], "]"}], ":=", 
   "\n", "\t", 
   RowBox[{"WebSiteImportMeta", "/@", "\n", "\t\t", 
    RowBox[{"Cases", "[", 
     RowBox[{"xml", ",", "\n", "\t", "\t\t", 
      RowBox[{"XMLElement", "[", 
       RowBox[{"\"\<meta\>\"", ",", "__"}], "]"}], ",", "\n", "\t\t\t", 
      "\[Infinity]"}], "\n", "\t\t\t", "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteImportMeta", "[", 
    RowBox[{"XMLElement", "[", 
     RowBox[{"\"\<meta\>\"", ",", "info_", ",", "_"}], "]"}], "]"}], ":=", 
   "\n", "\t", 
   RowBox[{"Replace", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Lookup", "[", 
      RowBox[{"info", ",", " ", 
       RowBox[{"{", 
        RowBox[{"\"\<name\>\"", ",", " ", "\"\<content\>\""}], "}"}], ",", 
       " ", "Nothing"}], "]"}], ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"n_", ",", "c_"}], "}"}], "\[RuleDelayed]", "\n", "\t", 
        "\t\t\t", 
        RowBox[{"prepMetaContent", "[", 
         RowBox[{"n", ",", " ", "c"}], "]"}]}], ",", "\n", "\t", "\t\t", 
       RowBox[{"_", "\[Rule]", "Nothing"}]}], "\n", "\t\t\t", "}"}]}], "\n", 
    "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"f1aeb02e-105b-456a-b6b1-7f6f664fa63c"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ContentStackPrep\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.723325303136363*^9, 
  3.723325305307074*^9}},ExpressionUUID->"0be53591-b192-4f0b-937a-\
d9da76cd86e8"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteContentStackPrep", "]"}], "=", "\n", "\t", 
   
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{"\"\<ContentSortingFunction\>\"", "\[Rule]", "None"}], "\n", 
    "\t\t", "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteContentStackPrep", "[", 
   RowBox[{"ops", ":", 
    RowBox[{"OptionsPattern", "[", "]"}]}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"sort", "=", 
      RowBox[{"OptionValue", "[", "\"\<ContentSortingFunction\>\"", "]"}]}], 
     "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"AssociationQ", "@", "$WebSiteBuildContentStack"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"sort", "=!=", "None"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"With", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"a", "=", 
             RowBox[{"SortBy", "[", 
              RowBox[{"$WebSiteBuildContentStack", ",", " ", "sort"}], 
              "]"}]}], "}"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"AssociationQ", "@", "a"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"$WebSiteBuildContentStack", "=", "a"}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
        "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
       RowBox[{"$WebSiteBuildContentDataStack", "=", "\n", "\t", "\t\t\t", 
        RowBox[{"Association", "@", "\n", "\t", "\t\t\t\t", 
         RowBox[{"Map", "[", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"\"\<Attributes\>\"", ",", " ", "\"\<URL\>\""}], "]"}], 
             "->", "#"}], "&"}], ",", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Values", "@", "$WebSiteBuildContentStack"}]}], "\n", "\t",
           "\t\t\t\t\t", "]"}]}]}], ";", "\n", "\t", "\t\t", 
       RowBox[{"$WebSiteBuildAggStack", "=", "\n", "\t", "\t\t\t", 
        RowBox[{"<|", "\n", "\t", "\t\t\t\t", 
         RowBox[{"(*", " ", 
          RowBox[{
          "A", " ", "function", " ", "for", " ", "getting", " ", "object", 
           " ", "attributes", " ", "by", " ", "file", " ", "name"}], " ", 
          "*)"}], "\n", "\t", "\t\t\t\t", 
         RowBox[{
          RowBox[{"\"\<ContentStack\>\"", "->", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Function", "[", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{"Lookup", "[", 
             RowBox[{
             "$WebSiteBuildContentStack", ",", " ", "#", ",", "\n", "\t", 
              "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "$WebSiteBuildContentDataStack", ",", " ", "#", ",", " ", 
                "None"}], "]"}]}], "\n", "\t", "\t\t\t\t\t\t\t", "]"}], "\n", 
            "\t", "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t", "\t\t\t\t", 
          RowBox[{"(*", " ", 
           RowBox[{
           "This", " ", "is", " ", "filled", " ", "in", " ", "later", " ", 
            "by", " ", "the", " ", "aggregation", " ", "generator", " ", 
            RowBox[{"(", 
             RowBox[{"if", " ", "aggregations", " ", "turned", " ", "on"}], 
             ")"}]}], " ", "*)"}], "\n", "\t", "\t\t\t\t", 
          RowBox[{
          "\"\<AggregationStack\>\"", "->", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Function", "@", 
            RowBox[{"PackageThrowMessage", "[", 
             RowBox[{
             "\"\<SiteBuilder\>\"", ",", " ", 
              "\"\<Aggregations not turned on\>\""}], "]"}]}]}], ",", "\n", 
          "\t", "\t\t\t\t", 
          RowBox[{"(*", " ", 
           RowBox[{
           "A", " ", "function", " ", "for", " ", "getting", " ", "object", 
            " ", "attributes", " ", "by", " ", "file", " ", "name"}], " ", 
           "*)"}], "\n", "\t", "\t", "\t", "\t", "\t", 
          RowBox[{"\"\<ContentData\>\"", "->", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Function", "[", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{"Lookup", "[", "\n", "\t", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Lookup", "[", "\n", "\t", "\t\t\t\t\t\t\t\t", 
               RowBox[{
               "$WebSiteBuildContentDataStack", ",", " ", "#", ",", "\n", 
                "\t", "\t\t\t\t\t\t\t\t", 
                RowBox[{"Lookup", "[", 
                 RowBox[{"$WebSiteBuildContentStack", ",", " ", "#", ",", " ", 
                  RowBox[{"<|", "|>"}]}], "]"}]}], "\n", "\t", 
               "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t\t\t\t\t\t\t", 
              "\"\<Attributes\>\"", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
              RowBox[{"<|", "|>"}]}], "\n", "\t", "\t\t\t\t\t\t\t", "]"}], 
            "\n", "\t", "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t", "\t\t\t\t", 
          
          RowBox[{"(*", " ", 
           RowBox[{
           "A", " ", "function", " ", "for", " ", "choosing", " ", "objects", 
            " ", "by", " ", "the", " ", "template", " ", "used"}], " ", 
           "*)"}], "\n", "\t", "\t\t\t\t", 
          RowBox[{"\"\<SelectObjects\>\"", "->", "\n", "\t", "\t", "\t\t\t\t", 
           RowBox[{"Function", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"type", "=", 
                RowBox[{
                 RowBox[{"StringTrim", "[", 
                  RowBox[{
                   RowBox[{"ToLowerCase", "[", "#", "]"}], ",", " ", 
                   "\"\<.html\>\""}], "]"}], "<>", "\"\<.html\>\""}]}], "}"}],
               ",", "\n", "\t", "\t\t\t\t\t\t\t", 
              RowBox[{"Select", "[", "\n", "\t", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Values", "@", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"$WebSiteBuildContentStack", "[", 
                  RowBox[{"[", 
                   RowBox[{"All", ",", " ", "\"\<Attributes\>\""}], "]"}], 
                  "]"}]}], ",", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"MemberQ", "[", 
                  RowBox[{
                   RowBox[{"#", "[", "\"\<Templates\>\"", "]"}], ",", " ", 
                   "type"}], "]"}], "&"}]}], "\n", "\t", "\t\t\t\t\t\t\t\t", 
               "]"}]}], "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", "]"}], "\n",
             "\t", "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t", "\t\t\t\t", 
          RowBox[{"(*", " ", 
           RowBox[{
           "A", " ", "function", " ", "for", " ", "getting", " ", "objects", 
            " ", "sorted", " ", "by", " ", "some", " ", "function"}], " ", 
           "*)"}], "\n", "\t", "\t\t\t\t", 
          RowBox[{"\"\<SortedObjectsBy\>\"", "->", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Function", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"order", "=", "#"}], ",", "\n", "\t", 
                "\t\t\t\t\t\t\t", 
                RowBox[{"pageType", "=", 
                 RowBox[{"If", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"Length", "@", 
                    RowBox[{"{", "##", "}"}]}], ">", "1"}], ",", " ", 
                   RowBox[{
                    RowBox[{"{", "##", "}"}], "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", " ", 
                   "\"\<article\>\""}], "]"}]}]}], "\n", "\t", 
               "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"SortBy", "[", "order", "]"}], "@", "\n", "\t", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{
                "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", "]"}], 
                "[", "pageType", "]"}]}]}], "\n", "\t", "\t\t\t\t\t\t\t", 
             "]"}], "\n", "\t", "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t", 
          "\t\t\t\t", 
          RowBox[{"(*", " ", 
           RowBox[{
           "A", " ", "function", " ", "for", " ", "getting", " ", "the", " ", 
            "next", " ", "object", " ", "by", " ", "some", " ", "function"}], 
           " ", "*)"}], "\n", "\t", "\t\t\t\t", 
          RowBox[{"\"\<NextObjectBy\>\"", "->", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Function", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"self", "=", "#"}], ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{"order", "=", "#2"}], ",", "\n", "\t", 
                "\t\t\t\t\t\t\t", 
                RowBox[{"pageType", "=", 
                 RowBox[{"If", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"Length", "@", 
                    RowBox[{"{", "##", "}"}]}], ">", "2"}], ",", " ", 
                   RowBox[{
                    RowBox[{"{", "##", "}"}], "[", 
                    RowBox[{"[", "3", "]"}], "]"}], ",", " ", 
                   "\"\<article\>\""}], "]"}]}]}], "\n", "\t", 
               "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t\t\t\t\t\t\t", 
              RowBox[{"With", "[", "\n", "\t", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"sorted", "=", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"SortBy", "[", "order", "]"}], "@", "\n", 
                   "\t\t\t\t\t\t\t\t\t\t\t  ", 
                   RowBox[{
                    RowBox[{
                    "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", 
                    "]"}], "[", "pageType", "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", 
                "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"With", "[", 
                 RowBox[{
                  RowBox[{"{", 
                   RowBox[{"pos", "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"FirstPosition", "[", 
                    RowBox[{"sorted", ",", " ", "self"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "+", "1"}]}], "}"}], ",", 
                  "\n", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"pos", "<=", 
                    RowBox[{"Length", "@", "sorted"}]}], "//", "TrueQ"}], ",",
                     "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"sorted", "[", 
                    RowBox[{"[", "pos", "]"}], "]"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", "\t", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
                 "\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
               "\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t\t\t\t\t\t\t", 
             "]"}], "\n", "\t", "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t", 
          "\t\t\t\t", 
          RowBox[{"(*", " ", 
           RowBox[{
           "A", " ", "function", " ", "for", " ", "getting", " ", "the", " ", 
            "previous", " ", "object", " ", "by", " ", "some", " ", 
            "function"}], " ", "*)"}], "\n", "\t", "\t\t\t\t", 
          RowBox[{
          "\"\<PreviousObjectBy\>\"", "->", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Function", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"self", "=", "#"}], ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{"order", "=", "#2"}], ",", "\n", "\t", 
                "\t\t\t\t\t\t\t", 
                RowBox[{"pageType", "=", 
                 RowBox[{"If", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"Length", "@", 
                    RowBox[{"{", "##", "}"}]}], ">", "2"}], ",", " ", 
                   RowBox[{
                    RowBox[{"{", "##", "}"}], "[", 
                    RowBox[{"[", "3", "]"}], "]"}], ",", " ", 
                   "\"\<article\>\""}], "]"}]}]}], "\n", "\t", 
               "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t\t\t\t\t\t\t", 
              RowBox[{"With", "[", "\n", "\t", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"sorted", "=", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"SortBy", "[", "order", "]"}], "@", "\n", 
                   "\t\t\t\t\t\t\t\t\t\t\t  ", 
                   RowBox[{
                    RowBox[{
                    "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", 
                    "]"}], "[", "pageType", "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", 
                "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"With", "[", 
                 RowBox[{
                  RowBox[{"{", 
                   RowBox[{"pos", "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"FirstPosition", "[", 
                    RowBox[{"sorted", ",", " ", "self"}], "]"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "-", "1"}]}], "}"}], ",", 
                  "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"pos", ">", "0"}], "//", "TrueQ"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"sorted", "[", 
                    RowBox[{"[", "pos", "]"}], "]"}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", "None"}], "\n", "\t", 
                   "\t\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
                 "\t\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
               "\t\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t\t\t\t\t\t\t", 
             "]"}], "\n", "\t", "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t", 
          "\t\t\t\t", 
          RowBox[{"(*", " ", 
           RowBox[{"The", " ", "pages"}], " ", "*)"}], "\n", "\t", "\t", "\t",
           "\t", "\t", 
          RowBox[{"\"\<Pages\>\"", ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{
            "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", "]"}], 
            "[", "\"\<page.html\>\"", "]"}]}], ",", "\n", "\t", "\t\t\t\t", 
          RowBox[{"(*", " ", 
           RowBox[{"The", " ", "articles"}], " ", "*)"}], "\n", "\t", "\t", 
          "\t", "\t", "\t", 
          RowBox[{"\"\<Articles\>\"", ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{
            "$WebSiteBuildAggStack", "[", "\"\<SelectObjects\>\"", "]"}], 
            "[", "\"\<article.html\>\"", "]"}]}], ",", "\n", "\t", "\t\t\t\t", 
          RowBox[{"(*", " ", 
           RowBox[{"The", " ", "archives"}], " ", "*)"}], "\n", "\t", "\t", 
          "\t", "\t", "\t", 
          RowBox[{"\"\<Archives\>\"", ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Reverse", "@", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{"GatherBy", "[", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", 
             RowBox[{
              RowBox[{
              "Values", "@", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
               RowBox[{"$WebSiteBuildContentStack", "[", 
                RowBox[{"[", 
                 RowBox[{"All", ",", "\"\<Attributes\>\""}], "]"}], "]"}]}], 
              ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", 
              RowBox[{
               RowBox[{"#", "[", "\"\<Date\>\"", "]"}], "&"}]}], "\n", "\t", 
             "\t\t\t\t\t\t\t", "]"}]}]}]}], "\n", "\t", "\t\t\t\t", "|>"}]}], 
       ";"}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"ce32f406-de24-4ebc-a8ef-6e9302b1f310"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ExtractPageData\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712671619319853*^9, 
  3.712671623070841*^9}},ExpressionUUID->"9e0fd1fa-b7ad-4f25-9bdf-\
375fe808cce3"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteExtractFileData\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"9abb3339-e46a-4a86-b19c-faf34d30484f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "nost"}], "=", 
   "\"\<$WebSiteBuildContentStack not initialzed\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteExtractFileData", "[", 
    RowBox[{"root_", ",", " ", "content_", ",", " ", "config_"}], "]"}], ":=",
    "\n", "\t", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"AssociationQ", "@", "$WebSiteBuildContentStack"}], ",", "\n", 
     "\t\t", 
     RowBox[{"Module", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
        "fileContent", ",", "\n", "\t\t\t\t", "args", ",", "\n", "\t\t\t\t", 
         "cname"}], "\n", "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"fileContent", "=", "\n", "\t\t\t\t", 
         RowBox[{"Replace", "[", 
          RowBox[{"content", ",", 
           RowBox[{"{", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_File", "|", "_String"}], ")"}], "?", "FileExistsQ"}],
              "\[RuleDelayed]", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Switch", "[", 
              RowBox[{
               RowBox[{"FileExtension", "[", "content", "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t", "\"\<md\>\"", ",", "\n", "\t\t\t\t\t\t\t\t", 
               
               RowBox[{"MarkdownToXML", "[", 
                RowBox[{"Import", "[", 
                 RowBox[{"content", ",", " ", "\"\<Text\>\""}], "]"}], "]"}], 
               ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"\"\<html\>\"", "|", "\"\<xml\>\""}], ",", "\n", 
               "\t\t\t\t\t\t\t\t", 
               RowBox[{"Import", "[", 
                RowBox[{"content", ",", " ", 
                 RowBox[{"{", 
                  RowBox[{"\"\<HTML\>\"", ",", "\"\<XMLObject\>\""}], "}"}]}],
                 "]"}]}], "\n", "\t", "\t\t\t\t\t\t", "]"}]}], "\n", 
            "\t\t\t\t\t", "}"}]}], "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{"cname", "=", 
         RowBox[{"webSitePrepContentName", "[", 
          RowBox[{"content", ",", " ", "root"}], "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{"args", "=", "\n", "\t\t\t\t", 
         RowBox[{"Merge", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{"config", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Replace", "[", 
              RowBox[{"fileContent", ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"XMLObject", "[", "___", "]"}], "[", "___", "]"}],
                     "|", 
                    RowBox[{"XMLElement", "[", 
                    RowBox[{"\"\<html\>\"", ",", "___"}], "]"}]}], ")"}], 
                  "\[RuleDelayed]", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"KeyDrop", "[", 
                   RowBox[{
                    RowBox[{"WebSiteImportMeta", "[", "fileContent", "]"}], 
                    ",", " ", "\"\<URL\>\""}], "]"}]}], ",", "\n", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"_", "\[Rule]", 
                  RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t\t\t", "}"}]}], 
              "\n", "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"\"\<SourceFile\>\"", "\[Rule]", "content"}]}], "\n", 
            "\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", "Last"}], "\n", 
          "\t\t\t\t\t", "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"cname", "=!=", "None"}], ",", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"$WebSiteBuildContentStack", "[", "cname", "]"}], "=", 
            "\n", "\t\t\t\t\t", 
            RowBox[{"<|", "\n", "\t\t\t\t\t\t", 
             RowBox[{"\"\<Attributes\>\"", "->", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"WebSiteTemplateGatherArgs", "[", 
               RowBox[{"fileContent", ",", " ", "args"}], "]"}]}], "\n", 
             "\t\t\t\t\t\t", "|>"}]}], ";", "\n", "\t\t\t\t", 
           RowBox[{
            RowBox[{"$WebSiteBuildContentStack", "[", 
             RowBox[{"cname", ",", " ", "\"\<Content\>\""}], "]"}], "=", "\n",
             "\t\t\t\t\t", 
            RowBox[{"WebSiteTemplatePreProcess", "[", 
             RowBox[{"fileContent", ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{"$WebSiteBuildContentStack", "[", 
               RowBox[{"cname", ",", " ", "\"\<Attributes\>\""}], "]"}]}], 
             "\n", "\t\t\t\t\t\t", "]"}]}], ";"}]}], "\n", "\t\t\t\t", "]"}], 
        ";"}]}], "\n", "\t\t\t", "]"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Message", "[", 
       RowBox[{"WebSiteBuild", "::", "nost"}], "]"}], ";", "\n", "\t\t", 
      "$Failed"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"8cb5974e-5d19-4db0-8952-1def0fadec36"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteExtractPageData\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"bb1dcfcf-d391-4342-9d7c-425642eb67e9"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteExtractPageData", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Monitor", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "None"}]}], "\n", "\t\t", 
    "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteExtractPageData", "[", 
    RowBox[{"rootDir_", ",", " ", "files_", ",", "config_", ",", " ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Block", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"extractfile", "=", "\"\<\>\""}], ",", "\n", "\t\t\t", 
       RowBox[{"lb", "=", 
        RowBox[{"OptionValue", "[", "\"\<LastBuild\>\"", "]"}]}]}], "\n", 
      "\t\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "Monitor", 
        ",", " ", 
        RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"Module", "[", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"fname", "=", "\n", "\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{"#", ",", "\n", "\t", "\t", "\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"f", ":", 
                  RowBox[{"Except", "[", 
                   RowBox[{"_String", "|", "_File"}], "]"}]}], 
                 "\[RuleDelayed]", "\n", "\t", "\t", "\t", "\t\t\t\t\t", 
                 RowBox[{"ExpandFileName", "@", 
                  RowBox[{"First", "[", "f", "]"}]}]}]}], "\n", "\t", 
               "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t", "\t\t\t\t", 
             RowBox[{"templates", "=", "\n", "\t", "\t\t\t\t\t", 
              RowBox[{"Flatten", "@", 
               RowBox[{"List", "@", "\n", "\t", "\t\t\t\t\t", 
                RowBox[{"Replace", "[", 
                 RowBox[{"#", ",", 
                  RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"r", ":", 
                    RowBox[{"Except", "[", 
                    RowBox[{"_String", "|", "_File"}], "]"}]}], 
                    "\[RuleDelayed]", "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{"Last", "[", "r", "]"}]}], ",", "\n", "\t", 
                    "\t\t\t\t\t\t", 
                    RowBox[{"_", "\[Rule]", "\"\<base.html\>\""}]}], "\n", 
                   "\t\t\t\t\t\t\t", "}"}]}], "]"}]}]}]}], ",", "\n", 
             "\t\t\t\t\t", "cname"}], "\n", "\t\t\t\t\t", "}"}], ",", "\n", 
           "\t\t\t\t", 
           RowBox[{
            RowBox[{"extractfile", "=", "fname"}], ";", "\n", "\t\t\t\t", 
            RowBox[{"cname", "=", 
             RowBox[{"webSitePrepContentName", "[", 
              RowBox[{"fname", ",", " ", "rootDir"}], "]"}]}], ";", "\n", 
            "\t\t\t\t", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"KeyFreeQ", "[", 
                RowBox[{"$WebSiteBuildContentStack", ",", " ", "cname"}], 
                "]"}], "||", "\n", "\t\t\t\t\t\t", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"!", 
                  RowBox[{"DateObjectQ", "[", "lb", "]"}]}], "||", 
                 RowBox[{"lb", "<=", 
                  RowBox[{"FileDate", "[", 
                   RowBox[{"fname", ",", " ", "\"\<Modification\>\""}], 
                   "]"}]}]}], ")"}]}], ",", "\n", "\t\t\t\t\t", 
              RowBox[{"WebSiteExtractFileData", "[", "\n", "\t\t\t\t\t\t", 
               RowBox[{
               "rootDir", ",", "\n", "\t\t\t\t\t\t", "fname", ",", "\n", 
                "\t\t\t\t\t\t", 
                RowBox[{"Merge", "[", "\n", "\t", "\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t", 
                   RowBox[{"config", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<Templates\>\"", "->", "\n", "\t", "\t\t\t\t\t\t\t\t",
                     "templates"}], ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<FilePath\>\"", "->", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    
                    RowBox[{"WebSiteBuildFilePath", "[", 
                    RowBox[{"fname", ",", " ", "rootDir"}], "]"}]}]}], "\n", 
                   "\t", "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                  "\t\t\t\t\t\t", "Last"}], "\n", "\t", "\t\t\t\t\t\t", 
                 "]"}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", 
             "]"}]}]}], "\n", "\t\t\t\t", "]"}], "&"}], "/@", "files"}], ",", 
       "\n", "\t\t\t", 
       RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t", 
        RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
         "\"\<Extracting data from ``\>\"", ",", "\n", "\t\t\t\t\t", 
          "extractfile"}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", 
      "]"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"b3a0023c-402d-462c-88ec-e7d8920333ff"]\

}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]CopyTheme\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712537745851767*^9, 
  3.712537747002632*^9}},ExpressionUUID->"481baf2f-8b05-469b-973c-\
0f9bb9c4b75e"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteCopyTheme\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,
 CellLabel->
  "In[123]:=",ExpressionUUID->"8ab47559-3284-45fb-b5ea-cf9437ce42ed"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteCopyTheme", "[", 
   RowBox[{"outDir_", ",", " ", "thm_", ",", " ", "mon_"}], "]"}], ":=", "\n",
   "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"fils", "=", 
      RowBox[{
       RowBox[{"Select", "[", 
        RowBox[{"Not", "@*", "DirectoryQ"}], "]"}], "@", 
       RowBox[{"FileNames", "[", 
        RowBox[{"\"\<*\>\"", ",", "thm", ",", "\[Infinity]"}], "]"}]}]}], 
     "}"}], ",", "\n", "\t\t", 
    RowBox[{"Block", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{"copyfile", ",", "\n", "\t\t\t\t", "newfile"}], "\n", 
       "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", "mon"}], ",", " ", "Monitor", ",", " ", 
         RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"With", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"{", "\n", "\t\t\t\t\t\t", 
             RowBox[{"newf", "=", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"FileNameJoin", "@", 
               RowBox[{"{", 
                RowBox[{
                "outDir", ",", " ", "\"\<theme\>\"", ",", "\n", "\t", "\t", 
                 "\t", "\t\t\t\t\t", 
                 RowBox[{"FileNameDrop", "[", 
                  RowBox[{"#", ",", " ", 
                   RowBox[{"FileNameDepth", "[", "thm", "]"}]}], "]"}]}], 
                "\n", "\t", "\t", "\t", "\t\t\t\t\t", "}"}]}]}], "\n", 
             "\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"!", 
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"FileExistsQ", "[", "newf", "]"}], "&&", 
                  RowBox[{
                   RowBox[{"FileHash", "[", "#", "]"}], "==", 
                   RowBox[{"FileHash", "[", "newf", "]"}]}]}], ")"}]}], ",", 
               "\n", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"copyfile", "=", "#"}], ";", "\n", "\t\t\t\t\t\t", 
                RowBox[{"newfile", "=", "newf"}], ";", "\n", "\t\t\t\t\t\t", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"!", 
                   RowBox[{"DirectoryQ", "@", 
                    RowBox[{"DirectoryName", "@", "newf"}]}]}], ",", "\n", 
                  "\t", "\t", "\t\t\t\t\t", 
                  RowBox[{"CreateDirectory", "[", 
                   RowBox[{
                    RowBox[{"DirectoryName", "@", "newf"}], ",", "\n", "\t", 
                    "\t", "\t\t\t\t\t\t", 
                    RowBox[{
                    "CreateIntermediateDirectories", "\[Rule]", "True"}]}], 
                   "\n", "\t", "\t", "\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
                 "\t", "\t\t\t\t\t", "]"}], ";", "\n", "\t", "\t", "\t\t\t\t", 
                RowBox[{"CopyFile", "[", 
                 RowBox[{"#", ",", "newf", ",", 
                  RowBox[{"OverwriteTarget", "\[Rule]", "True"}]}], "]"}]}]}],
               "\n", "\t\t\t\t\t\t", "]"}], ";", "\n", "\t\t\t\t\t", 
             RowBox[{"copyfile", "=."}], ";", "\n", "\t\t\t\t\t", 
             RowBox[{"newfile", "=."}], ";"}]}], "\n", "\t\t\t\t\t", "]"}], 
          "&"}], "/@", "fils"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"AllTrue", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"copyfile", ",", "newfile"}], "}"}], ",", "StringQ"}], 
            "]"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"TemplateApply", "[", 
            RowBox[{"\"\<Copying `` to ``\>\"", ",", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"copyfile", ",", "\n", "\t\t\t\t\t\t\t\t", "newfile"}], 
              "\n", "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t", 
            "]"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
            "\"\<Copying theme ``\>\"", ",", "\n", "\t\t\t\t\t\t\t", "thm"}], 
            "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], 
       "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"4997e7ee-16d5-435a-b450-59f547b6aef4"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteCopyTheme\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"1912dbd7-b6be-4493-8beb-138d83d4f382"],

Cell[BoxData[
 RowBox[{"WebSiteCopyTheme", "//", "Clear"}]], "CodeInput",
 CellChangeTimes->{{3.7206493467372713`*^9, 
  3.720649347545315*^9}},ExpressionUUID->"1fbda80f-67f4-4167-92da-\
6b5d0845ee15"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteCopyTheme", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{"Monitor", "\[Rule]", "True"}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteCopyTheme", "[", 
   RowBox[{"dir_", ",", "outDir_", ",", " ", "theme_", ",", "\n", "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"thm", "=", "\n", "\t\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", "\n", "\t", "\t\t\t\t", 
         RowBox[{
          RowBox[{"WebSiteFindTheme", "[", 
           RowBox[{"dir", ",", " ", "theme", ",", " ", 
            RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}], 
          ",", "\n", "\t", "\t", "\t\t\t", "\"\<static\>\""}], "\n", 
         "\t\t\t\t\t", "}"}]}]}], ",", "\n", "\t\t\t", 
      RowBox[{"common", "=", "\n", "\t\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
         "$WebSiteTemplateLibDirectory", ",", "\n", "\t\t\t\t\t", 
          "\"\<static\>\""}], "\n", "\t\t\t\t\t", "}"}]}]}]}], "\n", "\t\t\t",
      "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Quiet", "@", 
      RowBox[{"CreateDirectory", "[", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"outDir", ",", " ", "\"\<theme\>\""}], "}"}]}], "]"}]}], ";",
      "\n", "\t\t", 
     RowBox[{"webSiteCopyTheme", "[", 
      RowBox[{"outDir", ",", " ", "common", ",", " ", 
       RowBox[{"TrueQ", "@", 
        RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "]"}], ";", "\n", 
     "\t\t", 
     RowBox[{"webSiteCopyTheme", "[", 
      RowBox[{"outDir", ",", " ", "thm", ",", " ", 
       RowBox[{"TrueQ", "@", 
        RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "]"}], ";", "\n", 
     "\t\t", 
     RowBox[{"FileNameJoin", "@", 
      RowBox[{"{", 
       RowBox[{"outDir", ",", "\"\<theme\>\""}], "}"}]}]}]}], "\n", "\t", 
   "\t", "]"}]}]}], \
"CodeInput",ExpressionUUID->"37958cb3-22e4-4d65-a7fd-a44139326f33"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]CopyContent\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7125936627358007`*^9, 
  3.7125936645108232`*^9}},ExpressionUUID->"0fa38beb-67e9-4b46-b25b-\
96e8df9bba86"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteCopyContentSpec\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"3dd9f556-9b95-4a4a-8c7d-0e6b2917e6b8"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"webSiteCopyContentSpec", "//", "Clear"}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"webSiteCopyContentSpec", "[", 
    RowBox[{"True", "|", "Automatic"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Except", "[", 
    RowBox[{"\"\<posts\>\"", "|", "\"\<pages\>\""}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"webSiteCopyContentSpec", "[", 
    RowBox[{"l", ":", 
     RowBox[{"{", "__String", "}"}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", "l"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"webSiteCopyContentSpec", "[", 
    RowBox[{"l", ":", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"_String", "|", 
         RowBox[{"{", "__String", "}"}]}], ")"}], "..."}], "}"}]}], "]"}], ":=",
    "\n", "\t", 
   RowBox[{"webSiteCopyContentSpec", "[", 
    RowBox[{"Replace", "[", 
     RowBox[{"l", ",", " ", 
      RowBox[{
       RowBox[{"f", ":", 
        RowBox[{"{", "__String", "}"}]}], "\[RuleDelayed]", 
       RowBox[{"FileNameJoin", "[", "f", "]"}]}], ",", " ", "1"}], "]"}], 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"webSiteCopyContentSpec", "[", "e_", "]"}], ":=", "\n", "\t", 
   "e"}], ";"}]}], \
"CodeInput",ExpressionUUID->"1d18cd9e-2adc-48a4-b14d-bf347e126c05"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteCopyContent\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"66b2b498-421a-4bdf-b5b0-e0075a679dc2"],

Cell[BoxData[
 RowBox[{"Clear", "[", 
  RowBox[{"iWebSiteCopyContent", ",", " ", "WebSiteCopyContent"}], 
  "]"}]], "CodeInput",ExpressionUUID->"fab5fda5-a96a-4fc1-af1c-5b4e125dd9a7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteCopyContent", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{"Monitor", "\[Rule]", "True"}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"Options", "[", "iWebSiteCopyContent", "]"}], "=", "\n", "\t", 
  RowBox[{"Options", "[", "WebSiteCopyContent", "]"}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"iWebSiteCopyContent", "[", "\n", "\t", 
    RowBox[{"dir_", ",", "\n", "\t", "outDir_", ",", "\n", "\t", 
     RowBox[{"sel", ":", "_"}], ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t", 
      RowBox[{
       RowBox[{"selPat", "=", "sel"}], ",", "\n", "\t\t", 
       RowBox[{"contDir", "=", "\n", "\t\t\t", 
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"{", 
          RowBox[{"dir", ",", " ", "\"\<content\>\""}], "}"}]}]}], 
       RowBox[{"(*", " ", 
        RowBox[{"TODO", ":", " ", 
         RowBox[{"generalize", " ", "this", " ", "path"}]}], " ", "*)"}], ",",
        "\n", "\t\t", 
       RowBox[{"monitor", "=", "\n", "\t\t\t", 
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}]}], "\n", "\t\t", 
      "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"With", "[", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t", 
         RowBox[{"fils", "=", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{"Select", "[", "\n", "\t\t\t\t\t", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"StringPattern`StringPatternQ", "[", "selPat", "]"}], 
              ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"StringMatchQ", "[", 
                RowBox[{
                 RowBox[{"FileNameTake", "[", 
                  RowBox[{"#", ",", " ", 
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"FileNameDepth", "[", "contDir", "]"}], "+", 
                    "1"}], "}"}]}], "]"}], ",", " ", "selPat"}], "]"}], "&"}],
               ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"MatchQ", "[", 
                RowBox[{
                 RowBox[{"FileNameTake", "[", 
                  RowBox[{"#", ",", " ", 
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"FileNameDepth", "[", "contDir", "]"}], "+", 
                    "1"}], "}"}]}], "]"}], ",", " ", "selPat"}], "]"}], 
               "&"}]}], "\n", "\t\t\t\t\t\t", "]"}], "\n", "\t\t\t\t\t", 
            "]"}], "@", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Select", "[", 
             RowBox[{"Not", "@*", "DirectoryQ"}], "]"}], "@", "\n", "\t", 
            "\t", "\t\t\t\t", 
            RowBox[{"FileNames", "[", 
             RowBox[{"\"\<*\>\"", ",", "contDir", ",", "\[Infinity]"}], 
             "]"}]}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t\t", 
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", "\n", "\t\t\t\t", 
           RowBox[{"copyfile", ",", "\n", "\t\t\t\t", "newfile"}], "\n", 
           "\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{"monitor", ",", " ", "Monitor", ",", " ", 
             RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"With", "[", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t", 
                 RowBox[{"newf", "=", "\n", "\t", "\t", "\t\t\t\t\t", 
                  RowBox[{"FileNameJoin", "@", 
                   RowBox[{"{", 
                    RowBox[{"outDir", ",", "\n", "\t", "\t", "\t\t\t\t\t\t", 
                    RowBox[{"FileNameDrop", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"FileNameDepth", "[", "contDir", "]"}]}], "]"}]}],
                     "\n", "\t", "\t", "\t\t\t\t\t\t", "}"}]}]}], "\n", "\t", 
                 "\t", "\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t", "\t\t\t\t", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"!", 
                    RowBox[{"FileExistsQ", "[", "newf", "]"}]}], "||", 
                   RowBox[{
                    RowBox[{"FileHash", "[", "#", "]"}], "=!=", 
                    RowBox[{"FileHash", "[", "newf", "]"}]}]}], ",", "\n", 
                  "\t", "\t", "\t\t\t\t\t", 
                  RowBox[{
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"!", 
                    RowBox[{"DirectoryQ", "@", 
                    RowBox[{"DirectoryName", "@", "newf"}]}]}], ",", "\n", 
                    "\t", "\t", "\t\t\t\t\t\t", 
                    RowBox[{"CreateDirectory", "[", 
                    RowBox[{
                    RowBox[{"DirectoryName", "@", "newf"}], ",", "\n", "\t", 
                    "\t", "\t\t\t\t\t\t\t", 
                    RowBox[{
                    "CreateIntermediateDirectories", "\[Rule]", "True"}]}], 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t", 
                    "\t", "\t\t\t\t\t\t", "]"}], ";", "\n", "\t", "\t", 
                   "\t\t\t\t\t", 
                   RowBox[{"CopyFile", "[", 
                    RowBox[{"#", ",", "newf", ",", 
                    RowBox[{"OverwriteTarget", "\[Rule]", "True"}]}], 
                    "]"}]}]}], "\n", "\t", "\t", "\t\t\t\t\t", "]"}]}], "\n", 
               "\t", "\t", "\t\t\t\t", "]"}], "&"}], "/@", "fils"}], ",", 
            "\n", "\t\t\t\t\t", 
            RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t\t", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"AllTrue", "[", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{"copyfile", ",", "newfile"}], "}"}], ",", 
                 "StringQ"}], "]"}], ",", "\n", "\t", "\t\t\t\t\t\t", 
               RowBox[{"TemplateApply", "[", 
                RowBox[{
                "\"\<Copying `` to ``\>\"", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                  RowBox[{
                  "copyfile", ",", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                   "newfile"}], "\n", "\t", "\t\t\t\t\t\t\t\t", "}"}]}], "\n",
                 "\t", "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
               "\t\t\t\t\t\t", 
               RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{
                "\"\<Copying content from ``\>\"", ",", "\n", 
                 "\t\t\t\t\t\t\t\t", "contDir"}], "\n", "\t\t\t\t\t\t\t\t", 
                "]"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
           "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", 
       "]"}], ";", "\n", "\t\t", "outDir"}]}], "\n", "\t\t", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteCopyContent", "[", "\n", "\t", 
    RowBox[{"dir_", ",", "\n", "\t", "outDir_", ",", "\n", "\t", 
     RowBox[{"e", ":", 
      RowBox[{"Except", "[", 
       RowBox[{
        RowBox[{"_", "?", "OptionQ"}], "|", 
        RowBox[{"_", "?", "AssociationQ"}]}], "]"}], ":", "Automatic"}], ",", 
     "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"s", "=", 
       RowBox[{"webSiteCopyContentSpec", "[", "e", "]"}]}], "}"}], ",", "\n", 
     "\t\t", 
     RowBox[{"iWebSiteCopyContent", "[", 
      RowBox[{"dir", ",", " ", "outDir", ",", " ", "s", ",", " ", "ops"}], 
      "]"}]}], 
    RowBox[{"(*", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"StringPattern`StringPatternQ", "[", "s", "]"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"WebSiteCopyContent", "[", 
        RowBox[{"dir", ",", " ", "outDir", ",", " ", "s", ",", " ", "ops"}], 
        "]"}], ",", "\n", "\t\t\t", 
       RowBox[{"{", "}"}]}], "\n", "\t\t\t", "]"}], "*)"}], "\n", "\t\t", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteCopyContent", "[", "\n", "\t", 
   RowBox[{"dir_", ",", "\n", "\t", "outDir_", ",", "\n", "\t", 
    RowBox[{"e", ":", 
     RowBox[{"Except", "[", 
      RowBox[{
       RowBox[{"_", "?", "OptionQ"}], "|", 
       RowBox[{"_", "?", "AssociationQ"}]}], "]"}], ":", "Automatic"}], ",", 
    "\n", "\t", 
    RowBox[{"ops_", "?", "AssociationQ"}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"WebSiteCopyContent", "[", 
   RowBox[{"dir", ",", " ", "outDir", ",", " ", "e", ",", " ", 
    RowBox[{"Normal", "[", "ops", "]"}]}], 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"22a628be-2719-49b0-a104-f2c987e402ca"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GenerateAggregationPages\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.712664403157797*^9, 3.7126644060687113`*^9}, {
   3.7126644483009977`*^9, 3.712664450555676*^9}, 3.7126658795980988`*^9, 
   3.7126809235504093`*^9},ExpressionUUID->"ab3615ea-f6fa-446f-9ccf-\
14720ddff5b2"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Aggregation Types\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"4d5572ef-ba0a-4756-8455-3df54f54bc86"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteGenerateAggregationPages", "//", "ClearAll"}], 
  ";"}]], "CodeInput",
 CellChangeTimes->{{3.712666323483973*^9, 
  3.712666343287422*^9}},ExpressionUUID->"4560b9d9-2c8c-42d7-b8f9-\
79419426567b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$DefaultWebSiteAggregationTypes", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t\t", 
    RowBox[{
    "\"\<Authors\>\"", ",", "\n", "\t\t\t", "\"\<Categories\>\"", ",", "\n", 
     "\t\t\t", "\"\<Tags\>\""}], "\n", "\t\t\t", "}"}]}], ";"}]], "CodeInput",
 
 CellChangeTimes->{{3.712705943659857*^9, 3.712705952957896*^9}, 
   3.733680714076387*^9},ExpressionUUID->"9be9c3a6-f0de-4800-b548-\
9342d402ac19"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteGenerateAggregationPages", ":=", "\n", "\t", 
   RowBox[{"AssociationMap", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"With", "[", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t", 
         RowBox[{
          RowBox[{"singular", "=", "\n", "\t\t\t\t", 
           RowBox[{"ToLowerCase", "@", 
            RowBox[{"Switch", "[", 
             RowBox[{
             "#", ",", "\n", "\t\t\t\t\t", "\"\<Categories\>\"", ",", "\n", 
              "\t\t\t\t\t\t", "\"\<Category\>\"", ",", "\n", "\t\t\t\t\t", 
              "_", ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{"StringTrim", "[", 
               RowBox[{"#", ",", "\"\<s\>\""}], "]"}]}], "\n", "\t\t\t\t\t", 
             "]"}]}]}], ",", "\n", "\t\t\t", 
          RowBox[{"plural", "=", 
           RowBox[{"ToLowerCase", "[", "#", "]"}]}]}], "\n", "\t\t\t", "}"}], 
        ",", "\n", "\t\t\t", 
        RowBox[{"<|", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"\"\<AggregationTemplates\>\"", "\[Rule]", 
           RowBox[{"plural", "<>", "\"\<.html\>\""}]}], ",", "\n", "\t", 
          "\t\t\t", 
          RowBox[{"\"\<AggregationFile\>\"", "\[Rule]", 
           RowBox[{"plural", "<>", "\"\<.html\>\""}]}], ",", "\n", "\t\t\t\t", 
          RowBox[{"\"\<Templates\>\"", "->", 
           RowBox[{"singular", "<>", "\"\<.html\>\""}]}], ",", "\n", "\t", 
          "\t\t\t", 
          RowBox[{"\"\<File\>\"", "\[Rule]", 
           RowBox[{"Function", "@", 
            RowBox[{"{", 
             RowBox[{"plural", ",", " ", 
              RowBox[{
               RowBox[{"ToLowerCase", "[", "#", "]"}], "<>", 
               "\"\<.html\>\""}]}], "}"}]}]}]}], "\n", "\t\t\t\t", "|>"}]}], 
       "\n", "\t\t\t", "]"}], "&"}], ",", "\n", "\t\t", 
     "$WebSiteAggregationTypes"}], "\n", "\t\t", "]"}]}], ";"}]], "CodeInput",
 
 CellChangeTimes->{{3.71266514945728*^9, 3.7126651860668383`*^9}, {
   3.712665217439394*^9, 3.7126652341440487`*^9}, {3.712665304813098*^9, 
   3.712665428035041*^9}, {3.712665820160141*^9, 3.712665997496722*^9}, {
   3.712666029859069*^9, 3.712666072930785*^9}, 3.712666106464913*^9, {
   3.712666344321274*^9, 3.71266635599087*^9}, {3.712666433920295*^9, 
   3.7126664953914213`*^9}, {3.712666527956365*^9, 3.7126666573618298`*^9}, {
   3.712666718700697*^9, 3.712666844960993*^9}, {3.7126668754405527`*^9, 
   3.712666928789379*^9}, {3.712667120971504*^9, 3.712667127604598*^9}, {
   3.712667218115181*^9, 3.712667240576004*^9}, {3.71266727175488*^9, 
   3.712667284035528*^9}, {3.712667338725422*^9, 3.7126674668569603`*^9}, {
   3.712667540498931*^9, 3.712667723958869*^9}, {3.7126678308875837`*^9, 
   3.712667974003702*^9}, {3.7126680713811483`*^9, 3.712668090906543*^9}, {
   3.712668122843464*^9, 3.7126681342228823`*^9}, {3.712670116674231*^9, 
   3.712670132930787*^9}, {3.7126701995660133`*^9, 3.712670215441181*^9}, {
   3.7126702552547092`*^9, 3.7126702562391033`*^9}, {3.712670727512183*^9, 
   3.712670801565055*^9}, 3.712670833219757*^9, {3.712670922503469*^9, 
   3.712670956287449*^9}, {3.7126710571253643`*^9, 3.712671088301495*^9}, {
   3.712671148908391*^9, 3.7126712578300858`*^9}, 3.7126715967553673`*^9, {
   3.712674875166005*^9, 3.712674875173706*^9}, {3.7126810289175043`*^9, 
   3.712681035579097*^9}, {3.712702414645706*^9, 3.712702416467229*^9}, {
   3.712702795080298*^9, 3.712702796916643*^9}, {3.71270286078234*^9, 
   3.712702861684805*^9}, 3.712703141508515*^9, {3.712703232060111*^9, 
   3.712703236673512*^9}, {3.712703305842944*^9, 3.712703318983124*^9}, {
   3.712703354391477*^9, 3.712703369105493*^9}, {3.7127035916567993`*^9, 
   3.7127035984471207`*^9}, {3.7127041854870777`*^9, 
   3.7127042196636753`*^9}, {3.712704270845909*^9, 3.712704329291606*^9}, {
   3.712704361760964*^9, 3.712704363693431*^9}, {3.712704415708521*^9, 
   3.712704433747364*^9}, {3.712704509184999*^9, 3.712704598835371*^9}, {
   3.7127046727669764`*^9, 3.7127046906090593`*^9}, {3.712704721687557*^9, 
   3.712704813152484*^9}, {3.712704876106822*^9, 3.712704918979272*^9}, 
   3.712704956613119*^9, {3.712705543757841*^9, 3.7127055510485983`*^9}, {
   3.712705599726549*^9, 3.712705620908826*^9}, {3.712705665729251*^9, 
   3.712705677020603*^9}, {3.7127057192498703`*^9, 3.712705743660692*^9}, 
   3.712705942219935*^9, 3.712705978452525*^9, {3.712706253572679*^9, 
   3.712706322942292*^9}, {3.712706358611857*^9, 3.712706411080462*^9}, {
   3.712707117106607*^9, 3.7127071781295147`*^9}, {3.7127074323146772`*^9, 
   3.712707506300933*^9}, 3.712707773204713*^9, {3.712708420610333*^9, 
   3.712708421044088*^9}, 3.7127085364888983`*^9, {3.712708576528717*^9, 
   3.7127086082550297`*^9}, {3.712708658709816*^9, 3.712708660341799*^9}, {
   3.71270871738135*^9, 3.712708731028211*^9}, {3.712708790548338*^9, 
   3.712708846797104*^9}, 3.712708881601253*^9, {3.712708954540971*^9, 
   3.712708966018165*^9}, {3.712709440863057*^9, 3.712709498349432*^9}, {
   3.712709531329755*^9, 3.71270956485249*^9}, {3.71270960498212*^9, 
   3.712709629997939*^9}, {3.7127096903116007`*^9, 3.712709753268268*^9}, {
   3.712709876179242*^9, 3.712709877687233*^9}, {3.712709932969009*^9, 
   3.712710062043097*^9}, {3.712710094952511*^9, 3.712710153113101*^9}, {
   3.712710194604219*^9, 3.712710203574037*^9}, {3.71271023532255*^9, 
   3.71271026069308*^9}, {3.712710317351536*^9, 3.712710335970428*^9}, 
   3.712710383790448*^9, {3.7127104242309113`*^9, 3.712710451576961*^9}, {
   3.712710717817768*^9, 3.7127107382210093`*^9}, {3.720649260973762*^9, 
   3.720649265321301*^9}, 3.723298935982943*^9, 3.733673939702389*^9, 
   3.733680813480165*^9},ExpressionUUID->"1b482eb5-7d6b-435e-925e-\
402f67aa78d3"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteCollectAggPages\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.733680862336738*^9, 
  3.733680881736965*^9}},ExpressionUUID->"a7aef006-894f-422a-9787-\
d17e40d0279b"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"iWebSiteCollectAggPages", "[", "aggthing_", "]"}], ":=", "\n", 
   "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
      "aggContent", ",", "\n", "\t\t\t", "groupedUp", ",", "\n", "\t\t\t", 
       "threaded"}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"aggContent", "=", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"Lookup", "[", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{"Lookup", "[", 
            RowBox[{"#", ",", " ", "\"\<Attributes\>\"", ",", " ", 
             RowBox[{"<|", "|>"}]}], "]"}], ",", "\n", "\t\t\t\t", "aggthing",
            ",", "\n", "\t\t\t\t", 
           RowBox[{"{", "}"}]}], "\n", "\t\t\t\t", "]"}], "&"}], "/@", 
        "$WebSiteBuildContentStack"}]}], ";", "\n", "\t\t", 
      RowBox[{"threaded", "=", "\n", "\t\t\t", 
       RowBox[{"Flatten", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Thread", "[", 
           RowBox[{"Reverse", "[", "#", "]"}], "]"}], "&"}], "/@", 
         RowBox[{"Normal", "[", "aggContent", "]"}]}], "]"}]}], ";", "\n", 
      "\t\t", 
      RowBox[{"groupedUp", "=", "\n", "\t\t\t", 
       RowBox[{"GroupBy", "[", "\n", "\t\t\t\t", 
        RowBox[{"threaded", ",", "\n", "\t\t\t\t", 
         RowBox[{"First", "\[Rule]", "Last"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"Flatten", "@*", "List"}]}], "\n", "\t\t\t\t", "]"}]}], ";", 
      "\n", "\t\t", 
      RowBox[{"KeySort", "@", 
       RowBox[{"KeySelect", "[", 
        RowBox[{"groupedUp", ",", " ", "StringQ"}], "]"}]}]}]}], "\n", "\t\t",
     "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"iWebSitePruneUnchangedAggPages", "[", "aggthing_", "]"}], "[", 
    "aggs_", "]"}], ":=", "\n", "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", "oldAggs", "\n", "\t\t\t", "}"}], ",", "\n",
      "\t\t", 
     RowBox[{
      RowBox[{"oldAggs", "=", "\n", "\t\t\t", 
       RowBox[{"Block", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
          "$WebSiteBuildContentStack", "=", 
           "$WebSiteBuildCachedContentStack"}], "}"}], ",", "\n", "\t\t\t\t", 
         
         RowBox[{"iWebSiteCollectAggPages", "[", "aggthing", "]"}]}], "\n", 
        "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"Complement", "[", "\n", "\t\t\t", 
       RowBox[{"aggs", ",", "\n", "\t\t\t", "oldAggs"}], "\n", "\t\t\t", 
       "]"}]}]}], "\n", "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteCollectAggPages", "[", 
   RowBox[{"aggthing_", ",", " ", 
    RowBox[{"check", ":", 
     RowBox[{"True", "|", "False"}], ":", "True"}]}], "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{"If", "[", 
    RowBox[{"check", ",", " ", "\n", "\t\t", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{
         RowBox[{"iWebSitePruneUnchangedAggPages", "[", "aggthing", "]"}], 
         "[", "#", "]"}], ",", " ", "#"}], "}"}], "&"}], ",", " ", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"#", ",", " ", "#"}], "}"}], "&"}]}], "\n", "\t\t", "]"}], "@",
    "\n", "\t\t", 
   RowBox[{
   "iWebSiteCollectAggPages", "[", "aggthing", 
    "]"}]}]}]}], \
"CodeInput",ExpressionUUID->"f12f5492-b83f-4b90-a667-d95c757c55f9"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteAggSingularize\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"924a74de-d02e-4cac-9507-31380c580f9b"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"$WebSiteAggregationSingularizeMap", "=", "\n", "\t", 
   RowBox[{"<|", "\n", "\t\t", 
    RowBox[{"\"\<Categories\>\"", "\[Rule]", "\"\<Category\>\""}], "\n", 
    "\t\t", "|>"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteAggSingularize", "[", "name_", "]"}], ":=", "\n", "\t", 
  RowBox[{"Lookup", "[", 
   RowBox[{
   "$WebSiteAggregationSingularizeMap", ",", "\n", "\t\t", "name", ",", "\n", 
    "\t\t", 
    RowBox[{"Which", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"StringMatchQ", "[", 
       RowBox[{"name", ",", " ", "\n", "\t\t\t\t", 
        RowBox[{"Alternatives", "@@", "$DefaultWebSiteAggregationTypes"}]}], 
       "\n", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
      RowBox[{"StringTrim", "[", 
       RowBox[{"name", ",", "\"\<s\>\""}], "]"}], ",", "\n", "\t\t\t", 
      RowBox[{"MemberQ", "[", 
       RowBox[{"$WebSiteAggregationTypes", ",", " ", 
        RowBox[{"StringTrim", "[", 
         RowBox[{"name", ",", " ", "\"\<s\>\""}], "]"}]}], "]"}], ",", "\n", 
      "\t\t\t\t", 
      RowBox[{"StringTrim", "[", 
       RowBox[{"name", ",", "\"\<s\>\""}], "]"}], ",", "\n", "\t\t\t", "True",
       ",", "\n", "\t\t\t\t", "None"}], "\n", "\t\t\t", "]"}]}], "\n", "\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"13543db3-2411-451f-9458-7e2729f7a93a"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteAggExportOverall\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"f8b19b84-db22-41ea-b123-b0b2262a3145"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iWebSiteAggExportOverall", "[", "\n", "\t", 
   RowBox[{
   "monitor_", ",", "\n", "\t", "outDir_", ",", " ", "thm_", ",", " ", 
    "longDir_", ",", " ", "config_", ",", "\n", "\t", "aggdata_", ",", " ", 
    "aggsingular_", ",", " ", "aggthing_", ",", "\n", "\t", 
    RowBox[{"Hold", "[", 
     RowBox[{"aggbit_", ",", " ", "$aggregationFiles_"}], "]"}], ",", "\n", 
    "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"fout", "=", "\n", "\t\t\t\t", 
       RowBox[{"WebSiteBuildSlug", "@", "\n", "\t", "\t\t\t", 
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", "\n", "\t", "\t\t\t\t", 
           RowBox[{"outDir", ",", "\n", "\t", "\t\t\t\t", 
            RowBox[{"aggdata", "[", "\"\<AggregationFile\>\"", "]"}]}], "\n", 
           "\t", "\t\t\t\t", "}"}]}]}]}]}], ",", "\n", "\t", "\t\t", 
      RowBox[{"templates", "=", "\n", "\t", "\t\t\t", 
       RowBox[{"Flatten", "@", 
        RowBox[{"List", "@", "\n", "\t", "\t\t\t\t", 
         RowBox[{
         "aggdata", "[", "\"\<AggregationTemplates\>\"", "]"}]}]}]}]}], "\n", 
     "\t", "\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"aggbit", "=", 
      RowBox[{"ToLowerCase", "@", "aggthing"}]}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"DirectoryQ", "@", 
         RowBox[{"DirectoryName", "@", "fout"}]}]}], ",", "\n", "\t\t\t", 
       RowBox[{"CreateDirectory", "@", 
        RowBox[{"DirectoryName", "@", "fout"}]}]}], "\n", "\t\t\t", "]"}], 
     ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{"monitor", ",", "\n", "\t\t\t", 
        RowBox[{"Function", "[", 
         RowBox[{"Null", ",", "\n", "\t\t\t\t", 
          RowBox[{"Monitor", "[", 
           RowBox[{"#", ",", " ", "\n", "\t\t\t\t\t", 
            RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t\t", 
             RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"\"\<Generating ``\>\"", ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"WebSiteBuildURL", "@", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"FileNameDrop", "[", 
                 RowBox[{"fout", ",", 
                  RowBox[{"FileNameDepth", "@", "outDir"}]}], "]"}]}]}], "\n",
               "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t", "]"}], ",", 
          "\n", "\t\t\t\t", "HoldAllComplete"}], "\n", "\t\t\t\t", "]"}], ",",
         "\n", "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", 
      "\t\t\t", 
      RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t", 
       RowBox[{
       "aggbit", ",", "\n", "\t", "\t\t\t", "fout", ",", "\n", "\t", "\t\t\t", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"thm", ",", "\"\<templates\>\""}], "}"}]}], ",", 
          "longDir"}], "}"}], ",", "\n", "\t", "\t\t\t", "None", ",", "\n", 
        "\t", "\t\t\t", "templates", ",", "\n", "\t", "\t\t\t", 
        RowBox[{"Merge", "[", "\n", "\t", "\t\t\t\t", 
         RowBox[{
          RowBox[{"{", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"config", ",", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{"aggthing", "->", 
             RowBox[{"Values", "@", "$aggregationFiles"}]}], ",", "\n", "\t", 
            "\t\t\t\t\t", 
            RowBox[{"\"\<URL\>\"", "->", "\n", "\t", "\t\t\t\t\t\t", 
             RowBox[{"Set", "[", "\n", "\t", "\t\t\t\t\t\t\t", 
              RowBox[{"aggbit", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
               RowBox[{"WebSiteBuildURL", "@", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                RowBox[{"FileNameDrop", "[", 
                 RowBox[{"fout", ",", 
                  RowBox[{"FileNameDepth", "@", "outDir"}]}], "]"}]}]}], "\n",
               "\t", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t", "\t\t\t\t\t", 
           "}"}], ",", "\n", "\t", "\t\t\t\t", "Last"}], "\n", "\t", 
         "\t\t\t\t", "]"}]}], "\n", "\t", "\t\t\t", "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"aggbit", "=."}], ";"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"e1c9544b-7d02-4048-b248-bc720a62990f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteAggExportItem\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"a645da9e-87b6-4156-a513-307988befeb7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"iWebSiteAggExportItem", "[", "\n", "\t", 
    RowBox[{
    "monitor_", ",", "\n", "\t", "outDir_", ",", " ", "thm_", ",", " ", 
     "longDir_", ",", " ", "config_", ",", "\n", "\t", "aggdata_", ",", " ", 
     "aggsingular_", ",", " ", "aggthing_", ",", "\n", "\t", 
     RowBox[{"Hold", "[", 
      RowBox[{"aggbit_", ",", " ", "$aggregationFiles_"}], "]"}], ",", "\n", 
     "\t", "pruningList_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], "[", 
   RowBox[{"aggKey_", ",", " ", "aggFiles_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{
      RowBox[{"fout", "=", "\n", "\t\t\t", 
       RowBox[{"(*", 
        RowBox[{
        "The", " ", "file", " ", "to", " ", "export", " ", "the", " ", 
         "aggregation", " ", "file", " ", "to"}], "*)"}], "\n", "\t\t\t", 
       RowBox[{"WebSiteBuildSlug", "@", "\n", "\t\t\t\t", 
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", "\n", "\t\t\t\t\t", 
           RowBox[{"outDir", ",", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"aggdata", "[", "\"\<File\>\"", "]"}], "@", "aggKey"}]}],
            "\n", "\t\t\t\t\t", "}"}]}]}]}]}], ",", "\n", "\t\t", 
      RowBox[{"templates", "=", "\n", "\t\t\t", 
       RowBox[{"(*", 
        RowBox[{"The", " ", "template", " ", "file", " ", "to", " ", "use"}], 
        "*)"}], "\n", "\t\t\t", 
       RowBox[{"Flatten", "@", 
        RowBox[{"List", "@", "\n", "\t\t\t\t", 
         RowBox[{"aggdata", "[", "\"\<Templates\>\"", "]"}]}]}]}]}], "\n", 
     "\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"$aggregationFiles", "[", "aggKey", "]"}], "=", "\n", "\t\t\t", 
      
      RowBox[{"<|", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"aggsingular", "\[Rule]", "aggKey"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"\"\<File\>\"", "->", "fout"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"\"\<Articles\>\"", "\[Rule]", "aggFiles"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"\"\<URL\>\"", "->", 
         RowBox[{"WebSiteBuildURL", "@", 
          RowBox[{"FileNameDrop", "[", 
           RowBox[{"fout", ",", " ", 
            RowBox[{"FileNameDepth", "@", "outDir"}]}], "]"}]}]}]}], "\n", 
       "\t\t\t\t", "|>"}]}], ";", "\n", "\t\t", 
     RowBox[{"aggbit", "=", 
      RowBox[{"ToLowerCase", "[", 
       RowBox[{"aggthing", "<>", "\"\</\>\"", "<>", "aggKey"}], "]"}]}], ";", 
     "\n", "\t\t", 
     RowBox[{"(*", " ", 
      RowBox[{"Make", " ", "sure", " ", "directory", " ", "exists"}], " ", 
      "*)"}], "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"DirectoryQ", "@", 
         RowBox[{"DirectoryName", "@", "fout"}]}]}], ",", "\n", "\t\t\t", 
       RowBox[{"CreateDirectory", "@", 
        RowBox[{"DirectoryName", "@", "fout"}]}]}], "\n", "\t\t\t", "]"}], 
     ";", "\n", "\t\t", 
     RowBox[{"(*", " ", "\n", "\t\t", 
      RowBox[{
       RowBox[{"Export", " ", "aggregation", " ", "file"}], ",", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"e", ".", "g", ".", " ", "tags"}], "/", 
         RowBox[{"mathematica", ".", "html"}]}], " ", "passing", " ", "the", 
        " ", "\n", "\t", "\t", "list", " ", "of", " ", "file", " ", "URLs", 
        " ", "as", " ", "the", " ", "aggregation", " ", "name"}], ",", " ", 
       RowBox[{"e", ".", "g", ".", " ", "Tags"}]}], "\n", "\t", "\t", "*)"}], 
     "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"KeyExistsQ", "[", 
        RowBox[{"pruningList", ",", " ", "aggKey"}], "]"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"WebSiteTemplateExportPaginated", "[", "\n", "\t\t\t\t", 
        RowBox[{"aggbit", ",", "\n", "\t", "\t", "\t", "\t", 
         RowBox[{"FileBaseName", "[", "fout", "]"}], ",", "\n", "\t", "\t", 
         "\t", "\t", 
         RowBox[{"FileNameTake", "[", 
          RowBox[{"fout", ",", " ", 
           RowBox[{"{", 
            RowBox[{"1", ",", " ", 
             RowBox[{"-", "2"}]}], "}"}]}], "]"}], ",", "\n", "\t", "\t", 
         "\t", "\t", "outDir", ",", "\n", "\t", "\t", "\t", "\t", 
         RowBox[{"{", "\n", "\t", "\t", "\t", "\t\t", 
          RowBox[{"thm", ",", "\n", "\t", "\t", "\t", "\t\t", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], ",", 
           "\n", "\t", "\t", "\t", "\t\t", "longDir"}], "\n", "\t", "\t", 
          "\t", "\t\t", "}"}], ",", "\n", "\t", "\t", "\t", "\t", "None", ",",
          "\n", "\t", "\t", "\t", "\t", "templates", ",", " ", "\n", "\t", 
         "\t", "\t", "\t", 
         RowBox[{"Append", "[", 
          RowBox[{"config", ",", " ", 
           RowBox[{"aggsingular", "\[Rule]", "aggKey"}]}], "]"}], ",", "\n", 
         "\t", "\t\t\t", 
         RowBox[{"Lookup", "[", "\n", "\t", "\t", "\t", "\t\t", 
          RowBox[{
           RowBox[{"Lookup", "[", 
            RowBox[{
            "$WebSiteBuildContentStack", ",", " ", "aggFiles", ",", " ", 
             RowBox[{"<|", "|>"}]}], "]"}], ",", "\n", "\t", "\t", "\t", 
           "\t\t", "\"\<Attributes\>\"", ",", "\n", "\t", "\t", "\t", "\t\t", 
           
           RowBox[{"<|", "|>"}]}], "\n", "\t", "\t", "\t", "\t\t", "]"}], ",",
          "\n", "\t", "\t\t\t", 
         RowBox[{"FilterRules", "[", "\n", "\t", "\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "ops", "}"}], ",", " ", "\n", "\t", "\t", "\t", 
           "\t\t", 
           RowBox[{"Options", "@", "WebSiteTemplateExportPaginated"}]}], "\n",
           "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", 
      "]"}], ";", "\n", "\t\t\t", 
     RowBox[{"aggbit", "=."}], ";"}]}], "\n", "\t\t", "]"}]}], "\n", 
 RowBox[{"\t"}]}], \
"CodeInput",ExpressionUUID->"f7ba70c1-3ba4-4a10-a70f-5362eaa48595"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteGenerateAggPages\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"56c2851a-08d7-4dfa-9cdf-9be8b43f43e9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iWebSiteGenerateAggPages", "[", "\n", "\t", 
   RowBox[{
   "outDir_", ",", "\n", "\t", "longDir_", ",", "\n", "\t", "thm_", ",", "\n",
     "\t", "config_", ",", "\n", "\t", "aggthing_", ",", "\n", "\t", 
    "aggsingular_", ",", "\n", "\t", "aggdata_", ",", "\n", "\t", 
    "checkChanged_", ",", "\n", "\t", 
    RowBox[{"Hold", "[", "aggbit_", "]"}], ",", "\n", "\t", "monitor_", ",", 
    "\n", "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"Block", "[", "\n", "\t\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t\t", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Files", " ", "to", " ", "be", " ", "collected", " ", "and", " ", 
       "passed", " ", "to", " ", "combined", " ", "aggregation"}], " ", 
      "*)"}], "\n", "\t\t\t\t", 
     RowBox[{
      RowBox[{"$aggregationFiles", "=", 
       RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t\t", 
      RowBox[{"(*", 
       RowBox[{
       "Collect", " ", "type", " ", "name", " ", "and", " ", "templates"}], 
       "*)"}], "\n", "\t\t\t\t", "pragglist", ",", "\n", "\t\t\t\t", 
      RowBox[{"agglist", "=", 
       RowBox[{"WebSiteCollectAggPages", "[", 
        RowBox[{"aggthing", ",", " ", "checkChanged"}], "]"}]}]}], "\n", 
     "\t\t\t\t", 
     RowBox[{"(*", 
      RowBox[{
      "Gather", " ", "elements", " ", "in", " ", "the", " ", "content", " ", 
       "stack", "  ", "by", " ", "type", " ", "in", " ", "the", " ", 
       "aggregation"}], "*)"}], "\n", "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
    
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"pragglist", ",", " ", "agglist"}], "}"}], "=", 
      RowBox[{"WebSiteCollectAggPages", "[", 
       RowBox[{"aggthing", ",", " ", "checkChanged"}], "]"}]}], ";", "\n", 
     "\t\t\t", 
     RowBox[{"KeyValueMap", "[", "\n", "\t\t\t\t", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"Map", " ", "over", " ", "aggregated", " ", "elements"}], ",",
         " ", 
        RowBox[{"e", ".", "g", "."}], ",", " ", 
        RowBox[{
        "over", " ", "each", " ", "tag", " ", "or", " ", "category"}]}], 
       "*)"}], "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{"iWebSiteAggExportItem", "[", "\n", "\t\t\t\t\t", 
        RowBox[{
        "monitor", ",", "\n", "\t\t\t\t\t", "outDir", ",", " ", "thm", ",", 
         " ", "longDir", ",", " ", "config", ",", "\n", "\t\t\t\t\t", 
         "aggdata", ",", " ", "aggsingular", ",", " ", "aggthing", ",", "\n", 
         "\t\t\t\t\t", 
         RowBox[{"Hold", "[", 
          RowBox[{"aggbit", ",", " ", "$aggregationFiles"}], "]"}], ",", "\n",
          "\t\t\t\t\t", "pragglist", ",", "\n", "\t\t\t\t\t", "ops"}], "\n", 
        "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "agglist"}], "\n", 
      "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
     RowBox[{"If", "[", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{"If", " ", 
         RowBox[{"there", "'"}], "s", " ", "a", " ", "overall", " ", 
         "aggregation", " ", "to", " ", "use"}], ",", " ", 
        RowBox[{
         RowBox[{"e", ".", "g", ".", " ", "all"}], " ", "tags", " ", "or", 
         " ", "categories"}]}], "*)"}], "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
          "\"\<AggregationFile\>\"", ",", "\"\<AggregationTemplates\>\""}], 
          "}"}], ",", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"KeyMemberQ", "[", 
           RowBox[{"aggdata", ",", "#"}], "]"}], "&"}]}], "\n", "\t\t\t\t\t", 
        "]"}], ",", "\n", "\t\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "agglist"}], ">", "0"}], ",", "\n", 
         "\t\t\t\t\t", 
         RowBox[{"iWebSiteAggExportOverall", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{
          "monitor", ",", "\n", "\t", "\t\t\t\t\t", "outDir", ",", " ", "thm",
            ",", " ", "longDir", ",", " ", "config", ",", "\n", "\t", 
           "\t\t\t\t\t", "aggdata", ",", " ", "aggsingular", ",", " ", 
           "aggthing", ",", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Hold", "[", 
            RowBox[{"aggbit", ",", " ", "$aggregationFiles"}], "]"}], ",", 
           "\n", "\t\t\t\t\t\t", "ops"}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n",
         "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"5f112c82-6ddb-41ff-8dfe-00c1ea15f6f2"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGenerateAggregationPages\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.733680862336738*^9, 
  3.733680886994101*^9}},ExpressionUUID->"277c9a9d-854c-4dee-b1cd-\
7bb88f5c0b93"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "badagg"}], "=", 
   "\"\<Can't deal with aggregation type ``\>\""}], ";"}]], "CodeInput",
 CellChangeTimes->{{3.733704808046063*^9, 
  3.7337048146851892`*^9}},ExpressionUUID->"d2ad12a7-66a6-4570-8eef-\
00991faced6d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Options", "[", "WebSiteGenerateAggregationPages", "]"}], "=", "\n",
   "\t", 
  RowBox[{"{", "\n", "\t\t", 
   RowBox[{
    RowBox[{"Monitor", "\[Rule]", "True"}], ",", "\n", "\t\t", 
    RowBox[{"\"\<PageSize\>\"", "\[Rule]", "0"}], ",", "\n", "\t\t", 
    RowBox[{"\"\<CheckChanges\>\"", "\[Rule]", "True"}]}], "\n", "\t\t", 
   "}"}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGenerateAggregationPages", "[", "\n", "\t", 
    RowBox[{
    "dir_", ",", "\n", "\t", "aggpages_", ",", "\n", "\t", "outDir_", ",", 
     "\n", "\t", "theme_", ",", "\n", "\t", "config_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"longDir", "=", 
        RowBox[{"ExpandFileName", "@", "dir"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"thm", "=", 
        RowBox[{"WebSiteFindTheme", "[", 
         RowBox[{"dir", ",", "theme", ",", " ", 
          RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}], 
       ",", "\n", "\t\t\t", 
       RowBox[{"checkChanged", "=", 
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "\"\<CheckChanges\>\"", "]"}]}]}]}], 
      "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Block", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t\t", 
         RowBox[{
         "aggbit", ",", "\n", "\t\t\t\t", "outfile", ",", "\n", "\t", 
          "\t\t\t", 
          RowBox[{"$WebSiteAggregationTypes", "=", "\n", "\t", "\t\t\t\t", 
           RowBox[{"Join", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{
            "$DefaultWebSiteAggregationTypes", ",", " ", "\n", "\t", 
             "\t\t\t\t\t", 
             RowBox[{"(*", "\n", "\t", "\t\t\t\t", 
              RowBox[{
              "Include", " ", "custom", " ", "aggregation", " ", "types", " ",
                "from", " ", "templates", " ", 
               RowBox[{"dir", ":", "\n", "\t", "\t\t\t\t\t", "TODO", ":", " ", 
                RowBox[{
                "link", " ", "to", " ", "custom", " ", "agg", " ", "pages", 
                 " ", "in", " ", "later", " ", "bit", " ", "and", " ", 
                 "check", " ", "metainfo", " ", "for", " ", "key"}]}]}], 
              "\t\t", "\n", "\t", "\t\t\t\t", "*)"}], "\n", "\t", 
             "\t\t\t\t\t", 
             RowBox[{
              RowBox[{
               RowBox[{"FileNameJoin", "@", 
                RowBox[{"{", 
                 RowBox[{"\"\<aggregations\>\"", ",", " ", 
                  RowBox[{"FileBaseName", "[", "#", "]"}]}], "}"}]}], "&"}], "/@",
               "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{"FileNames", "[", "\n", "\t", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"\"\<*.html\>\"", "|", "\"\<*.xml\>\""}], ",", "\n", 
                "\t", "\t\t\t\t\t\t\t", 
                RowBox[{"FileNameJoin", "@", 
                 RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{
                  "thm", ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                   "\"\<templates\>\"", ",", "\n", "\t", "\t", 
                   "\t\t\t\t\t\t\t", "\"\<aggregations\>\""}], "\n", "\t", 
                  "\t\t\t\t\t\t\t\t", "}"}]}]}], "\n", "\t", "\t\t\t\t\t\t\t",
                "]"}]}]}], "\n", "\t", "\t\t\t\t\t", "]"}]}]}], "\n", "\t", 
         "\t\t\t", "}"}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"KeyValueMap", "[", 
          RowBox[{"(*", 
           RowBox[{
           "Map", " ", "over", " ", "aggregation", " ", "types", " ", "and", 
            " ", "templates"}], "*)"}], "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", "\n", "\t\t\t\t\t", 
               RowBox[{
                RowBox[{"aggthing", "=", "#"}], ",", "\n", "\t\t\t\t\t", 
                RowBox[{"aggdata", "=", "#2"}], ",", "\n", "\t\t\t\t\t", 
                RowBox[{"aggsingular", "=", 
                 RowBox[{"WebSiteAggSingularize", "[", "#", "]"}]}]}], 
               RowBox[{"(*", " ", 
                RowBox[{
                 RowBox[{
                 "this", " ", "should", " ", "be", " ", "a", " ", "little", 
                  " ", "top"}], "-", 
                 RowBox[{"level", " ", "function"}]}], " ", "*)"}], "\n", 
               "\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{"aggsingular", "===", "None"}], ",", "\n", 
                "\t\t\t\t\t\t", 
                RowBox[{"(*", " ", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                   "Dunno", " ", "what", " ", "to", " ", "do", " ", "here"}], 
                   " ", "..."}], ".."}], " ", "*)"}], "\n", "\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"PackageThrowMessage", "[", "\n", "\t\t\t\t\t\t\t", 
                  RowBox[{
                  "\"\<SiteBuilder\>\"", ",", "\n", "\t\t\t\t\t\t\t", 
                   RowBox[{"Evaluate", "[", 
                    RowBox[{"WebSiteBuild", "::", "badagg"}], "]"}], ",", 
                   "\n", "\t\t\t\t\t\t\t", "aggthing"}], "\n", 
                  "\t\t\t\t\t\t\t", "]"}], ";"}], ",", "\n", "\t\t\t\t\t\t", 
                RowBox[{
                "iWebSiteGenerateAggPages", "[", "\n", "\t\t\t\t\t\t\t", 
                 RowBox[{
                 "outDir", ",", "\n", "\t\t\t\t\t\t\t", "longDir", ",", "\n", 
                  "\t\t\t\t\t\t\t", "thm", ",", "\n", "\t\t\t\t\t\t\t", 
                  "config", ",", "\n", "\t\t\t\t\t\t\t", "aggthing", ",", 
                  "\n", "\t\t\t\t\t\t\t", "aggsingular", ",", "\n", 
                  "\t\t\t\t\t\t\t", "aggdata", ",", "\n", "\t\t\t\t\t\t\t", 
                  "checkChanged", ",", "\n", "\t\t\t\t\t\t\t", 
                  RowBox[{"Hold", "[", "aggbit", "]"}], ",", "\n", 
                  "\t\t\t\t\t\t\t", 
                  RowBox[{"TrueQ", "@", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", "\n", 
                  "\t\t\t\t\t\t\t", "ops"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
               "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], 
            "&"}], ",", "\n", "\t\t\t\t", 
           RowBox[{"Replace", "[", 
            RowBox[{"aggpages", ",", 
             RowBox[{
             "Automatic", "\[RuleDelayed]", 
              "$WebSiteGenerateAggregationPages"}]}], "]"}]}], "\n", 
          "\t\t\t\t", "]"}], ";"}]}], "\n", "\t\t\t", "]"}], ";"}]}], "\n", 
    "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteGenerateAggregationPages", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", "\n", "\t", "aggpages_", ",", "\n", "\t", "outDir_", ",", 
    "\n", "\t", "theme_", ",", "\n", "\t", "config_", ",", "\n", "\t", 
    RowBox[{"ops_", "?", "AssociationQ"}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"WebSiteGenerateAggregationPages", "[", "\n", "  \t", 
   RowBox[{
   "dir", ",", "\n", "  \t", "aggpages", ",", "\n", "  \t", "outDir", ",", 
    "\n", "  \t", "theme", ",", "\n", "  \t", "config", ",", "\n", "  \t", 
    RowBox[{"Normal", "@", "ops"}]}], "\n", "  \t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"3703c99c-40b2-4be0-99a1-879e1a995df5"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GenerateIndexPages\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,
 CellChangeTimes->{{3.7126809292195377`*^9, 3.712680932106715*^9}, 
   3.733711198323041*^9},ExpressionUUID->"ab27dfce-12f4-4896-b0dc-\
cc36f1049e2f"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGatherIndexTemplates\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"c186c3b5-6b19-46a8-b502-d125f3b89ab0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteGatherIndexTemplates", "[", "thm_", "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{
    RowBox[{"FileNameDrop", "[", 
     RowBox[{"#", ",", " ", 
      RowBox[{"1", "+", 
       RowBox[{"FileNameDepth", "[", "thm", "]"}]}]}], "]"}], "&"}], "/@", 
   "\n", "\t\t", 
   RowBox[{"Join", "[", "\n", "\t\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t\t", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
        "thm", ",", " ", "\"\<templates\>\"", ",", " ", 
         "\"\<index.html\>\""}], "}"}], "]"}], "\n", "\t\t\t\t", "}"}], ",", 
     "\n", "\t\t\t", 
     RowBox[{"FileNames", "[", "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{"\"\<*.html\>\"", "|", "\"\<*.xml\>\""}], ",", " ", "\n", 
       "\t\t\t\t", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{
         "thm", ",", " ", "\"\<templates\>\"", ",", " ", "\"\<indexes\>\""}], 
         "}"}]}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"5cedb3c4-ead2-40e5-86cb-793b4c255719"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGenerateIndexPages\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"429ddf2b-c452-487d-b5b8-c4a9465730b1"],

Cell[BoxData[
 RowBox[{"WebSiteGenerateIndexPages", "//", "ClearAll"}]], "CodeInput",
 CellChangeTimes->{{3.712687458977841*^9, 3.7126874598570538`*^9}, 
   3.733704533727862*^9},ExpressionUUID->"0c794023-47b0-4eb7-a850-\
ee01061e6b49"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteGenerateIndexPages", "]"}], "=", "\n", 
   "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<PageSize\>\"", "\[Rule]", "0"}], ",", "\n", "\t\t", 
     RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGenerateIndexPages", "[", 
    RowBox[{
    "dir_", ",", " ", "outDir_", ",", " ", "theme_", ",", " ", "config_", ",",
      " ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"longDir", "=", 
        RowBox[{"ExpandFileName", "@", "dir"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"thm", "=", 
        RowBox[{"WebSiteFindTheme", "[", 
         RowBox[{"dir", ",", " ", "theme", ",", " ", 
          RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}]}], 
      "\n", "\t\t\t", "}"}], ",", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"WebSiteTemplateExportPaginated", "[", "\n", "\t\t\t\t", 
        RowBox[{"#", ",", "\n", "\t\t\t\t", 
         RowBox[{"StringReplace", "[", 
          RowBox[{
           RowBox[{"StringTrim", "[", 
            RowBox[{"#", ",", " ", "\"\<.html\>\""}], "]"}], ",", " ", 
           RowBox[{"\"\<indexes\>\"", "\[Rule]", "\"\<index\>\""}]}], "]"}], 
         ",", "\n", "\t\t\t\t", "outDir", ",", " ", "outDir", ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{"thm", ",", "\n", "\t\t\t\t\t", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], ",", 
           " ", "\n", "\t\t\t\t\t", "longDir"}], "\n", "\t\t\t\t\t", "}"}], 
         ",", "\n", "\t\t\t\t", "None", ",", "\n", "\t\t\t\t", 
         RowBox[{"{", "#", "}"}], ",", " ", "\n", "\t\t\t\t", "config", ",", 
         "\n", "\t\t\t\t", 
         RowBox[{"$WebSiteBuildAggStack", "[", "\"\<Articles\>\"", "]"}], ",",
          "\n", "\t\t\t\t", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "ops", "}"}], ",", " ", "\n", "\t\t\t\t\t", 
           RowBox[{"Options", "@", "WebSiteTemplateExportPaginated"}]}], "\n",
           "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}], "&"}], "/@", 
      RowBox[{"WebSiteGatherIndexTemplates", "[", "thm", "]"}]}]}], "\n", 
    "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteGenerateIndexPages", "[", 
   RowBox[{
   "dir_", ",", " ", "outDir_", ",", " ", "theme_", ",", " ", "config_", ",", 
    " ", 
    RowBox[{"ops_", "?", "AssociationQ"}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"WebSiteGenerateIndexPages", "[", 
   RowBox[{
   "dir", ",", " ", "outDir", ",", " ", "theme", ",", " ", "config", ",", " ", 
    RowBox[{"Normal", "[", "ops", "]"}]}], 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"2fd28c8a-09d1-4caa-953e-4e420a382531"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GenerateContent\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"ac3e0f9f-0345-4993-9434-58e88a3786a2"],

Cell[BoxData[
 RowBox[{"WebSiteGenerateContent", "//", "ClearAll"}]], "CodeInput",
 CellChangeTimes->{{3.712597235663507*^9, 3.712597236408803*^9}, 
   3.712664442599132*^9},ExpressionUUID->"155ef7ab-308d-46df-8fe1-\
aa014362de4a"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "genfl"}], "=", 
   "\"\<Failed to generate HTML for file ``\>\""}], ";"}]], "CodeInput",
 CellChangeTimes->{{3.712626329552887*^9, 
  3.712626343921582*^9}},ExpressionUUID->"fc209754-37e0-4a90-8772-\
48fff912225b"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteGenerateContent", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Monitor", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "None"}]}], "\n", "\t\t", 
    "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGenerateContent", "[", "\n", "\t", 
    RowBox[{
    "dir_", ",", "files_", ",", "\n", "\t", "outDir_", ",", "theme_", ",", 
     "config_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"longDir", "=", 
        RowBox[{"ExpandFileName", "@", "dir"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"thm", "=", 
        RowBox[{"WebSiteFindTheme", "[", 
         RowBox[{"dir", ",", " ", "theme", ",", " ", 
          RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}], 
       ",", "\n", "\t\t\t", 
       RowBox[{"lb", "=", 
        RowBox[{"OptionValue", "[", "\"\<LastBuild\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", "fname", ",", "\n", "\t\t\t", "cname", ",", "\n", "\t\t\t", 
       "path", ",", "\n", "\t\t\t", "fout", ",", "\n", "\t\t\t", "conf", ",", 
       "\n", "\t\t\t", "mod"}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Block", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"{", "\n", "\t\t\t\t", 
         RowBox[{"genfile", ",", "\n", "\t\t\t\t", "outfile"}], "\n", 
         "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"TrueQ", "@", 
            RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", 
           "Monitor", ",", " ", 
           RowBox[{"#", "&"}]}], "]"}], "[", "\n", "\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"With", "[", "\n", "\t\t\t\t", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"f", "=", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", "\n", 
               "\t\t\t\t", 
               RowBox[{"Function", "[", "\n", "\t\t\t\t\t", 
                RowBox[{"Null", ",", "\n", "\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"mod", "=", "\n", "\t\t\t\t\t\t", 
                   RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"DateObjectQ", "@", 
                    RowBox[{"conf", "[", "\"\<Modified\>\"", "]"}]}], ",", 
                    " ", "\n", "\t\t\t\t\t\t\t", 
                    RowBox[{"conf", "[", "\"\<Modified\>\"", "]"}], ",", " ", 
                    "\n", "\t\t\t\t\t\t\t", 
                    RowBox[{"FileDate", "[", 
                    RowBox[{"f", ",", " ", "\"\<Modification\>\""}], "]"}]}], 
                    "\n", "\t\t\t\t\t\t\t", "]"}]}], ";", "\n", "\t\t\t\t\t", 
                  
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"!", 
                    RowBox[{"DateObjectQ", "@", "lb"}]}], "||", 
                    RowBox[{"mod", "\[GreaterEqual]", "lb"}]}], ",", "\n", 
                    "\t\t\t\t\t\t", "#", ",", "\n", "\t\t\t\t\t\t", 
                    "Nothing"}], "\n", "\t\t\t\t\t\t", "]"}]}], ",", "\n", 
                 "\t\t\t\t\t", "HoldAllComplete"}], "\n", "\t\t\t\t\t", 
                "]"}]}], "\n", "\t\t\t\t", "]"}], "@", "\n", "\t\t\t\t", 
             RowBox[{"CompoundExpression", "[", "\n", "\t\t\t\t\t", 
              RowBox[{
               RowBox[{"fname", "=", "\n", "\t\t\t\t\t\t", 
                RowBox[{"(*", " ", 
                 RowBox[{
                 "In", " ", "case", " ", "the", " ", "file", " ", "had", " ", 
                  "a", " ", "path", " ", "already"}], " ", "*)"}], "\n", 
                "\t\t\t\t\t\t", 
                RowBox[{"ExpandFileName", "@", "\n", "\t", "\t\t\t\t\t\t", 
                 RowBox[{"Replace", "[", 
                  RowBox[{"#", ",", 
                   RowBox[{
                    RowBox[{"Except", "[", 
                    RowBox[{"_String", "|", "_File"}], "]"}], 
                    "\[RuleDelayed]", 
                    RowBox[{"First", "[", "#", "]"}]}]}], "]"}]}]}], ",", 
               "\n", "\t\t\t\t\t", 
               RowBox[{"cname", "=", 
                RowBox[{"webSitePrepContentName", "[", 
                 RowBox[{"fname", ",", " ", "dir"}], "]"}]}], ",", "\n", 
               "\t\t\t\t\t", 
               RowBox[{"path", "=", "\n", "\t\t\t\t\t\t", 
                RowBox[{"(*", " ", 
                 RowBox[{
                  RowBox[{"Use", " ", "path", " ", "if", " ", "provided"}], 
                  ",", " ", 
                  RowBox[{"else", " ", 
                   RowBox[{"base", ".", "html"}]}]}], " ", "*)"}], "\n", "\t",
                 "\t\t\t\t\t", 
                RowBox[{"Flatten", "@", 
                 RowBox[{"List", "@", "\n", "\t", "\t\t\t\t\t\t", 
                  RowBox[{"Replace", "[", 
                   RowBox[{"#", ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", 
                    RowBox[{"{", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Except", "[", 
                    RowBox[{"_String", "|", "_File"}], "]"}], 
                    "\[RuleDelayed]", 
                    RowBox[{"Last", "[", "#", "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"_", ":>", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildGetTemplates", "[", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "ExpandFileName", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Replace", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{
                    RowBox[{"Except", "[", 
                    RowBox[{"_String", "|", "_File"}], "]"}], 
                    "\[RuleDelayed]", 
                    RowBox[{"First", "[", "#", "]"}]}]}], "]"}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "longDir"}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t\t", 
                   "]"}]}]}]}], ",", "\n", "\t\t\t\t\t", 
               RowBox[{"fout", "=", "\n", "\t\t\t\t\t\t", 
                RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"Fold", "[", "\n", "\t\t\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{"#", ",", " ", "#2", ",", " ", 
                    RowBox[{"<|", "|>"}]}], "]"}], "&"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t", "$WebSiteBuildContentStack", ",", 
                    "\n", "\t\t\t\t\t\t\t\t", 
                    RowBox[{"{", 
                    RowBox[{
                    "fname", ",", " ", "\"\<Attributes\>\"", ",", " ", 
                    "\"\<URL\>\""}], "}"}]}], "\n", "\t\t\t\t\t\t\t\t", "]"}],
                   ",", "\n", "\t\t\t\t\t\t\t", 
                  RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{"u_String", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameJoin", "@", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Flatten", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"outDir", ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"URLParse", "[", 
                    RowBox[{"u", ",", " ", "\"\<Path\>\""}], "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "}"}]}]}]}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t", 
                    RowBox[{"_", ":>", "\n", "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildAttachExtension", "@", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"outDir", ",", "\n", "\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildSlug", "@", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{
                    "Lookup", "[", "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    "$WebSiteBuildContentStack", ",", " ", "cname", ",", " ", 
                    
                    RowBox[{"<|", "|>"}]}], "]"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", "\"\<Attributes\>\"", ",",
                     "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"<|", "|>"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "\"\<FilePath\>\"", ",", 
                    "\n", "\t\t\t\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"WebSiteBuildFilePath", "[", 
                    RowBox[{"cname", ",", " ", "outDir"}], "]"}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
                    "\t\t\t\t\t\t\t\t\t\t\t", "}"}]}]}]}]}], "\n", 
                   "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t", 
                 "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"genfile", "=", "fname"}], ";", "\n", "\t\t\t\t\t\t", 
                
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"!", 
                   RowBox[{"DirectoryQ", "@", 
                    RowBox[{"DirectoryName", "@", "fout"}]}]}], ",", "\n", 
                  "\t", "\t", "\t\t\t\t\t", 
                  RowBox[{"CreateDirectory", "@", 
                   RowBox[{"DirectoryName", "@", "fout"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{"conf", "=", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                   RowBox[{"config", ",", "\n", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<URL\>\"", "\[Rule]", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "WebSiteBuildURL", "@", "\n", "\t", 
                    "\t\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"FileNameDrop", "[", 
                    RowBox[{"fout", ",", " ", 
                    RowBox[{"FileNameDepth", "@", "outDir"}]}], "]"}]}]}]}], 
                   "\n", "\t", "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", 
                  "\t\t\t\t\t\t\t\t", "Last"}], "\n", "\t\t\t\t\t\t\t\t", 
                 "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{
               "WebSiteSetContentAttributes", "[", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"fname", ",", "\n", "\t\t\t\t\t\t\t", 
                 RowBox[{"\"\<URL\>\"", "->", 
                  RowBox[{"conf", "[", "\"\<URL\>\"", "]"}]}]}], "\n", 
                "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{
                "genfile", ",", "\n", "\t\t\t\t\t\t\t", "fout", ",", "\n", 
                 "\t\t\t\t\t\t\t", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], 
                   ",", "longDir"}], "}"}], ",", "\n", "\t\t\t\t\t\t\t", 
                 "fname", ",", "\n", "\t\t\t\t\t\t\t", "path", ",", "\n", 
                 "\t\t\t\t\t\t\t", "conf"}], "\n", "\t\t\t\t\t\t\t", "]"}], 
               ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"outfile", "=."}], ";"}]}], "\n", "\t\t\t\t\t\t", 
              "]"}]}], "&"}], "/@", "files"}], ",", "\n", "\t\t\t\t", 
          RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t", 
           RowBox[{"TemplateApply", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{"\"\<Exporting ``\>\"", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{
             "{", "\n", "\t\t\t\t\t\t\t", "genfile", "\n", "\t\t\t\t\t\t\t", 
              "}"}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t", 
         "]"}]}], "\n", "\t\t\t", "]"}], ";"}]}], "\n", "\t\t", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteGenerateContent", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", "files_", ",", "\n", "\t", "outDir_", ",", "theme_", ",", 
    "config_", ",", "\n", "\t", 
    RowBox[{"ops_", "?", "AssociationQ"}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"WebSiteGenerateContent", "[", "\n", "  \t", 
   RowBox[{
   "dir", ",", " ", "files", ",", "\n", "  \t", "outDir", ",", " ", "theme", 
    ",", " ", "config", ",", "\n", "  \t", 
    RowBox[{"Normal", "@", "ops"}]}], "\n", "  \t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"b60e663c-5f82-460e-af16-e6841392aac5"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GenerateSearchPage\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"8c802e12-5e04-494c-960a-449dbf7df2a4"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteGenerateSearchIndex\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"6272380c-c59d-4bd4-aa29-43ea21b45fd6"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iWebSiteGenerateSearchIndex", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", " ", "\n", "\t", "outDir_", ",", "\n", "\t", "config_"}], 
   "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"contentData", "=", "\n", "\t\t\t\t", 
       RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{"Values", "@", "$WebSiteBuildContentStack"}], ",", "\n", 
         "\t\t\t\t\t", "\"\<Attributes\>\""}], "\n", "\t\t\t\t\t", "]"}]}], 
      ",", "\n", "\t\t\t", "siteIndexedContent", ",", "\n", "\t\t\t", 
      "selector", ",", "\n", "\t\t\t", "pagesForReal"}], "\n", "\t\t\t", 
     "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"siteIndexedContent", "=", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Except", "[", 
          RowBox[{"{", "__String", "}"}], "]"}], "\[RuleDelayed]", 
         RowBox[{"{", "\"\<Articles\>\"", "}"}]}], "\n", "\t\t\t\t", "]"}], 
       "@", 
       RowBox[{"config", "[", "\"\<SearchedPages\>\"", "]"}]}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"selector", "=", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"Evaluate", "[", "\n", "\t\t\t\t", 
         RowBox[{"holdMemQ", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"#", "[", "\"\<Templates\>\"", "]"}], ",", " ", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"Alternatives", "@@", "\n", "\t\t\t\t\t", 
            RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t", 
             RowBox[{"siteIndexedContent", ",", " ", "\n", "\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{
                "\"\<Articles\>\"", "\[Rule]", "\"\<article.html\>\""}], ",", 
                "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"\"\<Pages\>\"", "\[Rule]", "\"\<page.html\>\""}], 
                ",", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"\"\<Images\>\"", "|", "\"\<Themes\>\""}], ":>", 
                 "Nothing"}], ",", "\n", "\t\t\t\t\t\t\t", 
                RowBox[{"s_String", "\[RuleDelayed]", 
                 RowBox[{
                  RowBox[{"StringTrim", "[", 
                   RowBox[{"s", ",", " ", "\"\<.html\>\""}], "]"}], "<>", 
                  "\"\<.html\>\""}]}]}], "\n", "\t\t\t\t\t\t\t", "}"}], ",", 
              "\n", "\t\t\t\t\t\t", "1"}], "\n", "\t\t\t\t\t\t", "]"}]}]}], 
          "\n", "\t\t\t\t\t", "]"}], "\n", "\t\t\t\t", "]"}], "&"}], "/.", 
       RowBox[{"holdMemQ", "\[Rule]", "MemberQ"}]}]}], ";", "\n", "\t\t", 
     RowBox[{"contentData", "=", "\n", "\t\t\t", 
      RowBox[{"Map", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"AssociationThread", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
            "\"\<title\>\"", ",", " ", "\"\<text\>\"", ",", " ", 
             "\"\<tags\>\"", ",", " ", "\"\<url\>\"", ",", " ", 
             "\"\<note\>\""}], "}"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{
              "#", ",", " ", "\"\<Title\>\"", ",", " ", "\"\<Untitled\>\""}], 
              "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"ImportString", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"Lookup", "[", 
                RowBox[{
                "#", ",", " ", "\"\<Content\>\"", ",", " ", 
                 "\"\<<p>No content...</p>\>\""}], "]"}], ",", "\n", 
               "\t\t\t\t\t\t\t", "\"\<HTML\>\""}], "\n", "\t\t\t\t\t\t\t", 
              "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"StringRiffle", "[", 
              RowBox[{"Lookup", "[", 
               RowBox[{"#", ",", " ", "\"\<Tags\>\"", ",", " ", 
                RowBox[{"{", "}"}]}], "]"}], "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Lookup", "[", 
              RowBox[{
              "#", ",", " ", "\"\<URL\>\"", ",", " ", 
               "\"\<??_y_dough_??.html\>\""}], "]"}], ",", "\n", 
             "\t\t\t\t\t\t", "\"\<\>\""}], 
            RowBox[{"(*", 
             RowBox[{"Lookup", "[", 
              RowBox[{
              "#", ",", " ", "\"\<Summary\>\"", ",", " ", 
               "\"\<No summary...\>\""}], "]"}], "*)"}], "\n", "\t\t\t\t\t\t",
             "}"}]}], "\n", "\t\t\t\t\t", "]"}], "&"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"Select", "[", "\n", "\t\t\t\t\t", 
         RowBox[{"contentData", ",", "\n", "\t\t\t\t\t", "selector"}], "\n", 
         "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     
     RowBox[{"Export", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{
         "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", ",",
           " ", "\"\<search_index.json\>\""}], "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"<|", 
        RowBox[{"\"\<pages\>\"", "\[Rule]", 
         RowBox[{"Replace", "[", 
          RowBox[{"contentData", ",", " ", 
           RowBox[{
            RowBox[{"Except", "[", 
             RowBox[{"{", 
              RowBox[{"__", "?", "AssociationQ"}], "}"}], "]"}], "->", 
            RowBox[{"{", "}"}]}]}], "]"}]}], "|>"}]}], "\n", "\t\t\t", 
      "]"}]}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"eaa0a71b-fa93-4409-ad61-8dd1344fad8f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteGenerateSearchConfig\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"14bf8127-0167-4597-b1cd-480bbe16c2d1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebSiteTipueSearchOptions", "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<ContextBuffer\>\"", "\[Rule]", "60"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ContextLength\>\"", "\[Rule]", "60"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ContextStart\>\"", "\[Rule]", "90"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<Debug\>\"", "\[Rule]", "False"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<DescriptiveWords\>\"", "\[Rule]", "25"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<FooterPages\>\"", "\[Rule]", "3"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<HighlightTerms\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ImageZoom\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<MinimumLength\>\"", "\[Rule]", "3"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<NewWindow\>\"", "\[Rule]", "False"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<Show\>\"", "\[Rule]", "10"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowContext\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowRelated\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowTime\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowTitleCount\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<ShowURL\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<WholeWords\>\"", "\[Rule]", "False"}]}], "\n", "\t\t", 
    "}"}]}], ";"}]], \
"CodeInput",ExpressionUUID->"13a7e178-4256-4952-a074-e77eb9f49072"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iWebSiteGenerateSearchConfig", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", " ", "\n", "\t", "outDir_", ",", "\n", "\t", "config_"}], 
   "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
     "stopWords", ",", "\n", "\t\t\t", "reps", ",", "\n", "\t\t\t", "weights",
       ",", "\n", "\t\t\t", "stems", ",", "\n", "\t\t\t", "includes", ",", 
      "\n", "\t\t\t", "related", ",", "\n", "\t\t\t", "ops"}], "\n", "\t\t\t",
      "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"stopWords", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<Stopwords\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"DeleteDuplicates", "@", 
            RowBox[{"ToLowerCase", "@", 
             RowBox[{"WordList", "[", "\"\<Stopwords\>\"", "]"}]}]}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"e", ":", 
            RowBox[{"{", "__String", "}"}]}], ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"DeleteDuplicates", "@", 
            RowBox[{"ToLowerCase", "@", "e"}]}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"reps", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<Replacements\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_String"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<word\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<replace_with\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], ",", "\n",
              "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"weights", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<URLWeights\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_Integer"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<url\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<score\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], ",", "\n",
              "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"stems", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<WordStems\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_String"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<word\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<stem\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], ",", "\n",
              "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"includes", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<IncludedTerms\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_String"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<search\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<related\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<include\>\"", "\[Rule]", "1"}]}], "}"}], "&"}], 
             ",", "\n", "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", 
            "]"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"related", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"config", "[", "\"\<RelatedTerms\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"s", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_String"}], ")"}], "..."}], 
             "}"}]}], ":>", "\n", "\t", "\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"\"\<search\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
                RowBox[{"\"\<related\>\"", "\[Rule]", 
                 RowBox[{"#", "[", 
                  RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}], "&"}], ",", "\n",
              "\t\t\t\t\t\t\t", "s"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"related", "=", "\n", "\t\t\t", 
      RowBox[{"Which", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"ListQ", "@", "related"}], "&&", 
         RowBox[{"ListQ", "@", "includes"}]}], ",", "\n", "\t", "\t\t\t\t", 
        RowBox[{"DeleteDuplicates", "@", 
         RowBox[{"Join", "[", 
          RowBox[{"includes", ",", " ", "related"}], "]"}]}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"ListQ", "@", "related"}], ",", "\n", "\t\t\t\t\t", 
        RowBox[{"DeleteDuplicates", "@", "related"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"ListQ", "@", "includes"}], ",", "\n", "\t\t\t\t\t", 
        RowBox[{"DeleteDuplicates", "@", "includes"}], ",", "\n", "\t\t\t\t", 
        "True", ",", "\n", "\t\t\t\t\t", "None"}], "\n", "\t\t\t\t", "]"}]}], 
     ";", "\n", "\t\t", 
     RowBox[{"ops", "=", "\n", "\t\t\t", 
      RowBox[{"Replace", "[", 
       RowBox[{
        RowBox[{"config", "[", "\"\<Options\>\"", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"ToLowerCase", "@", 
                 RowBox[{"StringTake", "[", 
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", "1"}], "]"}]}], 
                "<>", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"StringDrop", "[", 
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", " ", "1"}], "]"}]}], "->", 
               RowBox[{"#", "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], "&"}], ",", "\n", 
             "\t\t\t\t\t\t\t", "$WebSiteTipueSearchOptions"}], "\n", 
            "\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"o", ":", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"_String", "\[Rule]", "_"}], ")"}], ".."}], "}"}]}], ":>",
            "\n", "\t\t\t\t\t\t", 
           RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"ToLowerCase", "@", 
                 RowBox[{"StringTake", "[", 
                  RowBox[{
                   RowBox[{"#", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], ",", " ", "1"}], "]"}]}], 
                "<>", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"StringDrop", "[", 
                 RowBox[{
                  RowBox[{"#", "[", 
                   RowBox[{"[", "1", "]"}], "]"}], ",", " ", "1"}], "]"}]}], "->", 
               RowBox[{"#", "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], "&"}], ",", "\n", 
             "\t\t\t\t\t\t\t", "o"}], "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"_", "\[Rule]", "None"}]}], "\n", "\t\t\t\t\t", "}"}]}], 
       "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"<|", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"\"\<StopWords\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "stopWords"}], ",", "\n", "\t", "\t\t\t\t\t", 
          
          RowBox[{"Export", "[", "\n", "\t", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_stopwords.json\>\""}], "}"}]}], ",", 
            "\n", "\t", "\t\t\t\t\t\t", "stopWords"}], "\n", "\t", 
           "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_stopwords.json\>\""}], "}"}]}]}], ",", 
          "\n", "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", 
          "\n", "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_stopwords.json\>\""}], "}"}]}], ",", 
            "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], "\n", 
         "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<Replacements\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "reps"}], ",", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_replacements.json\>\""}], "}"}]}], ",", 
            "\n", "\t", "\t", "\t", "\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<words\>\"", "->", "reps"}], "}"}]}], "\n", 
           "\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", "\n", "\t\t\t\t\t\t", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_replacements.json\>\""}], "}"}]}]}], ",", 
          "\n", "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", 
          "\n", "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_replacements.json\>\""}], "}"}]}], ",", 
            "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<words\>\"", "->", 
              RowBox[{"{", "}"}]}], "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<URLWeights\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "weights"}], ",", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_weights.json\>\""}], "}"}]}], ",", "\n",
             "\t", "\t", "\t", "\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<weight\>\"", "\[Rule]", "weights"}], "}"}]}], "\n", 
           "\t", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_weights.json\>\""}], "}"}]}]}], ",", "\n",
           "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", "\n",
           "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_weights.json\>\""}], "}"}]}], ",", "\n",
             "\t\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<weight\>\"", "->", 
              RowBox[{"{", "}"}]}], "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<WordStems\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "stems"}], ",", "\n", "\t", "\t", "\t\t\t\t", 
          
          RowBox[{"Export", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_stems.json\>\""}], "}"}]}], ",", "\n", 
            "\t", "\t", "\t", "\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<words\>\"", "\[Rule]", "stems"}], "}"}]}], "\n", 
           "\t", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_stems.json\>\""}], "}"}]}]}], ",", "\n", 
          "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", "\n", 
          "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_stems.json\>\""}], "}"}]}], ",", "\n", 
            "\t\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<words\>\"", "\[Rule]", 
              RowBox[{"{", "}"}]}], "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<RelatedTerms\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "related"}], ",", "\n", "\t", "\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_related.json\>\""}], "}"}]}], ",", "\n",
             "\t", "\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<Related\>\"", "\[Rule]", "related"}], "}"}]}], "\n",
            "\t", "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_related.json\>\""}], "}"}]}]}], ",", "\n",
           "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", "\n",
           "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_related.json\>\""}], "}"}]}], ",", "\n",
             "\t\t\t\t\t\t\t", 
            RowBox[{"{", 
             RowBox[{"\"\<Related\>\"", "->", 
              RowBox[{"{", "}"}]}], "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], 
         " ", "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<Options\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"ListQ", "@", "ops"}], ",", "\n", "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t", "\t", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_options.json\>\""}], "}"}]}], ",", "\n",
             "\t\t\t\t\t\t\t", "ops"}], "\n", "\t\t\t\t\t\t\t", "]"}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"FileExistsQ", "@", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{
             "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"", 
              ",", " ", "\"\<search_options.json\>\""}], "}"}]}]}], ",", "\n",
           "\t\t\t\t\t\t", "None", ",", "\n", "\t\t\t\t\t", "True", ",", "\n",
           "\t\t\t\t\t\t", 
          RowBox[{"Export", "[", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{
              "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\"",
                ",", " ", "\"\<search_options.json\>\""}], "}"}]}], ",", "\n",
             "\t\t\t\t\t\t\t", 
            RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}], " ", "\n", 
         "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", "|>"}]}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"d4828e41-387a-45bd-88d1-cd873f216668"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGenerateSearchPage\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"923e2894-eab3-4e46-8cf7-2fe9f2c2134c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteGenerateSearchPage", "]"}], "=", "\n", 
   "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<SearchPageOptions\>\"", "\[Rule]", 
      RowBox[{"{", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"\"\<SearchedPages\>\"", "\[Rule]", 
         RowBox[{"{", "\"\<Articles\>\"", "}"}]}], ",", "\n", "\t\t\t", 
        RowBox[{"\"\<Stopwords\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{"\"\<Replacements\>\"", "\[Rule]", "None"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{"\"\<URLWeights\>\"", "\[Rule]", "None"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{"\"\<WordStems\>\"", "\[Rule]", "None"}], ",", "\n", "\t\t\t", 
        RowBox[{"\"\<IncludedTerms\>\"", "\[Rule]", "None"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{"\"\<RelatedTerms\>\"", "\[Rule]", "None"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{
        "\"\<Options\>\"", "\[Rule]", "$WebSiteTipueSearchOptions"}]}], "\n", 
       "\t\t\t", "}"}]}], ",", "\n", "\t\t", 
     RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteGenerateSearchPage", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", " ", "\n", "\t", "outDir_", ",", "\n", "\t", "theme_", ",", 
    "\n", "\t", "config_", ",", " ", "\n", "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"searchOps", "=", "\n", "\t\t\t\t", 
       RowBox[{"Association", "@", "\n", "\t\t\t\t\t", 
        RowBox[{"Replace", "[", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<SearchPageOptions\>\"", "]"}], ",",
           "\n", "\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Except", "[", 
            RowBox[{
             RowBox[{"_", "?", "OptionQ"}], "|", 
             RowBox[{"_", "?", "AssociationQ"}]}], "]"}], "\[RuleDelayed]", 
           RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], ",", "\n",
       "\t\t\t", 
      RowBox[{"thm", "=", "\n", "\t\t\t\t", 
       RowBox[{"WebSiteFindTheme", "[", 
        RowBox[{"dir", ",", " ", "theme", ",", " ", 
         RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}]}], 
     "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"DirectoryQ", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\""}], 
           "}"}]}]}]}], ",", "\n", "\t\t\t", 
       RowBox[{"CreateDirectory", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "outDir", ",", " ", "\"\<theme\>\"", ",", " ", "\"\<search\>\""}], 
           "}"}]}], ",", "\n", "\t\t\t\t", 
         RowBox[{"CreateIntermediateDirectories", "\[Rule]", "True"}]}], "\n",
         "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"Prepend", "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"TrueQ", "@", 
           RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"Function", "[", 
           RowBox[{"Null", ",", " ", "\n", "\t", "\t", "\t", "\t\t\t", 
            RowBox[{"Monitor", "[", 
             RowBox[{"#", ",", " ", 
              RowBox[{
              "Internal`LoadingPanel", "@", 
               "\"\<Generating search config...\>\""}]}], "]"}], ",", " ", 
            "\n", "\t", "\t", "\t", "\t\t\t", "HoldFirst"}], "\n", "\t", "\t",
            "\t", "\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", "\t\t", 
          "Identity"}], "\n", "\t\t\t\t\t", "]"}], "@", 
        RowBox[{"iWebSiteGenerateSearchConfig", "[", 
         RowBox[{"dir", ",", " ", "outDir", ",", " ", "searchOps"}], "]"}]}], 
       ",", "\n", "\t\t\t", 
       RowBox[{"\"\<Index\>\"", "->", "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"searchOps", "[", "\"\<SearchedPages\>\"", "]"}], "=!=", 
           "None"}], ",", "\n", "\t", "\t\t\t\t", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"TrueQ", "@", 
              RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "\n", 
             "\t", "\t", "\t\t\t\t", 
             RowBox[{"Function", "[", 
              RowBox[{
              "Null", ",", " ", "\n", "\t", "\t", "\t", "\t", "\t\t\t", 
               RowBox[{"Monitor", "[", 
                RowBox[{"#", ",", " ", 
                 RowBox[{
                 "Internal`LoadingPanel", "@", 
                  "\"\<Generating search index...\>\""}]}], "]"}], ",", " ", 
               "\n", "\t", "\t", "\t", "\t", "\t\t\t", "HoldFirst"}], "\n", 
              "\t", "\t", "\t", "\t", "\t\t\t", "]"}], ",", "\n", "\t", "\t", 
             "\t", "\t", "\t\t", "Identity"}], "\n", "\t", "\t", "\t\t\t\t", 
            "]"}], "@", 
           RowBox[{"iWebSiteGenerateSearchIndex", "[", 
            RowBox[{"dir", ",", " ", "outDir", ",", " ", "searchOps"}], 
            "]"}]}], ",", "\n", "\t\t\t\t", "Nothing"}], "\n", "\t\t\t\t", 
         "]"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"DirectoryQ", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "outDir", ",", " ", "\"\<theme\>\"", ",", " ", 
            "\"\<tipuesearch\>\""}], "}"}]}]}]}], ",", "\n", "\t\t\t", 
       RowBox[{"CopyDirectory", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"PackageFilePath", "[", 
          RowBox[{
          "\"\<Resources\>\"", ",", " ", "\"\<Themes\>\"", ",", " ", 
           "\"\<template_lib\>\"", ",", " ", "\"\<tipuesearch\>\""}], "]"}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{
           "outDir", ",", " ", "\"\<theme\>\"", ",", " ", 
            "\"\<tipuesearch\>\""}], "}"}]}]}], "\n", "\t\t\t\t", "]"}]}], 
      "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "\n", 
        "\t\t\t\t\t", 
        RowBox[{"Function", "[", 
         RowBox[{"Null", ",", " ", "\n", "\t", "\t", "\t", "\t\t\t", 
          RowBox[{"Monitor", "[", 
           RowBox[{"#", ",", " ", 
            RowBox[{
            "Internal`LoadingPanel", "@", 
             "\"\<Generating search.html\>\""}]}], "]"}], ",", " ", "\n", 
          "\t\t\t\t\t\t", "HoldFirst"}], "\n", "\t", "\t", "\t", "\t\t\t", 
         "]"}], ",", "\n", "\t", "\t", "\t", "\t\t", "Identity"}], "\n", 
       "\t\t\t\t\t", "]"}], "@", "\n", "\t\t\t", 
      RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t", 
       RowBox[{"\"\<search\>\"", ",", "\n", "\t", "\t\t\t", 
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"{", 
          RowBox[{"outDir", ",", " ", "\"\<search.html\>\""}], "}"}]}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], ",", 
          "\n", "\t\t\t\t\t", "dir"}], "\n", "\t\t\t\t\t", "}"}], ",", "\n", 
        "\t\t\t\t", "None", ",", "\n", "\t\t\t\t", 
        RowBox[{"{", "\"\<search.html\>\"", "}"}], ",", "\n", "\t\t\t\t", 
        "config"}], "\n", "\t", "\t\t\t", "]"}]}]}]}], "\n", "\t\t", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"a289b95b-46e9-47e2-ae7c-386b3ac77a9c"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GenerateRedirectPages\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"9f1bed74-64e6-4ebe-b926-ce4425228f90"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteGenerateRedirectPages", "]"}], "=", "\n", 
   "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<RedirectPages\>\"", "\[Rule]", 
      RowBox[{"{", "}"}]}], ",", "\n", "\t\t", 
     RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGenerateRedirectPages", "[", "\n", "\t", 
    RowBox[{
    "dir_", ",", " ", "\n", "\t", "outDir_", ",", "\n", "\t", "theme_", ",", 
     "\n", "\t", "config_", ",", " ", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Block", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{"from", ",", " ", "\n", "\t\t\t", "to", ",", "\n", "\t\t\t", 
       RowBox[{"thm", "=", "\n", "\t\t\t\t", 
        RowBox[{"WebSiteFindTheme", "[", 
         RowBox[{"dir", ",", " ", "theme", ",", " ", 
          RowBox[{"\"\<DownloadTheme\>\"", "\[Rule]", "True"}]}], "]"}]}], 
       ",", "\n", "\t\t\t", 
       RowBox[{"pages", "=", "\n", "\t\t\t\t", 
        RowBox[{"Association", "@", "\n", "\t\t\t\t\t", 
         RowBox[{"Replace", "[", 
          RowBox[{
           RowBox[{"OptionValue", "[", "\"\<RedirectPages\>\"", "]"}], ",", 
           "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Except", "[", 
             RowBox[{
              RowBox[{"_", "?", "OptionQ"}], "|", 
              RowBox[{"_", "?", "AssociationQ"}]}], "]"}], "\[RuleDelayed]", 
            RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t", "]"}]}]}], ",", 
       "\n", "\t\t\t", "pagesDefault"}], "\n", "\t\t\t", "}"}], ",", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"pages", "=", "\n", "\t\t\t", 
       RowBox[{"Association", "/@", "\n", "\t\t\t\t", 
        RowBox[{"Select", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"Map", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Replace", "[", 
             RowBox[{"s_String", "\[RuleDelayed]", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{"\"\<RedirectURL\>\"", "\[Rule]", "s"}], "\n", 
               "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t\t", "]"}], 
            ",", "\n", "\t\t\t\t\t\t", "pages"}], "\n", "\t\t\t\t\t\t", "]"}],
           ",", "\n", "\t\t\t\t\t", "OptionQ"}], "\n", "\t\t\t\t\t", 
         "]"}]}]}], ";", "\n", "\t\t", 
      RowBox[{"pagesDefault", "=", "\n", "\t\t\t", 
       RowBox[{"<|", "\n", "\t\t\t\t", 
        RowBox[{"\"\<PauseTime\>\"", "\[Rule]", "0"}], "\n", "\t\t\t\t", 
        "|>"}]}], ";", "\n", "\t\t", 
      RowBox[{"pages", "=", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"Join", "[", 
          RowBox[{"pagesDefault", ",", " ", "#"}], "]"}], "&"}], "/@", 
        "pages"}]}], ";", "\n", "\t\t", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", 
          RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", " ", "\n", 
         "\t\t\t\t\t", 
         RowBox[{"Function", "[", 
          RowBox[{"Null", ",", " ", "\n", "\t", "\t", "\t", "\t\t\t", 
           RowBox[{"Monitor", "[", 
            RowBox[{"#", ",", " ", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"Internal`LoadingPanel", "@", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"TemplateApply", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{
               "\"\<Generating redirect for `` to ``\>\"", ",", "\n", 
                "\t\t\t\t\t\t\t\t\t", 
                RowBox[{"{", 
                 RowBox[{"from", ",", " ", "to"}], "}"}]}], "\n", 
               "\t\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t\t\t\t", 
            "]"}], ",", " ", "\n", "\t\t\t\t\t\t", "HoldFirst"}], "\n", 
          "\t\t\t\t\t\t", "]"}], ",", "\n", "\t", "\t", "\t", "\t\t", 
         "Identity"}], "\n", "\t\t\t\t\t", "]"}], "@", "\n", "\t\t\t", 
       RowBox[{"KeyValueMap", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Function", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"from", "=", "#"}], ";", "\n", "\t\t\t\t\t", 
           RowBox[{"to", "=", 
            RowBox[{"Lookup", "[", 
             RowBox[{"#2", ",", " ", "\"\<RedirectURL\>\""}], "]"}]}], ";", 
           "\n", "\t\t\t\t\t", 
           RowBox[{"WebSiteTemplateExport", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{"#", ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"FileNameJoin", "@", 
              RowBox[{"{", 
               RowBox[{"outDir", ",", " ", 
                RowBox[{"#", "<>", "\"\<.html\>\""}]}], "}"}]}], ",", "\n", 
             "\t", "\t", "\t\t\t\t", 
             RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t", 
              RowBox[{
               RowBox[{"FileNameJoin", "@", 
                RowBox[{"{", 
                 RowBox[{"thm", ",", " ", "\"\<templates\>\""}], "}"}]}], ",",
                "\n", "\t", "\t", "\t\t\t\t\t", "dir"}], "\n", "\t", "\t", 
              "\t\t\t\t\t", "}"}], ",", "\n", "\t", "\t", "\t\t\t\t", "None", 
             ",", "\n", "\t", "\t", "\t\t\t\t", 
             RowBox[{"{", "\"\<redirect.html\>\"", "}"}], ",", "\n", "\t", 
             "\t\t\t\t\t", 
             RowBox[{"Join", "[", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{"#2", ",", "\n", "\t", "\t\t\t\t\t\t", "config"}], "\n",
               "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}]}], "\n",
           "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "pages"}], "\n", 
        "\t\t\t\t", "]"}]}]}]}], "\n", "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteGenerateRedirectPages", "[", "\n", "\t", 
    RowBox[{
    "dir_", ",", " ", "\n", "\t", "outDir_", ",", "\n", "\t", "theme_", ",", 
     "\n", "\t", "config_", ",", " ", "\n", "\t", 
     RowBox[{"ops_", "?", "AssociationQ"}]}], "\n", "\t", "]"}], ":=", "\n", 
   "\t", 
   RowBox[{"WebSiteGenerateRedirectPages", "[", "\n", "\t  ", 
    RowBox[{
    "dir", ",", " ", "\n", "  \t", "outDir", ",", "\n", "  \t", "theme", ",", 
     "\n", "  \t", "config", ",", " ", "\n", "  \t", 
     RowBox[{"Normal", "@", "ops"}]}], "\n", "  \t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"355df8ef-a957-4144-be88-651084895bab"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Logging\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"9be9f595-6843-4c59-b10c-ff47ae93c432"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuildLogError\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"1a09199e-2a96-435b-b2c1-a546ba803cff"],

Cell[BoxData[
 RowBox[{
  RowBox[{"WebSiteBuildLogError", "[", 
   RowBox[{"file_", ",", " ", "key_", ",", " ", "body_"}], "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"!", 
     RowBox[{"KeyExistsQ", "[", 
      RowBox[{"$WebSiteBuildErrors", ",", " ", "file"}], "]"}]}], ",", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"$WebSiteBuildErrors", "[", "file", "]"}], "=", 
     RowBox[{"<|", 
      RowBox[{"key", "\[Rule]", "body"}], "|>"}]}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"$WebSiteBuildErrors", "[", 
      RowBox[{"file", ",", " ", "key"}], "]"}], "=", "body"}]}], "\n", "\t\t",
    "]"}]}]], \
"CodeInput",ExpressionUUID->"4200b695-2b44-4f81-adc7-6ce21a831729"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Build\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"a820b486-ce57-4e19-ac3d-fe753a60ceba"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteBuildGetFiles\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"f0fd492c-9cde-41f5-9c69-a8abcd7b90fb"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iWebSiteBuildGetFiles", "[", 
   RowBox[{
   "patt_", ",", " ", "dir_", ",", " ", "dirs_", ",", " ", "templates_"}], 
   "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"temps", "=", "\n", "\t\t\t\t", 
      RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
       RowBox[{"templates", ",", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{"Except", "[", 
          RowBox[{
           RowBox[{"_", "?", "OptionQ"}], "|", 
           RowBox[{"_", "?", "AssociationQ"}]}], "]"}], "->", "\n", "\t", 
         "\t", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t", "\t", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"\"\<posts\>\"", "\[Rule]", "\"\<article.html\>\""}], ",", 
           "\n", "\t", "\t", "\t", "\t", "\t\t\t", 
           RowBox[{"_", "\[Rule]", "\"\<page.html\>\""}]}], "\n", "\t", "\t", 
          "\t\t\t\t\t", "}"}]}]}], "\n", "\t", "\t", "\t\t\t", "]"}]}], "\n", 
     "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{"Join", "@@", "\n", "\t\t\t", 
     RowBox[{"Map", "[", "\n", "\t\t\t\t", 
      RowBox[{
       RowBox[{
        RowBox[{"Thread", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNames", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{"patt", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<content\>\"", ",", " ", "#"}], 
              "}"}]}], ",", "\n", "\t\t\t\t\t\t", "\[Infinity]"}], "\n", 
           "\t\t\t\t\t\t", "]"}], "\[Rule]", "\n", "\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Function", "[", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"FileExtension", "[", "#", "]"}], "\[Equal]", 
               "\"\<\>\""}], ",", " ", 
              RowBox[{"#", "<>", "\"\<.html\>\""}], ",", " ", "#"}], "]"}], 
            "]"}], "@", "\n", "\t\t\t\t\t\t\t", 
           RowBox[{"Lookup", "[", 
            RowBox[{"temps", ",", " ", "#", ",", " ", "\"\<page.html\>\""}], 
            "]"}]}]}], "\n", "\t\t\t\t\t", "]"}], "&"}], ",", "\n", 
       "\t\t\t\t", 
       RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
        RowBox[{"dirs", ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
          RowBox[{"{", 
           RowBox[{"\"\<posts\>\"", ",", " ", "\"\<pages\>\""}], "}"}]}]}], 
        "\n", "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"9b192c18-d41a-49b8-80cc-3d921c480106"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iWebSiteBuild\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"215a92a2-c5d5-4d51-a6e8-cdc381ca603c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "iWebSiteBuild", "]"}], "=", "\n", "\t", 
   RowBox[{
    RowBox[{"DeleteDuplicatesBy", "[", "First", "]"}], "@", "\n", "\t\t", 
    RowBox[{"Join", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"{", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"\"\<GenerateContent\>\"", "\[Rule]", "True"}], ",", "\n", 
        "\t", "\t", "\t\t", 
        RowBox[{"\"\<GenerateIndex\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
        "\t", "\t", "\t", "\t", 
        RowBox[{"\"\<GenerateAggregations\>\"", "\[Rule]", "Automatic"}], ",",
         "\n", "\t\t\t\t", 
        RowBox[{"\"\<GenerateSearchPage\>\"", "\[Rule]", "False"}], ",", "\n",
         "\t\t\t\t", 
        RowBox[{"\"\<GenerateRedirectPages\>\"", "\[Rule]", "False"}], ",", 
        "\n", "\t\t\t\t", 
        RowBox[{"\"\<PageSize\>\"", "\[Rule]", "0"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"\"\<UseCache\>\"", "\[Rule]", "True"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "Automatic"}]}], "\n", 
       "\t\t\t\t", "}"}], ",", "\n", "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateContent", "]"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateIndex", "]"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateAggregations", "]"}], ",", "\n",
       "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateSearchPage", "]"}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteGenerateRedirectPages", "]"}], ",", 
      "\n", "\t\t\t", 
      RowBox[{"Options", "[", "WebSiteContentStackPrep", "]"}]}], "\n", 
     "\t\t\t", "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"iWebSiteBuild", "[", "\n", "\t", 
    RowBox[{
    "dir_", ",", "\n", "\t", "outDir_", ",", "\n", "\t", "thm_", ",", "\n", 
     "\t", "fileNames_", ",", "\n", "\t", "conf_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Block", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"$WebSiteBuildTime", "=", "Now"}], ",", "\n", "\t\t\t", 
       RowBox[{"$WebSiteLastBuild", "=", 
        RowBox[{"OptionValue", "[", "\"\<LastBuild\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{
        "may", " ", "get", " ", "overwritten", " ", "so", " ", "this", " ", 
         "is", " ", "a", " ", "safety", " ", "net"}], " ", "*)"}], "\n", 
       "\t\t\t", 
       RowBox[{"$Path", "=", "$Path"}], ",", "\n", "\t\t\t", 
       RowBox[{"$TemplatePath", "=", "$TemplatePath"}], ",", "\n", "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{"Template", " ", "lib", " ", "vars"}], " ", "*)"}], "\n", 
       "\t\t\t", 
       RowBox[{"Templating`$TemplateArguments", "=", 
        RowBox[{"{", "}"}]}], ",", "\n", "\t\t\t", "$templateLibLoaded", ",", 
       "\n", "\t\t\t", "Templating`lib`$$templateLib", ",", "\n", "\t\t\t", 
       "Templating`lib`$$", ",", "\n", "\t\t\t", "Templating`lib`$$libdir", 
       ",", "\n", "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{"The", " ", "stacks", " ", "to", " ", "populate"}], " ", 
        "*)"}], "\n", "\t\t\t", 
       RowBox[{"$WebSiteBuildContentStack", "=", "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"TrueQ", "@", 
           RowBox[{"OptionValue", "[", "\"\<UseCache\>\"", "]"}]}], ",", "\n",
           "\t\t\t\t\t", 
          RowBox[{"WebSiteLoadCache", "[", "dir", "]"}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"<|", "|>"}]}], "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", 
       "\t\t\t", "$WebSiteBuildCachedContentStack", ",", "\n", "\t\t\t", 
       RowBox[{"$WebSiteBuildContentDataStack", "=", "\n", "\t\t\t\t", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"$WebSiteBuildAggStack", "=", "\n", "\t\t\t\t", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{
        "Template", " ", "cache", " ", "to", " ", "prevent", " ", 
         "reloading"}], " ", "*)"}], "\n", "\t\t\t", 
       RowBox[{"$WebSiteTemplateCache", "=", "\n", "\t\t\t\t", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"TrueQ", "@", 
           RowBox[{"OptionValue", "[", "\"\<UseCache\>\"", "]"}]}], ",", "\n",
           "\t\t\t\t\t", 
          RowBox[{"WebSiteLoadTemplateCache", "[", "dir", "]"}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"<|", "|>"}]}], "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{"Build", " ", "flags"}], " ", "*)"}], "\n", "\t\t\t", 
       RowBox[{"genCont", "=", "\n", "\t\t\t\t", 
        RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}], ",", 
       "\n", "\t\t\t", 
       RowBox[{"genAggs", "=", "\n", "\t\t\t\t", 
        RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<GenerateAggregations\>\"", "]"}], 
          ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"genInd", "=", "\n", "\t\t\t\t", 
        RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<GenerateIndex\>\"", "]"}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"genSP", "=", "\n", "\t\t\t\t", 
        RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<GenerateSearchPage\>\"", "]"}], 
          ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"genRed", "=", "\n", "\t\t\t\t", 
        RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<GenerateRedirectPages\>\"", "]"}], 
          ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<GenerateContent\>\"", "]"}]}]}], 
         "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"newconf", "=", "\n", "\t\t\t\t", 
        RowBox[{"KeyDrop", "[", "\n", "\t\t\t\t\t", 
         RowBox[{"conf", ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Keys", "@", 
           RowBox[{"Options", "[", "iWebSiteBuild", "]"}]}]}], "\n", 
         "\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t\t", 
     
     RowBox[{
      RowBox[{
      "$WebSiteBuildCachedContentStack", "=", "\n", "\t\t\t\t", 
       "$WebSiteBuildContentStack"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"AnyTrue", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
           "genCont", ",", " ", "genAggs", ",", " ", "genInd", ",", " ", 
            "genSP"}], "}"}], ",", " ", "TrueQ"}], "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteExtractPageData", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"ExpandFileName", "@", "dir"}], ",", "\n", "\t\t\t\t\t", 
           "fileNames", ",", "\n", "\t\t\t\t\t", "newconf", ",", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"ops", ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Monitor", "\[Rule]", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                "First"}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"Options", "[", "WebSiteExtractPageData", "]"}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";", "\n", 
         "\t\t\t\t", 
         RowBox[{"Export", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"WebSiteCachePath", "[", "dir", "]"}], ",", "\n", 
           "\t\t\t\t\t", "$WebSiteBuildContentStack"}], "\n", "\t\t\t\t\t", 
          "]"}], ";"}]}], "\n", "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"WebSiteContentStackPrep", "[", "\n", "\t\t\t\t", 
       RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{"{", "ops", "}"}], ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Options", "[", "WebSiteContentStackPrep", "]"}]}], "\n", 
        "\t\t\t\t\t", "]"}], "\n", "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genCont", ",", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteGenerateContent", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
          "dir", ",", "\n", "\t\t\t\t\t", "fileNames", ",", "\n", 
           "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", "thm", ",", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"Join", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"<|", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"\"\<SiteDirectory\>\"", "\[Rule]", "dir"}], ",", "\n",
                "\t\t\t\t\t\t\t", 
               RowBox[{"\"\<OutputDirectory\>\"", "\[Rule]", "outDir"}]}], 
              "\n", "\t\t\t\t\t\t\t", "|>"}], ",", "\n", "\t\t\t\t\t\t", 
             "newconf"}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"OptionQ", "@", 
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<PageSize\>\"", "->", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}], 
                    ",", " ", "\"\<Content\>\"", ",", " ", "0"}], "]"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", "Nothing"}], 
                   "\n", "\t", "\t\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
                  "\t\t\t\t\t\t\t\t", "ops", ",", "\n", "\t", 
                  "\t\t\t\t\t\t\t\t", 
                  RowBox[{"Monitor", "\[Rule]", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                 "\t\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t\t\t", 
                "First"}], "\n", "\t\t\t\t\t\t\t\t", "]"}]}], ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{"Options", "[", "WebSiteGenerateContent", "]"}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";", "\n", 
         "\t\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"FileExistsQ", "@", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<BuildInfo.m\>\""}], "}"}]}]}], 
           ",", "\n", "\t\t\t\t\t", 
           RowBox[{"DeleteFile", "@", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<BuildInfo.m\>\""}], "}"}]}]}]}], 
          "\n", "\t\t\t\t\t", "]"}], ";", "\n", "\t\t\t\t", 
         RowBox[{"Export", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{"dir", ",", " ", "\"\<BuildInfo.wl\>\""}], "}"}]}], ",", 
           "\n", "\t\t\t\t\t", 
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "Now"}], "\n", 
            "\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", 
       "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genAggs", ",", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteGenerateAggregationPages", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
          "dir", ",", "\n", "\t\t\t\t\t", "Automatic", ",", "\n", 
           "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", "thm", ",", "\n", 
           "\t\t\t\t\t", "newconf", ",", "\n", "\t\t\t\t\t", 
           RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{
                  "\"\<CheckChanges\>\"", "->", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                   
                   RowBox[{"Not", "@", 
                    RowBox[{"TrueQ", "@", 
                    RowBox[{
                    "OptionValue", "[", "\"\<GenerateAggregations\>\"", 
                    "]"}]}]}]}], ",", "\n", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"OptionQ", "@", 
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<PageSize\>\"", "->", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}], 
                    ",", " ", "\"\<Aggregations\>\"", ",", " ", "0"}], 
                    "]"}]}], ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    "Nothing"}], "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", "]"}], 
                  ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t", "ops", ",", "\n", 
                  "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{"Monitor", "\[Rule]", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                 "\t", "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                "\t\t\t\t\t\t\t", "First"}], "\n", "\t", "\t\t\t\t\t\t\t", 
               "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{
             "Options", "[", "WebSiteGenerateAggregationPages", "]"}]}], "\n",
             "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";"}]}], 
       "\n", "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genInd", ",", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"WebSiteGenerateIndexPages", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
          "dir", ",", "\n", "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", 
           "thm", ",", "\n", "\t\t\t\t\t", "newconf", ",", "\n", "\t\t\t\t\t", 
           RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{
                  RowBox[{"If", "[", 
                   RowBox[{
                    RowBox[{"OptionQ", "@", 
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}]}], 
                    ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", 
                    RowBox[{
                    "\"\<PageSize\>\"", "->", "\n", "\t", "\t", 
                    "\t\t\t\t\t\t\t\t\t", 
                    RowBox[{"Lookup", "[", 
                    RowBox[{
                    RowBox[{"OptionValue", "[", "\"\<PageSize\>\"", "]"}], 
                    ",", " ", "\"\<Index\>\"", ",", " ", "0"}], "]"}]}], ",", 
                    "\n", "\t", "\t", "\t\t\t\t\t\t\t\t", "Nothing"}], "\n", 
                   "\t", "\t", "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t", 
                  "\t", "\t\t\t\t\t\t\t", "ops", ",", "\n", "\t", "\t", 
                  "\t\t\t\t\t\t\t", 
                  RowBox[{"Monitor", "\[Rule]", 
                   RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                 "\t", "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
                "\t\t\t\t\t\t\t", "First"}], "\n", "\t", "\t\t\t\t\t\t\t", 
               "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Options", "[", "WebSiteGenerateIndexPages", "]"}]}], 
            "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ";"}]}],
        "\n", "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genSP", ",", "\n", "\t\t\t\t", 
        RowBox[{"WebSiteGenerateSearchPage", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
         "dir", ",", "\n", "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", 
          "thm", ",", "\n", "\t\t\t\t\t", "newconf", ",", "\n", "\t\t\t\t\t", 
          
          RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"{", "ops", "}"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Options", "[", "WebSiteGenerateSearchPage", "]"}]}], 
           "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
       "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"genRed", ",", "\n", "\t\t\t\t", 
        RowBox[{"WebSiteGenerateRedirectPages", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
         "dir", ",", "\n", "\t\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t\t", 
          "thm", ",", "\n", "\t\t\t\t\t", "newconf", ",", "\n", "\t\t\t\t\t", 
          
          RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"{", "ops", "}"}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Options", "[", "WebSiteGenerateRedirectPages", "]"}]}], 
           "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
       "\t\t\t\t", "]"}], ";"}]}], "\n", "\t\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"090e541a-864b-44fa-af07-9c9074cab600"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteBuild\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"ad9e19ea-1edf-42de-b348-31679c36c0b2"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "::", "ndcnt"}], "=", 
   "\"\<Can't generate `` without generating content first\>\""}], 
  ";"}]], "CodeInput",
 CellChangeTimes->{{3.7126662241888113`*^9, 3.7126662455222607`*^9}, {
  3.712680873415894*^9, 3.712680889884789*^9}, {3.721060951339415*^9, 
  3.721060954133233*^9}},ExpressionUUID->"61c952ab-327a-4615-a343-\
969cecc07016"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteBuild", "]"}], "=", "\n", "\t", 
   RowBox[{"Join", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Options", "[", "iWebSiteBuild", "]"}], ",", "\n", "\t", "\t", 
     RowBox[{"{", "\n", "\t", "\t\t", 
      RowBox[{
       RowBox[{"\"\<CopyContent\>\"", "\[Rule]", "True"}], ",", "\n", "\t", 
       "\t", "\t", 
       RowBox[{"\"\<CopyTheme\>\"", "\[Rule]", "True"}], ",", "\n", "\t", 
       "\t", "\t", 
       RowBox[{"\"\<ConfigurationOptions\>\"", "\[Rule]", "Automatic"}], ",", 
       "\n", "\t", "\t", "\t", 
       RowBox[{"\"\<ConfigurationFile\>\"", "\[Rule]", "Automatic"}], ",", 
       "\n", "\t", "\t", "\t", 
       RowBox[{"\"\<OutputDirectory\>\"", "\[Rule]", "Automatic"}], ",", "\n",
        "\t", "\t", "\t", 
       RowBox[{"\"\<DefaultTheme\>\"", "->", "\"\<minimal\>\""}], ",", "\n", 
       "\t", "\t", "\t", 
       RowBox[{"\"\<AutoDeploy\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
       "\t", "\t", "\t", 
       RowBox[{"\"\<DeployOptions\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
       "\t", "\t", "\t", 
       RowBox[{"\"\<LastBuild\>\"", "\[Rule]", "Automatic"}], ",", "\n", "\t",
        "\t", "\t", 
       RowBox[{"\"\<ContentDirectories\>\"", "\[Rule]", "Automatic"}], ",", 
       "\n", "\t", "\t", "\t", 
       RowBox[{"\"\<ContentDirectoryTemplates\>\"", "\[Rule]", "Automatic"}], 
       ",", "\n", "\t", "\t\t", 
       RowBox[{"\"\<ContentTypes\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
         "\"\<*.html\>\"", ",", " ", "\"\<*.md\>\"", ",", " ", 
          "\"\<*.xml\>\""}], "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<UseCache\>\"", "\[Rule]", "True"}]}], "\n", "\t", "\t\t", 
      "}"}]}], "\n", "\t", "\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteBuild", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"dir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
     RowBox[{"files", ":", "\n", "\t\t", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"_String", "?", "FileExistsQ"}], "|", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"_String", "?", "FileExistsQ"}], ")"}], "\[Rule]", 
             "_List"}], ")"}]}], ")"}], ".."}], "}"}], "|", "\n", "\t", 
       "\t\t", 
       RowBox[{"s_", "?", 
        RowBox[{"(", "StringPattern`StringPatternQ", ")"}]}], "|", 
       "Automatic"}], ":", "Automatic"}], ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
      "outDir", ",", "\n", "\t\t\t", "fileNames", ",", "\n", "\t\t\t", 
       "config", ",", "\n", "\t\t\t", "confOps", ",", "\n", "\t\t\t", 
       "buildOps", ",", "\n", "\t\t\t", "res"}], "\n", "\t\t\t", "}"}], ",", 
     "\n", "\t\t", 
     RowBox[{
      RowBox[{"$WebSiteBuildErrors", "=", 
       RowBox[{"<|", "|>"}]}], ";", "\n", "\t\t", 
      RowBox[{"config", "=", "\n", "\t\t\t", 
       RowBox[{"Join", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Replace", "[", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Replace", "[", 
            RowBox[{
             RowBox[{"OptionValue", "[", "\"\<ConfigurationFile\>\"", "]"}], 
             ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{
                RowBox[{"fname_String", "?", 
                 RowBox[{"(", 
                  RowBox[{
                   RowBox[{"FileExistsQ", "[", 
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"dir", ",", " ", "#"}], "}"}]}], "]"}], "&"}], 
                  ")"}]}], ":>", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{"FileNameJoin", "@", 
                 RowBox[{"{", 
                  RowBox[{"dir", ",", " ", "fname"}], "}"}]}]}], ",", "\n", 
               "\t", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Except", "[", 
                 RowBox[{"_String", "?", "FileExistsQ"}], "]"}], 
                "\[RuleDelayed]", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"FileExistsQ", "@", 
                   RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"dir", ",", "\"\<SiteConfig.m\>\""}], "}"}]}]}], 
                  ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{"FileNameJoin", "@", 
                   RowBox[{"{", 
                    RowBox[{"dir", ",", "\"\<SiteConfig.m\>\""}], "}"}]}], 
                  ",", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                  RowBox[{"FileNameJoin", "@", 
                   RowBox[{"{", 
                    RowBox[{"dir", ",", "\"\<SiteConfig.wl\>\""}], "}"}]}]}], 
                 "\n", "\t", "\t\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t", 
              "\t\t\t\t\t\t", "}"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n",
            "\t\t\t\t\t", 
           RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"f_String", "?", "FileExistsQ"}], ":>", "\n", "\t", 
              "\t", "\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{
                RowBox[{"Import", "[", "f", "]"}], ",", " ", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"o", ":", 
                    RowBox[{
                    RowBox[{"_", "?", "OptionQ"}], "|", 
                    RowBox[{"_", "?", "AssociationQ"}]}]}], "\[RuleDelayed]", 
                   
                   RowBox[{"Association", "[", "o", "]"}]}], ",", 
                  RowBox[{"_", "\[Rule]", 
                   RowBox[{"<|", "|>"}]}]}], "}"}]}], "]"}]}], ",", "\n", 
             "\t\t\t\t\t\t\t", 
             RowBox[{"_", "\[Rule]", 
              RowBox[{"<|", "|>"}]}]}], "\n", "\t\t\t\t\t\t", "}"}]}], "]"}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{"Replace", "[", 
          RowBox[{
           RowBox[{"Normal", "@", 
            RowBox[{
            "OptionValue", "[", "\"\<ConfigurationOptions\>\"", "]"}]}], ",", 
           "\n", "\t\t\t\t\t", 
           RowBox[{"{", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"o", ":", 
               RowBox[{
                RowBox[{"_", "?", "OptionQ"}], "|", 
                RowBox[{"_", "?", "AssociationQ"}]}]}], "\[RuleDelayed]", 
              RowBox[{"Association", "@", "o"}]}], ",", "\n", "\t\t\t\t\t\t", 
             
             RowBox[{"_", "\[Rule]", 
              RowBox[{"<|", "|>"}]}]}], "\n", "\t\t\t\t\t\t", "}"}]}], "\n", 
          "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"confOps", "=", "\n", "\t\t\t", 
       RowBox[{"Lookup", "[", 
        RowBox[{"config", ",", " ", "\"\<BuildOptions\>\"", ",", " ", 
         RowBox[{"{", "}"}]}], "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"outDir", "=", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"Lookup", "[", 
          RowBox[{
          "confOps", ",", " ", "\n", "\t\t\t\t\t", "\"\<OutputDirectory\>\"", 
           ",", " ", "\n", "\t\t\t\t\t", 
           RowBox[{"OptionValue", "[", "\"\<OutputDirectory\>\"", "]"}]}], 
          "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "\"\<output\>\""}], "}"}]}]}], ",", 
           "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"p_String", "?", 
             RowBox[{"(", 
              RowBox[{"Not", "@*", "DirectoryQ"}], ")"}]}], ":>", "\n", 
            "\t\t\t\t\t\t", 
            RowBox[{"FileNameJoin", "@", 
             RowBox[{"{", 
              RowBox[{"dir", ",", " ", "p"}], "}"}]}]}]}], "\n", "\t\t\t\t\t",
           "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"fileNames", "=", "\n", "\t\t\t", 
       RowBox[{"Replace", "[", 
        RowBox[{"files", ",", "\n", "\t\t\t\t", 
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"fpat_", "?", 
             RowBox[{"(", "StringPattern`StringPatternQ", ")"}]}], ":>", "\n",
             "\t\t\t\t\t\t", 
            RowBox[{"iWebSiteBuildGetFiles", "[", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
             "fpat", ",", "\n", "\t\t\t\t\t\t\t", "dir", ",", "\n", 
              "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "confOps", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<ContentDirectories\>\"", ",", " ", "\n", 
                "\t\t\t\t\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ContentDirectories\>\"", "]"}]}], 
               "\n", "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "confOps", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<ContentDirectoryTemplates\>\"", ",", " ", "\n", "\t", 
                "\t", "\t", "\t", "\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ContentDirectoryTemplates\>\"", 
                 "]"}]}], "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", "]"}]}], 
             "\n", "\t\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"Automatic", "\[RuleDelayed]", "\n", "\t\t\t\t\t\t", 
            RowBox[{"iWebSiteBuildGetFiles", "[", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Alternatives", "@@", 
               RowBox[{"OptionValue", "[", "\"\<ContentTypes\>\"", "]"}]}], 
              ",", "\n", "\t\t\t\t\t\t\t", "dir", ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "confOps", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<ContentDirectories\>\"", ",", " ", "\n", 
                "\t\t\t\t\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ContentDirectories\>\"", "]"}]}], 
               "\n", "\t\t\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"Lookup", "[", 
               RowBox[{
               "confOps", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
                "\"\<ContentDirectoryTemplates\>\"", ",", " ", "\n", "\t", 
                "\t", "\t", "\t", "\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ContentDirectoryTemplates\>\"", 
                 "]"}]}], "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", "]"}]}], 
             "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t\t\t\t\t", "}"}]}], 
        "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"buildOps", "=", "\n", "\t\t\t", 
       RowBox[{"Merge", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"{", "\n", "\t\t\t\t\t", 
          RowBox[{
          "confOps", ",", "\n", "\t\t\t\t\t", "ops", ",", "\n", "\t\t\t\t\t", 
           
           RowBox[{
            RowBox[{"Replace", "[", 
             RowBox[{
              RowBox[{"Except", "[", 
               RowBox[{
                RowBox[{"_", "?", "OptionQ"}], "|", 
                RowBox[{"_", "?", "AssociationQ"}]}], "]"}], "\[Rule]", 
              RowBox[{"{", "}"}]}], "]"}], "@", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"FileNameJoin", "@", 
                RowBox[{"{", 
                 RowBox[{"dir", ",", " ", "\"\<BuildInfo.wl\>\""}], "}"}]}], 
               ",", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t", 
               RowBox[{"{", "\n", "\t", "\t", "\t", "\t", "\t\t\t\t\t", 
                RowBox[{
                 RowBox[{
                  RowBox[{"f_String", "?", "FileExistsQ"}], ":>", "\n", "\t", 
                  "\t", "\t", "\t", "\t\t\t\t\t\t", 
                  RowBox[{"Import", "[", "f", "]"}]}], ",", "\n", "\t", 
                 "\t\t\t\t\t\t\t\t", 
                 RowBox[{"_String", ":>", "\n", "\t", "\t\t\t\t\t\t\t\t\t", 
                  RowBox[{
                  "Replace", "[", "\n", "\t", "\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                    RowBox[{"FileNameJoin", "@", 
                    RowBox[{"{", 
                    RowBox[{"dir", ",", " ", "\"\<BuildInfo.m\>\""}], "}"}]}],
                     ",", "\n", "\t", "\t", "\t", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t", 
                    RowBox[{
                    "{", "\n", "\t", "\t", "\t", "\t", "\t", "\t", "\t", 
                    "\t\t\t\t\t", 
                    RowBox[{
                    RowBox[{"f_String", "?", "FileExistsQ"}], ":>", "\n", 
                    "\t", "\t", "\t", "\t", "\t", "\t", "\t", "\t\t\t\t\t\t", 
                    
                    RowBox[{"Import", "[", "f", "]"}]}], "\n", "\t", "\t", 
                    "\t", "\t", "\t", "\t\t\t\t\t\t\t", "}"}]}], "\n", "\t", 
                   "\t", "\t", "\t", "\t", "\t\t\t\t\t\t", "]"}]}]}], "\n", 
                "\t", "\t\t\t\t\t\t\t\t", "}"}]}], "\n", "\t", 
              "\t\t\t\t\t\t\t", "]"}]}]}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"Normal", "@", "config"}]}], "\n", "\t\t\t\t\t", "}"}], 
         ",", "\n", "\t\t\t\t", "First"}], "\n", "\t\t\t\t", "]"}]}], ";", 
      "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"DirectoryQ", "[", "outDir", "]"}]}], ",", "\n", "\t\t\t", 
        RowBox[{"CreateDirectory", "@", "outDir"}]}], "\n", "\t\t\t", "]"}], 
      ";", "\n", "\t\t", 
      RowBox[{"If", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"Lookup", "[", 
         RowBox[{
         "confOps", ",", " ", "\n", "\t\t\t\t", "\"\<CopyTheme\>\"", ",", " ",
           "\n", "\t\t\t\t", 
          RowBox[{"OptionValue", "[", "\"\<CopyTheme\>\"", "]"}]}], "\n", 
         "\t\t\t\t", "]"}], ",", "\n", "\t\t\t", 
        RowBox[{"WebSiteCopyTheme", "[", "\n", "\t\t\t\t", 
         RowBox[{
         "dir", ",", "\n", "\t\t\t\t", "outDir", ",", "\n", "\t\t\t\t", 
          RowBox[{"Lookup", "[", 
           RowBox[{
           "config", ",", " ", "\"\<Theme\>\"", ",", " ", "\n", "\t\t\t\t\t", 
            
            RowBox[{"Lookup", "[", 
             RowBox[{"confOps", ",", " ", "\"\<Theme\>\"", ",", " ", 
              RowBox[{"OptionValue", "[", "\"\<DefaultTheme\>\"", "]"}]}], 
             "]"}]}], "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
          RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Normal", "@", "\n", "\t\t\t\t\t\t", 
             RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
                RowBox[{"buildOps", ",", "\n", "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{"Monitor", "\[Rule]", 
                  RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
                "\t", "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t", 
               "\t\t\t\t\t\t", "First"}], "\n", "\t", "\t\t\t\t\t\t", "]"}]}],
             ",", "\n", "\t\t\t\t\t", 
            RowBox[{"Options", "[", "WebSiteCopyTheme", "]"}]}], "\n", 
           "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", 
       "]"}], ";", "\n", "\t\t", 
      RowBox[{"WebSiteCopyContent", "[", "\n", "\t\t\t", 
       RowBox[{"dir", ",", "\n", "\t\t\t", "outDir", ",", "\n", "\t\t\t", 
        RowBox[{"Lookup", "[", 
         RowBox[{"confOps", ",", " ", "\"\<CopyContent\>\"", ",", " ", 
          RowBox[{"OptionValue", "[", "\"\<CopyContent\>\"", "]"}]}], "]"}], 
        ",", "\n", "\t\t\t", 
        RowBox[{"FilterRules", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"Normal", "@", "\n", "\t\t\t\t\t", 
           RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"buildOps", ",", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{"Monitor", "\[Rule]", 
                RowBox[{"OptionValue", "[", "Monitor", "]"}]}]}], "\n", 
              "\t\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t\t", "First"}], 
            "\n", "\t\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t\t", 
          RowBox[{"Options", "[", "WebSiteCopyContent", "]"}]}], "\n", 
         "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"iWebSiteBuild", "[", "\n", "\t\t\t", 
       RowBox[{"dir", ",", "\n", "\t\t\t", "outDir", ",", "\n", "\t\t\t", 
        RowBox[{"Lookup", "[", 
         RowBox[{
         "config", ",", "\n", "\t\t\t\t", "\"\<Theme\>\"", ",", "\n", 
          "\t\t\t\t", 
          RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
           "confOps", ",", "\n", "\t\t\t\t\t", "\"\<DefaultTheme\>\"", ",", 
            " ", "\n", "\t", "\t\t\t\t", 
            RowBox[{"OptionValue", "[", "\"\<DefaultTheme\>\"", "]"}]}], "\n",
            "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}], ",", "\n", 
        "\t\t\t", "fileNames", ",", "\n", "\t\t\t", "config", ",", "\n", 
        "\t\t\t", 
        RowBox[{"FilterRules", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"Normal", "@", "\n", "\t\t\t\t\t", 
           RowBox[{"Merge", "[", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
              RowBox[{
              "confOps", ",", "\n", "\t\t\t\t\t\t\t", "config", ",", "\n", 
               "\t\t\t\t\t\t\t", "buildOps"}], "\n", "\t\t\t\t\t\t\t", "}"}], 
             ",", "\n", "\t\t\t\t\t\t", "First"}], "\n", "\t\t\t\t\t\t", 
            "]"}]}], ",", " ", "\n", "\t\t\t\t", 
          RowBox[{"Options", "@", "iWebSiteBuild"}]}], "\n", "\t\t\t\t", 
         "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"res", "=", "\n", "\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"TrueQ", "[", 
           RowBox[{"OptionValue", "[", "\"\<AutoDeploy\>\"", "]"}], "]"}], "||",
           "\n", "\t", "\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"OptionValue", "[", "\"\<AutoDeploy\>\"", "]"}], "===", 
            "Automatic"}], "&&", "\n", "\t", "\t\t\t\t", 
           RowBox[{"OptionQ", "@", 
            RowBox[{"OptionValue", "[", "\"\<DeployOptions\>\"", "]"}]}]}]}], 
         ",", "\n", "\t\t\t\t", 
         RowBox[{"WebSiteCloudDeploy", "[", "\n", "\t\t\t\t\t", 
          RowBox[{"outDir", ",", "\n", "\t", "\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{"config", ",", " ", "\"\<SiteURL\>\""}], "]"}], ",", 
             "\n", "\t", "\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Except", "[", "_String", "]"}], ":>", "\n", "\t", 
              "\t\t\t\t\t\t", 
              RowBox[{"Replace", "[", 
               RowBox[{
                RowBox[{"FileBaseName", "[", "dir", "]"}], ",", "\n", "\t", 
                "\t", "\t\t\t\t\t\t", 
                RowBox[{
                "\"\<output\>\"", ":>", "\n", "\t", "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{"FileBaseName", "@", 
                  RowBox[{"DirectoryName", "[", "dir", "]"}]}]}]}], "\n", 
               "\t", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", "\t", "\t\t\t\t\t", 
            "]"}], ",", "\n", "\t", "\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Replace", "[", 
              RowBox[{
               RowBox[{"OptionValue", "[", "\"\<DeployOptions\>\"", "]"}], 
               ",", "\n", "\t", "\t\t\t\t\t\t", 
               RowBox[{"Automatic", ":>", 
                RowBox[{"Lookup", "[", 
                 RowBox[{"config", ",", "\"\<DeployOptions\>\"", ",", 
                  RowBox[{"{", "}"}]}], "]"}]}]}], "\n", "\t", "\t\t\t\t\t\t",
               "]"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Except", "[", 
               RowBox[{
                RowBox[{"_", "?", "OptionQ"}], "|", 
                RowBox[{"_", "?", "AssociationQ"}]}], "]"}], "\[Rule]", 
              RowBox[{"{", "}"}]}]}], "\n", "\t", "\t\t\t\t\t", "]"}]}], "\n",
           "\t", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "outDir"}], "\n", 
        "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "$WebSiteBuildErrors"}], ">", "0"}], ",", 
        "\n", "\t\t\t", 
        RowBox[{"PackageThrowMessage", "[", "\n", "\t\t\t\t", 
         RowBox[{
         "\"\<SiteBuilder\>\"", ",", "\n", "\t\t\t\t", 
          "\"\<WebSiteBuild encountered errors. Check \
$WebSiteBuildErrors.\>\""}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}],
       ";", "\n", "\t\t", "res"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"6f82a7d7-9de4-421b-baa4-2c9e9f786a4b"]\

}, Closed]]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Deployment\[RightFloor]", "CodeSubsection",
 Evaluatable->True,ExpressionUUID->"45aa8d27-2b3d-47af-8b3f-c9111540a660"],

Cell["\<\
\[LeftCeiling]
\tOriginally only had Wolfram Cloud deployment but I also need to support \
GitHub Pages since the WC
\tis no longer a viable free option
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"ff0d5840-a805-45b6-a697-4c4c810f8b97"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteCloudDeploy", "::", "depfail"}], "=", 
   "\"\<Failed to deploy `` to ``\>\""}], 
  ";"}]], "CodeInput",ExpressionUUID->"03f84ee9-9459-4118-ba1c-b82a6382816c"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]CloudDeploy\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"125fe322-f8e7-46d3-9390-0d85025c47ab"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]getWebsiteDeployDir\[RightFloor]", "CodeSubsubsubsection",
 
 Evaluatable->True,ExpressionUUID->"7199d52f-0d58-47cf-81bf-ccab54dceaaa"],

Cell[BoxData[
 RowBox[{
  RowBox[{"getWebsiteDeployDir", "[", 
   RowBox[{"outDir_", ",", " ", "opd_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", "\n", "    ", 
     RowBox[{"ext", "=", "\n", "      ", 
      RowBox[{"Replace", "[", "\n", "        ", 
       RowBox[{"opd", ",", "\n", "        ", 
        RowBox[{"{", "\n", "          ", 
         RowBox[{
          RowBox[{"Automatic", ":>", "\n", "            ", "\"\<output\>\""}],
           ",", "\n", "          ", 
          RowBox[{
           RowBox[{
            RowBox[{"_String", "?", "DirectoryQ"}], "|", 
            RowBox[{"Except", "[", "_String", "]"}]}], "\[Rule]", 
           "\"\<\>\""}]}], "\n", "          ", "}"}]}], "\n", "        ", 
       "]"}]}], "\n", "      ", "}"}], ",", "\n", "    ", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"StringEndsQ", "[", 
        RowBox[{"outDir", ",", " ", "ext"}], "]"}], "&&", 
       RowBox[{
        RowBox[{"FileNameDepth", "[", "ext", "]"}], ">", "0"}]}], ",", "\n", 
      "      ", 
      RowBox[{"FileNameDrop", "[", 
       RowBox[{"outDir", ",", " ", "\n", "        ", 
        RowBox[{"-", 
         RowBox[{"FileNameDepth", "[", "ext", "]"}]}]}], "\n", "        ", 
       "]"}], ",", "\n", "      ", "outDir"}], "\n", "      ", "]"}]}], "\n", 
   "    ", "]"}]}]], \
"CodeInput",ExpressionUUID->"98d3d5f7-1433-4140-9f26-b4568c8761b8"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteDeploySelectFiles\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{
  3.720636070143309*^9, {3.720636183092206*^9, 
   3.720636185234379*^9}},ExpressionUUID->"ded81174-d6f2-4cce-bece-\
51448fc2ae4b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteDeploySelectFiles", "[", "\n", "\t", 
   RowBox[{
   "dir_", ",", "\n", "\t", "last_", ",", "\n", "\t", "select_", ",", "\n", 
    "\t", "fileForms_", ",", "\n", "\t", "alwaysDeployForms_", ",", "\n", 
    "\t", "includes_"}], "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{
   RowBox[{"Select", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"FileExistsQ", "[", "#", "]"}], "&&", "\n", "\t\t", 
      RowBox[{"!", 
       RowBox[{"DirectoryQ", "[", "#", "]"}]}], "&&", "\n", "\t\t\t", 
      RowBox[{"(", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"StringMatchQ", "[", "\n", "\t\t\t\t\t", 
         RowBox[{"#", ",", "\n", "\t\t\t\t\t", "alwaysDeployForms"}], "\n", 
         "\t\t\t\t\t", "]"}], "||", "\n", "\t\t\t\t", 
        RowBox[{"StringMatchQ", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"FileNameTake", "[", "#", "]"}], ",", "\n", "\t\t\t\t\t", 
          "alwaysDeployForms"}], "\n", "\t\t\t\t\t", "]"}], "||", "\n", 
        "\t\t\t\t", 
        RowBox[{"!", 
         RowBox[{"DateObjectQ", "[", "last", "]"}]}], "||", "\n", "\t\t\t\t", 
        
        RowBox[{"Quiet", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"FileDate", "[", "#", "]"}], ">", "last"}], ",", 
          RowBox[{"Greater", "::", "nordol"}]}], "]"}]}], "\n", "\t\t\t\t", 
       ")"}], "&&", "\n", "\t\t\t", 
      RowBox[{"select", "[", "#", "]"}]}], "&"}], "\n", "\t\t\t", "]"}], "@", 
   "\n", "\t\t", 
   RowBox[{
    RowBox[{"SortBy", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"FileBaseName", "[", "#", "]"}], "===", "\"\<index\>\""}], 
      "&"}], "]"}], "@", "\n", "\t\t", 
    RowBox[{"Join", "[", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"Sequence", "@@", "\n", "\t\t\t", 
       RowBox[{"Map", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"FileNames", "[", "\n", "\t\t\t\t\t", 
           RowBox[{
           "fileForms", ",", "\n", "\t\t\t\t\t", "#", ",", "\n", "\t\t\t\t\t",
             "\[Infinity]"}], "]"}], "&"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"Select", "[", 
          RowBox[{
           RowBox[{"Flatten", "@", 
            RowBox[{"{", 
             RowBox[{"dir", ",", " ", "includes"}], "}"}]}], ",", " ", 
           "DirectoryQ"}], "]"}]}], "\n", "\t\t\t\t", "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"Select", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"List", "@", "includes"}]}], ",", " ", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"Not", "@", 
           RowBox[{"DirectoryQ", "[", "#", "]"}]}], "&&", "\n", "\t\t\t\t\t", 
          
          RowBox[{"StringMatchQ", "[", 
           RowBox[{"#", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"___", "~~", "fileForms"}]}], "\n", "\t\t\t\t\t\t", 
           "]"}]}], "&"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", 
     "]"}]}]}]}]], "CodeInput",
 CellChangeTimes->{{3.720636187965932*^9, 3.7206363170031443`*^9}, {
  3.7206366275312977`*^9, 
  3.720636632691968*^9}},ExpressionUUID->"d2ebdaf0-4fc8-481d-accc-\
859f62e77c7f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteDeployFile\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,
 CellChangeTimes->{
  3.720636070143309*^9},ExpressionUUID->"920da0f0-98e9-402d-a365-\
fe171b55332f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteDeployFile", "[", 
   RowBox[{
   "f_", ",", " ", "uri_", ",", " ", "outDir_", ",", " ", "trueDir_", ",", 
    " ", "stripDirs_", ",", " ", 
    RowBox[{"ops___", "?", "OptionQ"}]}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t", 
     RowBox[{"(*", " ", 
      RowBox[{"Build", " ", "export", " ", "URI"}], " ", "*)"}], "\n", "\t\t", 
     RowBox[{"url", ",", "\n", "\t\t", "perm"}], "\n", "\t\t", "}"}], ",", 
    "\n", "\t\t", 
    RowBox[{
     RowBox[{"url", "=", "\n", "\t\t\t", 
      RowBox[{"URLBuild", "@", "\n", "\t\t\t\t", 
       RowBox[{"Flatten", "@", 
        RowBox[{"{", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{"uri", ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"Automatic", ":>", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"FileBaseName", "[", "trueDir", "]"}]}]}], "\n", 
           "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FileNameSplit", "@", "\n", "\t\t\t\t\t\t", 
           RowBox[{"FileNameDrop", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{"f", ",", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{"FileNameDepth", "@", "\n", "\t\t\t\t\t\t\t\t", 
              RowBox[{"SelectFirst", "[", "\n", "\t\t\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{
                 RowBox[{"SortBy", "[", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                  RowBox[{"Minus", "@*", "FileNameDepth"}], "\n", 
                  "\t\t\t\t\t\t\t\t\t\t", "]"}], "@", "\n", 
                 "\t\t\t\t\t\t\t\t\t", 
                 RowBox[{"Flatten", "@", 
                  RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t\t\t", 
                   RowBox[{
                   "outDir", ",", "\n", "\t\t\t\t\t\t\t\t\t\t", "trueDir", 
                    ",", "\n", "\t\t\t\t\t\t\t\t\t\t", "stripDirs"}], "\n", 
                   "\t\t\t\t\t\t\t\t\t\t", "}"}]}]}], ",", "\n", 
                "\t\t\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"StringStartsQ", "[", 
                  RowBox[{"f", ",", " ", "#"}], "]"}], "&"}], ",", "\n", 
                "\t\t\t\t\t\t\t\t\t", "outDir"}], "\n", "\t\t\t\t\t\t\t\t\t", 
               "]"}]}]}], "\n", "\t\t\t\t\t\t\t", "]"}]}]}], "\n", 
         "\t\t\t\t\t", "}"}]}]}]}], ";", "\n", "\t\t", 
     RowBox[{"perm", "=", "\n", "\t\t\t", 
      RowBox[{"Lookup", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"ops", ",", " ", 
           RowBox[{"Options", "[", "WebSiteCloudDeploy", "]"}]}], "}"}]}], 
        ",", "\n", "\t\t\t\t", "Permissions", ",", "\n", "\t\t\t\t", 
        "\"\<Private\>\""}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"StringQ", "@", "url"}], "&&", 
        RowBox[{"StringEndsQ", "[", 
         RowBox[{"url", ",", "\"\</index.html\>\""}], "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"(*", " ", 
        RowBox[{
        "make", " ", "sure", " ", "permissions", " ", "are", " ", "set", " ", 
         "correctly", " ", "on", " ", "the", " ", "main", " ", "page"}], " ", 
        "*)"}], "\n", "\t\t\t", 
       RowBox[{"Quiet", "@", 
        RowBox[{"SetPermissions", "[", 
         RowBox[{
          RowBox[{"StringTrim", "[", 
           RowBox[{"url", ",", " ", "\"\</index.html\>\""}], "]"}], ",", " ", 
          "perm"}], "]"}]}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"Replace", "[", "\n", "\t\t\t", 
       RowBox[{"{", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"CloudObject", "[", 
           RowBox[{"c_", ",", " ", "___"}], "]"}], "\[RuleDelayed]", 
          RowBox[{"CloudObject", "[", "c", "]"}]}], ",", "\n", "\t\t\t\t", 
         RowBox[{"e_", "\[RuleDelayed]", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"Message", "[", 
             RowBox[{
              RowBox[{"WebSiteCloudDeploy", "::", "depfail"}], ",", " ", "f", 
              ",", " ", "url"}], "]"}], ";", "e"}], ")"}]}]}], "\n", 
        "\t\t\t\t", "}"}], "\n", "\t\t\t", "]"}], "@", "\n", "\t\t\t", 
      RowBox[{"CopyFile", "[", "\n", "\t\t\t\t", 
       RowBox[{"f", ",", "\n", "\t\t\t\t", 
        RowBox[{"CloudObject", "[", "\n", "\t\t\t\t\t", 
         RowBox[{"url", ",", "\n", "\t\t\t\t\t", 
          RowBox[{"FilterRules", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Flatten", "@", 
             RowBox[{"{", 
              RowBox[{"ops", ",", " ", 
               RowBox[{"Options", "[", "WebSiteCloudDeploy", "]"}]}], "}"}]}],
             ",", "\n", "\t", "\t\t\t\t\t", 
            RowBox[{"Options", "[", "CloudObject", "]"}]}], "\n", 
           "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{"With", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"ext", "=", 
            RowBox[{"ToUpperCase", "@", 
             RowBox[{"FileExtension", "[", "f", "]"}]}]}], "}"}], ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Quiet", "@", 
             RowBox[{"ImportExport`GetMIMEType", "[", "ext", "]"}]}], ",", 
            "\n", "\t\t\t\t\t\t", 
            RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{
               RowBox[{"{", 
                RowBox[{"s_String", ",", " ", "___"}], "}"}], 
               "\[RuleDelayed]", 
               RowBox[{"(", 
                RowBox[{"\"\<MIMEType\>\"", "\[Rule]", "s"}], ")"}]}], ",", 
              "\n", "\t\t\t\t\t\t\t", 
              RowBox[{"_", "\[RuleDelayed]", 
               RowBox[{"Sequence", "@@", 
                RowBox[{"{", "}"}]}]}]}], "\n", "\t\t\t\t\t\t\t", "}"}]}], 
           "\n", "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
       "\t\t\t\t", "]"}]}]}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"d00ab455-1efb-405d-92d1-5ad3fe70e3a7"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webSiteDeploy\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"3eff84a4-4bc7-4e1c-bf83-3d11a04dd98e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"webSiteDeploy", "[", "\n", "\t", 
   RowBox[{
   "uri_", ",", " ", "outDir_", ",", " ", "trueDir_", ",", " ", "\n", "\t", 
    "last_", ",", " ", "select_", ",", "\n", "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "WebSiteCloudDeploy", "]"}]}]}], "]"}], ":=",
   " ", "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"KeychainConnect", "[", 
     RowBox[{"OptionValue", "[", "CloudConnect", "]"}], "]"}], ";", "\n", 
    "\t\t", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", "file", "}"}], ",", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", 
          RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", "\n", 
         "\t\t\t\t", 
         RowBox[{"Function", "[", 
          RowBox[{"Null", ",", " ", "\n", "\t", "\t\t\t\t", 
           RowBox[{"Monitor", "[", 
            RowBox[{"#", ",", " ", "\n", "\t", "\t\t\t\t\t", 
             RowBox[{"Internal`LoadingPanel", "[", "\n", "\t", "\t\t\t\t\t\t", 
              RowBox[{"TemplateApply", "[", 
               RowBox[{"\"\<Deploying ``\>\"", ",", "file"}], "]"}], "\n", 
              "\t", "\t\t\t\t\t\t", "]"}]}], "\n", "\t", "\t\t\t\t\t", "]"}], 
           ",", " ", "\n", "\t\t\t\t\t", "HoldAllComplete"}], "\n", 
          "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "Identity"}], "\n", 
        "\t\t\t\t", "]"}], "@", "\n", "\t\t\t\t", 
       RowBox[{"Map", "[", "\n", "\t\t\t\t\t", 
        RowBox[{
         RowBox[{"Function", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"file", "=", "#"}], ";", "\n", "\t\t\t\t\t\t", 
           RowBox[{"webSiteDeployFile", "[", 
            RowBox[{
            "#", ",", "\n", "\t\t\t\t\t\t\t", "uri", ",", " ", "outDir", ",", 
             " ", "trueDir", ",", " ", 
             RowBox[{"OptionValue", "[", "\"\<StripDirectories\>\"", "]"}], 
             ",", " ", "\n", "\t\t\t\t\t\t\t", "ops"}], "\n", 
            "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", "\n",
          "\t\t\t\t\t", 
         RowBox[{"webSiteDeploySelectFiles", "[", "\n", "\t\t\t\t\t\t", 
          RowBox[{
          "outDir", ",", "\n", "\t\t\t\t\t\t", "last", ",", "\n", 
           "\t\t\t\t\t\t", "select", ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Alternatives", "@@", 
              RowBox[{"List", "@", 
               RowBox[{"{", "\n", "\t", "\t\t\t\t\t\t\t", 
                RowBox[{
                 RowBox[{"OptionValue", "[", "FileNameForms", "]"}], ",", 
                 "\n", "\t", "\t\t\t\t\t\t\t", 
                 RowBox[{
                 "OptionValue", "[", "\"\<ExtraFileNameForms\>\"", "]"}]}], 
                "\n", "\t", "\t\t\t\t\t\t\t", "}"}]}]}], ",", "\n", "\t", 
             "\t\t\t\t\t\t", 
             RowBox[{"All", "\[Rule]", "\"\<*\>\""}]}], "\n", "\t", "\t", 
            "\t", "\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "@", "\"\<AlwaysDeployForms\>\""}], ",", 
           "\n", "\t\t\t\t\t\t", 
           RowBox[{"OptionValue", "@", "\"\<IncludeFiles\>\""}]}], "\n", 
          "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", 
     "\t\t\t", "]"}]}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"48fe0256-02cc-46d4-a476-9155e183883a"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]webGitHubDeploy\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"360f7ed3-6782-49db-b9eb-f2256ee51b02"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"webGitHubDeploy", "[", "\n", "\t", 
    RowBox[{
    "uri_", ",", " ", "outDir_", ",", " ", "trueDir_", ",", " ", "\n", "\t", 
     "last_", ",", " ", "select_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "WebSiteCloudDeploy", "]"}]}]}], "\n", 
    "\t", "]"}], ":=", " ", "\n", "\t", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "file", "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "Monitor", "]"}]}], ",", "\n", "\t\t\t", 
        
        RowBox[{"Function", "[", 
         RowBox[{"Null", ",", " ", "\n", "\t\t\t\t", 
          RowBox[{"Monitor", "[", 
           RowBox[{"#", ",", " ", "\n", "\t\t\t\t\t", 
            RowBox[{"Internal`LoadingPanel", "[", "\n", "\t\t\t\t\t\t", 
             RowBox[{"TemplateApply", "[", 
              RowBox[{"\"\<Deploying ``\>\"", ",", "file"}], "]"}], "\n", 
             "\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t", "]"}], ",", " ", 
          "\n", "\t\t\t\t", "HoldAllComplete"}], "\n", "\t\t\t\t", "]"}], ",",
         "\n", "\t\t\t", "Identity"}], "\n", "\t\t\t", "]"}], "@", "\n", 
      "\t\t\t", 
      RowBox[{"Map", "[", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"Function", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
          RowBox[{"file", "=", "#"}], ";", "\n", "\t\t\t\t\t", 
          RowBox[{"webSiteDeployFile", "[", 
           RowBox[{
           "#", ",", "\n", "\t\t\t\t\t\t", "uri", ",", " ", "outDir", ",", 
            " ", "trueDir", ",", " ", 
            RowBox[{"OptionValue", "[", "\"\<StripDirectories\>\"", "]"}], 
            ",", " ", "\n", "\t\t\t\t\t\t", "ops"}], "\n", "\t\t\t\t\t\t", 
           "]"}]}], "\n", "\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
        RowBox[{"webSiteDeploySelectFiles", "[", "\n", "\t\t\t\t\t", 
         RowBox[{
         "outDir", ",", "\n", "\t\t\t\t\t", "last", ",", "\n", "\t\t\t\t\t", 
          "select", ",", "\n", "\t\t\t\t\t", 
          RowBox[{"Replace", "[", "\n", "\t\t\t\t\t\t", 
           RowBox[{
            RowBox[{"Alternatives", "@@", 
             RowBox[{"List", "@", 
              RowBox[{"{", "\n", "\t\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"OptionValue", "[", "FileNameForms", "]"}], ",", "\n",
                 "\t\t\t\t\t\t\t", 
                RowBox[{
                "OptionValue", "[", "\"\<ExtraFileNameForms\>\"", "]"}]}], 
               "\n", "\t\t\t\t\t\t\t", "}"}]}]}], ",", "\n", "\t\t\t\t\t\t", 
            RowBox[{"All", "\[Rule]", "\"\<*\>\""}]}], "\n", "\t", "\t", 
           "\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"OptionValue", "@", "\"\<AlwaysDeployForms\>\""}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"OptionValue", "@", "\"\<IncludeFiles\>\""}]}], "\n", 
         "\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t", "]"}]}]}], "\n", "\t\t", 
    "]"}]}], "*)"}]], \
"CodeInput",ExpressionUUID->"a77f16a8-f72d-4946-8c5a-033f6f891b85"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$WebFileFormats\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"fabf895a-e508-4f05-ae32-c1bd89aca2f1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$WebFileFormats", "=", "\n", "\t", 
   RowBox[{
   "\"\<html\>\"", "|", "\"\<css\>\"", "|", "\"\<js\>\"", "|", "\"\<xml\>\"", 
    "|", "\"\<json\>\"", "|", "\n", "\t", "\"\<png\>\"", "|", "\"\<jpg\>\"", 
    "|", "\"\<gif\>\"", "|", "\n", "\t", "\"\<woff\>\"", "|", "\"\<tff\>\"", 
    "|", "\"\<eot\>\"", "|", "\"\<svg\>\""}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"b2670e00-6256-4040-afcb-2fa1fea4bd69"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteCloudDeploy\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"6f09ceae-1352-4ff9-88ab-88e6386a7f85"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteCloudDeploy", "]"}], "=", "\n", "\t", 
   RowBox[{"Join", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"FileNameForms", "\[Rule]", 
        RowBox[{"\"\<*.\>\"", "~~", "$WebFileFormats"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"\"\<ExtraFileNameForms\>\"", "\[Rule]", 
        RowBox[{"{", "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"Select", "\[Rule]", 
        RowBox[{"(", 
         RowBox[{"True", "&"}], ")"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"CloudConnect", "\[Rule]", "False"}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<LastDeployment\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"\"\<AlwaysDeployForms\>\"", "\[Rule]", "\"\<\>\""}], ",", 
       "\n", "\t\t\t", 
       RowBox[{"\"\<OutputDirectory\>\"", "\[Rule]", "Automatic"}], ",", "\n",
        "\t\t\t", 
       RowBox[{"\"\<IncludeFiles\>\"", "\[Rule]", 
        RowBox[{"{", "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"\"\<StripDirectories\>\"", "\[Rule]", 
        RowBox[{"{", "}"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"Permissions", "\[Rule]", "\"\<Public\>\""}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"Monitor", "\[Rule]", "True"}]}], "\n", "\t\t\t", "}"}], ",", 
     "\n", "\t\t", 
     RowBox[{"Options", "[", "CloudObject", "]"}]}], "\n", "\t\t", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteCloudDeploy", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"outDir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
     RowBox[{"uri", ":", 
      RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}], ",", "\n", 
     "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"trueDir", "=", 
        RowBox[{"getWebsiteDeployDir", "[", 
         RowBox[{"outDir", ",", " ", 
          RowBox[{"OptionValue", "[", "\"\<OutputDirectory\>\"", "]"}]}], 
         "]"}]}], ",", "\n", "\t\t\t", "info", ",", "\n", "\t\t\t", "select", 
       ",", "\n", "\t", "\t\t", "last"}], "\n", "\t", "\t\t", "}"}], ",", 
     "\n", "\t\t", 
     RowBox[{
      RowBox[{"info", "=", "\n", "\t\t\t", 
       RowBox[{"Which", "[", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"FileExistsQ", "[", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"trueDir", ",", " ", "\"\<DeploymentInfo.wl\>\""}], 
            "}"}]}], "]"}], ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Import", "[", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"trueDir", ",", " ", "\"\<DeploymentInfo.wl\>\""}], 
            "}"}]}], "]"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"FileExistsQ", "[", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"trueDir", ",", "\"\<DeploymentInfo.m\>\""}], "}"}]}], 
          "]"}], ",", "\n", "\t\t\t\t\t", 
         RowBox[{"Import", "[", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"trueDir", ",", "\"\<DeploymentInfo.m\>\""}], "}"}]}], 
          "]"}], ",", "\n", "\t\t\t\t", "True", ",", "\n", "\t\t\t\t\t", 
         RowBox[{"{", "}"}]}], "\n", "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"FileExistsQ", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"trueDir", ",", "\"\<DeploymentInfo.m\>\""}], "}"}]}]}], 
        ",", "\n", "\t\t\t", 
        RowBox[{"DeleteFile", "@", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"trueDir", ",", "\"\<DeploymentInfo.m\>\""}], "}"}]}]}]}], 
       "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"Export", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"{", 
          RowBox[{"trueDir", ",", "\"\<DeploymentInfo.wl\>\""}], "}"}]}], ",",
         "\n", "\t\t\t", 
        RowBox[{"KeyDrop", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"Association", "@", "\n", "\t\t\t\t\t", 
           RowBox[{"Flatten", "@", 
            RowBox[{"{", "\n", "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"Normal", "@", "info"}], ",", "\n", "\t\t\t\t\t\t", 
              "ops", ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{"\"\<LastDeployment\>\"", "\[Rule]", "Now"}]}], "\n", 
             "\t\t\t\t\t\t", "}"}]}]}], ",", "\n", "\t\t\t\t", 
          RowBox[{"{", 
           RowBox[{"FileNameForms", ",", "\"\<ExtraFileNameForms\>\""}], 
           "}"}]}], "\n", "\t\t\t\t", "]"}]}], "\n", "\t\t\t", "]"}], ";", 
      "\n", "\t\t", 
      RowBox[{"select", "=", 
       RowBox[{"OptionValue", "[", "Select", "]"}]}], ";", "\n", "\t\t", 
      RowBox[{"last", "=", 
       RowBox[{"First", "@", 
        RowBox[{"Flatten", "@", 
         RowBox[{"List", "@", "\n", "\t\t\t", 
          RowBox[{"Replace", "[", 
           RowBox[{
            RowBox[{"OptionValue", "[", "\"\<LastDeployment\>\"", "]"}], ",", 
            "\n", "\t\t\t\t", 
            RowBox[{"Automatic", ":>", 
             RowBox[{"Lookup", "[", 
              RowBox[{"info", ",", "\"\<LastDeployment\>\"", ",", "None"}], 
              "]"}]}]}], "\n", "\t\t\t\t", "]"}]}]}]}]}], ";", "\n", "\t\t", 
      RowBox[{"webSiteDeploy", "[", 
       RowBox[{
       "uri", ",", " ", "outDir", ",", " ", "trueDir", ",", " ", "\n", 
        "\t\t\t", "last", ",", " ", "select", ",", "\n", "\t\t\t", 
        RowBox[{"Flatten", "@", 
         RowBox[{"{", 
          RowBox[{"ops", ",", "\n", "\t\t\t\t", 
           RowBox[{"Lookup", "[", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"Replace", "[", 
              RowBox[{
               RowBox[{"Quiet", "@", 
                RowBox[{"Import", "[", 
                 RowBox[{"trueDir", ",", " ", "\"\<SiteConfig.wl\>\""}], 
                 "]"}]}], ",", "\n", "\t\t\t\t\t\t", 
               RowBox[{
                RowBox[{"Except", "[", 
                 RowBox[{
                  RowBox[{"_", "?", "OptionQ"}], "|", 
                  RowBox[{"_", "?", "AssociationQ"}]}], "]"}], 
                "\[RuleDelayed]", 
                RowBox[{"{", "}"}]}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", 
             "\n", "\t\t\t\t\t", "\"\<DeployOptions\>\"", ",", "\n", 
             "\t\t\t\t\t", 
             RowBox[{"{", "}"}]}], "\n", "\t\t\t\t\t", "]"}]}], "\n", 
          "\t\t\t\t", "}"}]}]}], "\n", "\t\t\t", "]"}]}]}], "\n", "\t\t", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"WebSiteCloudDeploy", "[", "\n", "\t", 
    RowBox[{
     RowBox[{"outDir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
     RowBox[{"uri", ":", 
      RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}], ",", "\n", 
     "\t", 
     RowBox[{"ops_", "?", "AssociationQ"}]}], "\n", "\t", "]"}], ":=", "\n", 
   "\t", 
   RowBox[{"WebSiteCloudDeploy", "[", 
    RowBox[{"outDir", ",", " ", "uri", ",", " ", 
     RowBox[{"Normal", "[", "ops", "]"}]}], "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"146a238e-79f0-4bfc-8d1a-0e9a51e54216"]\

}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]GitHubDeploy\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"e764cbc8-6da7-4a29-8f24-131c1be58d96"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]getGHDeployRoot\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"5ed8798d-c1d2-46df-85b6-1be264492db6"],

Cell[BoxData[
 RowBox[{
  RowBox[{"getGHDeployRoot", "[", "outDir_", "]"}], ":=", "\n", "  ", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"MemberQ", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "\"\<out\>\"", ",", " ", "\"\<output\>\"", ",", " ", "\"\<docs\>\""}], 
       "}"}], ",", " ", 
      RowBox[{"FileBaseName", "[", "outDir", "]"}]}], "]"}], ",", "\n", 
    "    ", 
    RowBox[{"DirectoryName", "[", "outDir", "]"}], ",", "\n", "    ", 
    "outDir"}], "\n", "    ", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"b3b55813-53d7-4b19-b2f4-4bad615d89cd"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]setupGitIgnore\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"aa995fff-b0fb-4483-9352-6f705a894722"],

Cell[BoxData[
 RowBox[{
  RowBox[{"setupGitIgnore", "[", "dir_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"ge", ",", " ", "getext"}], "}"}], ",", "\n", "    ", 
    RowBox[{
     RowBox[{"ge", " ", "=", " ", 
      RowBox[{"FileNameJoin", "@", 
       RowBox[{"{", 
        RowBox[{"dir", ",", " ", "\"\<.gitignore\>\""}], "}"}]}]}], ";", "\n",
      "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"FileExistsQ", "[", "ge", "]"}]}], ",", "\n", "      ", 
       RowBox[{"Export", "[", 
        RowBox[{
        "ge", ",", "\n", "        ", 
         "\"\<.DS_Store\\ndocs\\ncontent\\noutput\>\"", ",", "\n", 
         "        ", "\"\<Text\>\""}], "\n", "        ", "]"}]}], "\n", 
      "      ", "]"}]}]}], "\n", "    ", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"fcd0ba8d-36ee-4924-9b4f-077d0a93ad8f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]initGitWebsite\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"6212a443-95e9-4bc1-8d6d-e2a30f86e3ad"],

Cell[BoxData[
 RowBox[{
  RowBox[{"initGitWebsite", "[", "dir_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Which", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"Git", "[", 
     RowBox[{"\"\<RepoQ\>\"", ",", " ", "dir"}], "]"}], ",", "\n", "      ", 
    "dir", ",", "\n", "    ", 
    RowBox[{"Git", "[", 
     RowBox[{"\"\<RepoQ\>\"", ",", " ", 
      RowBox[{"DirectoryName", "@", "dir"}]}], "]"}], ",", "\n", "      ", 
    RowBox[{"DirectoryName", "@", "dir"}], ",", "\n", "    ", "True", ",", 
    "\n", "      ", 
    RowBox[{
     RowBox[{"Git", "[", 
      RowBox[{"\"\<Init\>\"", ",", " ", "dir"}], "]"}], ";", "\n", "      ", 
     RowBox[{"setupGitIgnore", "[", "dir", "]"}], ";", "\n", "      ", 
     "dir"}]}], "\n", "    ", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"d807af87-a775-48c2-97ac-cee14bfc75b1"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]checkoutGHPagesBranch\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"7873b347-c05a-458d-af06-ce9bb4617a00"],

Cell[BoxData[
 RowBox[{
  RowBox[{"checkoutGHPagesBranch", "[", 
   RowBox[{"dir_", ",", " ", 
    RowBox[{"curb_:", "Automatic"}], ",", " ", 
    RowBox[{"bname_:", "\"\<gh-pages\>\""}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"chk", ",", " ", 
      RowBox[{"cur", " ", "=", " ", "curb"}]}], "}"}], ",", "\n", "    ", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"cur", "===", "Automatic"}], ",", "\n", "      ", 
       RowBox[{"cur", " ", "=", " ", 
        RowBox[{"Git", "[", 
         RowBox[{"\"\<CurrentBranch\>\"", ",", " ", "dir"}], "]"}]}]}], "\n", 
      "      ", "]"}], ";", "\n", "    ", 
     RowBox[{"chk", " ", "=", " ", 
      RowBox[{"Git", "[", 
       RowBox[{"\"\<Checkout\>\"", ",", " ", "bname"}], "]"}]}], ";", " ", 
     RowBox[{"(*", " ", 
      RowBox[{"if", " ", 
       RowBox[{"doesn", "'"}], "t", " ", "exit", " ", 
       RowBox[{"we", "'"}], "ll", " ", "capture", " ", "that"}], " ", "*)"}], 
     "\n", "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"StringStartsQ", "[", 
        RowBox[{"chk", ",", " ", "\"\<error: pathspec \>\""}], "]"}], ",", 
       "\n", "      ", 
       RowBox[{
        RowBox[{"Git", "[", 
         RowBox[{"\"\<Branch\>\"", ",", " ", "dir", ",", " ", "bname"}], 
         "]"}], ";", "\n", "      ", 
        RowBox[{"Git", "[", 
         RowBox[{"\"\<Checkout\>\"", ",", " ", "bname"}], "]"}], ";", "\n", 
        "      ", 
        RowBox[{"Git", "[", 
         RowBox[{"\"\<Rebase\>\"", ",", " ", "dir", ",", " ", "cur"}], 
         "]"}]}]}], "\n", "      ", "]"}], ";", "\n", "    ", "cur"}]}], "\n",
    "    ", "]"}]}]], \
"CodeInput",ExpressionUUID->"d0bef42f-718b-4ad8-af00-6c312b207e1b"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]deployGHPagesBranch\[RightFloor]", "CodeSubsubsubsection",
 
 Evaluatable->True,ExpressionUUID->"ba888ddf-72fa-4793-b38f-cac11b9abe10"],

Cell[BoxData[
 RowBox[{
  RowBox[{"deployGHPagesBranch", "[", 
   RowBox[{"dir_", ",", " ", "path_", ",", " ", 
    RowBox[{"bname_:", "\"\<gh-pages\>\""}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"cur", ",", " ", "chk", ",", " ", "res"}], "}"}], ",", "\n", 
    "    ", 
    RowBox[{"Internal`WithLocalSettings", "[", "\n", "      ", 
     RowBox[{
      RowBox[{"cur", " ", "=", " ", 
       RowBox[{"checkoutGHPagesBranch", "[", "dir", "]"}]}], ",", "\n", 
      "      ", 
      RowBox[{
       RowBox[{"setupGHPagesContent", "[", "dir", "]"}], ";", "\n", "      ", 
       
       RowBox[{"pushGHPagesContent", "[", 
        RowBox[{"dir", ",", " ", "path"}], "]"}]}], ",", "\n", "      ", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"cur", "=!=", "bname"}], ",", " ", 
        RowBox[{"Git", "[", 
         RowBox[{"\"\<Checkout\>\"", ",", " ", "cur"}], "]"}]}], "]"}]}], 
     "\n", "      ", "]"}]}], "\n", "    ", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"08c04486-8ea5-40b0-8c3d-7511dc57f295"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]setupGHPagesContent\[RightFloor]", "CodeSubsubsubsection",
 
 Evaluatable->True,ExpressionUUID->"ececbfb2-a754-4139-b7e0-19edc226b105"],

Cell[BoxData[
 RowBox[{
  RowBox[{"setupGHPagesContent", "[", "dir_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "contentDir", "}"}], ",", "\n", "    ", 
    RowBox[{"Which", "[", "\n", "      ", 
     RowBox[{
      RowBox[{"DirectoryQ", "@", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"dir", ",", " ", "\"\<output\>\""}], "}"}]}]}], ",", "\n", 
      "        ", 
      RowBox[{"CopyDirectoryFiles", "[", "\n", "          ", 
       RowBox[{
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"{", 
          RowBox[{"dir", ",", " ", "\"\<output\>\""}], "}"}]}], ",", "\n", 
        "          ", "dir", ",", "\n", "          ", 
        RowBox[{"GetMinimalFileModSpec", "@", "\n", "            ", 
         RowBox[{"FileNames", "[", 
          RowBox[{"\"\<*\>\"", ",", " ", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{"dir", ",", " ", "\"\<output\>\""}], "}"}]}]}], 
          "]"}]}]}], "\n", "          ", "]"}], ",", "\n", "      ", 
      RowBox[{"DirectoryQ", "@", 
       RowBox[{"FileNameJoin", "@", 
        RowBox[{"{", 
         RowBox[{"dir", ",", " ", "\"\<docs\>\""}], "}"}]}]}], ",", "\n", 
      "        ", 
      RowBox[{"CopyDirectoryFiles", "[", "\n", "          ", 
       RowBox[{
        RowBox[{"FileNameJoin", "@", 
         RowBox[{"{", 
          RowBox[{"dir", ",", " ", "\"\<docs\>\""}], "}"}]}], ",", "\n", 
        "          ", "dir", ",", "\n", "          ", 
        RowBox[{"GetMinimalFileModSpec", "@", "\n", "            ", 
         RowBox[{"FileNames", "[", 
          RowBox[{"\"\<*\>\"", ",", " ", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"{", 
             RowBox[{"dir", ",", " ", "\"\<docs\>\""}], "}"}]}]}], "]"}]}]}], 
       "\n", "          ", "]"}]}], "\n", "      ", "]"}]}], "\n", "    ", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"2d2c1271-c4b1-497d-b9ea-9c87552777e9"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]configureGHPagesRemote\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"743a5515-7c8c-44da-9da5-07e4d5807fe0"],

Cell["\<\
\[LeftCeiling]
\tShould work to configure and set up a GitHub repo for the website...
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"07300fa3-337a-4390-a69c-83c91debfe48"],

Cell[BoxData[
 RowBox[{
  RowBox[{"configureGHPagesRemote", "[", 
   RowBox[{"dir_", ",", " ", "path_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"rem", ",", " ", "addRem", ",", " ", "rem2"}], "}"}], ",", "\n", 
    "    ", 
    RowBox[{
     RowBox[{"rem", " ", "=", " ", 
      RowBox[{"Git", "[", 
       RowBox[{
       "\"\<GetRemoteURL\>\"", ",", " ", "dir", ",", " ", 
        "\"\<gh-pages\>\""}], "]"}]}], ";", "\n", "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"StringContainsQ", "[", 
         RowBox[{"rem", ",", " ", "\"\<github.com\>\""}], "]"}]}], ",", "\n", 
       "      ", 
       RowBox[{
        RowBox[{"addRem", " ", "=", " ", 
         RowBox[{"URL", "@", 
          RowBox[{"GitHub", "[", 
           RowBox[{"\"\<Path\>\"", ",", " ", "path"}], "]"}]}]}], ";", "\n", 
        "      ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"URLRead", "[", 
            RowBox[{"addRem", ",", " ", "\"\<StatusCode\>\""}], "]"}], ">", 
           "399"}], ",", "\n", "        ", 
          RowBox[{"GitHub", "[", 
           RowBox[{"\"\<Create\>\"", ",", " ", "path"}], "]"}]}], "\n", 
         "        ", "]"}], ";", "\n", "      ", 
        RowBox[{"rem2", " ", "=", " ", 
         RowBox[{"Git", "[", 
          RowBox[{
          "\"\<AddRemote\>\"", ",", " ", "dir", ",", " ", "\"\<gh-pages\>\"", 
           ",", " ", "addRem"}], "]"}]}], ";", "\n", "      ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"rem2", "===", "Null"}], ",", " ", 
          RowBox[{"rem", " ", "=", " ", "addRem"}], ",", " ", 
          RowBox[{"rem", " ", "=", " ", "$Failed"}]}], "]"}]}]}], "\n", 
      "      ", "]"}], ";", "\n", "    ", "rem"}]}], "\n", "    ", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"8bd9bf4d-c3c0-445f-b345-6e6f3d5a0338"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]pushGHPagesContent\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"beac84ce-ff51-44fb-b6f2-b0e705359dbc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"pushGHPagesContent", "[", 
   RowBox[{"dir_", ",", " ", "path_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"rem", "=", 
      RowBox[{"configureGHPagesRemote", "[", "dir", "]"}]}], "}"}], ",", "\n",
     "    ", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"rem", "=!=", "$Failed"}], ",", "\n", "      ", 
       RowBox[{
        RowBox[{"Git", "[", 
         RowBox[{"\"\<Add\>\"", ",", " ", "dir", ",", " ", 
          RowBox[{"\"\<All\>\"", "\[Rule]", "True"}]}], "]"}], ";", "\n", 
        "  ", "    ", 
        RowBox[{"Git", "[", 
         RowBox[{
         "\"\<Commit\>\"", ",", " ", "dir", ",", " ", "\n", "  ", "      ", 
          RowBox[{"\"\<Message\>\"", "->", 
           RowBox[{"\"\<Deploying website at \>\"", "<>", 
            RowBox[{"DateString", "[", 
             RowBox[{"Now", ",", " ", "\"\<DateTimeShort\>\""}], "]"}]}]}]}], 
         "\n", "  ", "      ", "]"}], ";", "\n", "  ", "    ", 
        RowBox[{"Git", "[", 
         RowBox[{
         "\"\<Push\>\"", ",", " ", "dir", ",", " ", "\"\<gh-pages\>\"", ",", 
          " ", "\"\<gh-pages\>\""}], "]"}], ";"}]}], "\n", "      ", "]"}], 
     ";", "\n", "    ", "rem"}]}], "\n", "    ", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"7d6264da-6067-4527-a6e5-dba4540a37f2"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteGitHubDeploy\[RightFloor]", "CodeSubsubsubsection",
 
 Evaluatable->True,ExpressionUUID->"046f6966-d44f-493c-af6a-4c3d22b22307"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Options", "[", "WebSiteGitHubDeploy", "]"}], "=", 
  RowBox[{"{", "}"}]}], "\n", 
 RowBox[{
  RowBox[{"WebSiteGitHubDeploy", "[", "\n", "\t", 
   RowBox[{
    RowBox[{"outDir_String", "?", "DirectoryQ"}], ",", "\n", "\t", 
    RowBox[{"path", ":", 
     RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}], ",", "\n", 
    "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"Module", "[", "\n", "\t  ", 
   RowBox[{
    RowBox[{"{", "\n", "\t    ", 
     RowBox[{"dep", ",", "\n", "\t    ", "pat"}], "\n", "\t    ", "}"}], ",", 
    "\n", "\t  ", 
    RowBox[{
     RowBox[{"dep", " ", "=", " ", 
      RowBox[{"getGHDeployRoot", "[", "outDir", "]"}]}], ";", "\n", "\t  ", 
     RowBox[{"pat", " ", "=", " ", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"path", "===", "Automatic"}], ",", " ", 
        RowBox[{"StringDelete", "[", 
         RowBox[{
          RowBox[{"FileBaseName", "[", "dep", "]"}], ",", " ", "Whitespace"}],
          "]"}]}], "]"}]}], ";", "\n", "\t  ", 
     RowBox[{"initGitWebsite", "[", "dep", "]"}], ";", "\n", "\t  ", 
     RowBox[{"deployGHPagesBranch", "[", 
      RowBox[{"dep", ",", " ", "pat"}], "]"}]}]}], "\n", "\t  ", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"7ffd4787-8afa-4436-b7e7-040d55eba75a"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Deploy\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"5deece9d-11df-4bf5-a31a-a8a9c0a262ed"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]getWebsiteDir\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"9b5eacf8-3dc0-4967-ad9f-6f6938339400"],

Cell[BoxData[
 RowBox[{
  RowBox[{"getWebsiteDir", "[", "out_", "]"}], ":=", "\n", "  ", 
  RowBox[{"SelectFirst", "[", "\n", "    ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"FileNameJoin", "@", 
       RowBox[{"{", 
        RowBox[{"#", ",", " ", "\"\<SiteConfig.wl\>\""}], "}"}]}], "&"}], "/@",
      "\n", "      ", 
     RowBox[{"NestList", "[", 
      RowBox[{"DirectoryName", ",", " ", "out", ",", " ", "1"}], "]"}]}], ",",
     "\n", "    ", "FileExistsQ", ",", "\n", "    ", "out"}], "\n", "    ", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"50bea31b-697b-416e-8d3e-db3e6c15e3c4"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]getDeploymentSettings\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"4a5716bb-c544-44a2-ac03-4d6e18acfdf9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"getDeploymentSettings", "[", 
   RowBox[{"dir_", ",", " ", 
    RowBox[{"op", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"{", "\n", "      ", 
     RowBox[{"ops", " ", "=", " ", 
      RowBox[{"Quiet", "@", 
       RowBox[{"Association", "@", 
        RowBox[{"Import", "[", 
         RowBox[{"FileNameJoin", "@", 
          RowBox[{"{", 
           RowBox[{"dir", ",", " ", "\"\<SiteConfig.wl\>\""}], "}"}]}], 
         "]"}]}]}]}], "\n", "      ", "}"}], ",", "\n", "    ", 
    RowBox[{"Normal", "@", "\n", "      ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"AssociationQ", "[", "ops", "]"}]}], ",", "\n", "        ", 
       RowBox[{"{", "}"}], ",", "\n", "        ", 
       RowBox[{"Lookup", "[", 
        RowBox[{"ops", ",", " ", "\"\<DeployOptions\>\"", ",", " ", 
         RowBox[{"{", "}"}]}], "]"}]}], "\n", "        ", "]"}]}]}], "\n", 
   "    ", "]"}]}]], \
"CodeInput",ExpressionUUID->"43f44bc5-e619-49d4-a935-4317c8f2048c"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]WebSiteDeploy\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"560e58ff-2a35-407d-ae23-e15e01a40adb"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$deploymentDispatcher", "=", 
   RowBox[{"<|", "\n", "  ", 
    RowBox[{
     RowBox[{"\"\<Cloud\>\"", "->", "WebSiteCloudDeploy"}], ",", "\n", "  ", 
     RowBox[{"\"\<GitHub\>\"", "->", "WebSiteGitHubDeploy"}]}], "\n", "  ", 
    "|>"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"bdde4638-5e6e-4ffe-b05c-c2915f801cee"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "WebSiteDeploy", "]"}], "=", "\n", "  ", 
   RowBox[{"{", "\n", "    ", 
    RowBox[{"\"\<DeploymentTarget\>\"", "\[Rule]", "Automatic"}], "\n", 
    "    ", "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"WebSiteDeploy", "[", "\n", "  ", 
   RowBox[{
    RowBox[{"outDir_String", "?", "DirectoryQ"}], ",", "\n", "  ", 
    RowBox[{"uri", ":", 
     RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}], ",", "\n", 
    "\t", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n", 
  "\t", 
  RowBox[{
   RowBox[{"PackageExceptionBlock", "[", "\"\<WebSiteDeploy\>\"", "]"}], "@", 
   "\n", "\t  ", 
   RowBox[{"Module", "[", "\n", "  \t  ", 
    RowBox[{
     RowBox[{"{", "\n", "  \t    ", 
      RowBox[{
       RowBox[{"out", " ", "=", " ", 
        RowBox[{"getWebsiteDir", "[", "outDir", "]"}]}], ",", "\n", "  ", 
       "\t    ", "settings", ",", "\n", "  ", "\t    ", "depTarg", ",", "\n", 
       "  ", "\t    ", "disp"}], "\n", "  ", "\t    ", "}"}], ",", "\n", "  ",
      "\t  ", 
     RowBox[{
      RowBox[{"settings", " ", "=", " ", 
       RowBox[{"getDeploymentSettings", "[", "out", "]"}]}], ";", "\n", "  ", 
      "\t  ", 
      RowBox[{"depTarg", " ", "=", " ", "\n", "  ", "\t    ", 
       RowBox[{"Replace", "[", "\n", "  ", "  \t    ", 
        RowBox[{
         RowBox[{"OptionValue", "[", 
          RowBox[{"WebSiteDeploy", ",", " ", "\n", "  ", "  \t      ", 
           RowBox[{"FilterRules", "[", 
            RowBox[{
             RowBox[{"{", "ops", "}"}], ",", " ", 
             RowBox[{"Options", "[", "WebSiteDeploy", "]"}]}], "]"}], ",", 
           " ", "\n", "  ", "  \t      ", "\"\<DeploymentTarget\>\""}], "\n", 
          "  ", "  \t      ", "]"}], ",", " ", "\n", "  ", "  \t    ", 
         RowBox[{"Automatic", "\[RuleDelayed]", 
          RowBox[{"Lookup", "[", 
           RowBox[{
           "settings", ",", " ", "\"\<DeploymentTarget\>\"", ",", " ", 
            "\"\<GitHub\>\""}], "]"}]}]}], "\n", "  ", "  \t    ", "]"}]}], 
      ";", "\n", "  ", "  \t", 
      RowBox[{"disp", " ", "=", " ", 
       RowBox[{"$deploymentDispatcher", "[", "depTarg", "]"}]}], ";", "\n", 
      "  ", "  \t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MissingQ", "[", "disp", "]"}], ",", "\n", "  ", "  \t  ", 
        RowBox[{"PackageRaiseException", "[", "\n", "    \t    ", 
         RowBox[{
         "Automatic", ",", "\n", "    \t    ", 
          "\"\<Site deployment target `` unknown. Known targets are ``\>\"", 
          ",", "\n", "    \t    ", 
          RowBox[{"Keys", "[", "$deploymentDispatcher", "]"}]}], "\n", 
         "    \t    ", "]"}], ",", "\n", "    \t  ", 
        RowBox[{"disp", "[", "\n", "    \t    ", 
         RowBox[{
         "out", ",", "\n", "    \t    ", "uri", ",", "\n", "    \t    ", 
          RowBox[{"FilterRules", "[", "\n", "    \t      ", 
           RowBox[{
            RowBox[{"Normal", "@", 
             RowBox[{"Merge", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"settings", ",", " ", "ops"}], "}"}], ",", " ", 
               "Last"}], "]"}]}], ",", "\n", "    \t      ", 
            RowBox[{"Options", "[", "disp", "]"}]}], "\n", "    \t      ", 
           "]"}]}], "\n", "    \t    ", "]"}]}], "\n", "    \t  ", "]"}]}]}], 
    "\n", "  \t  ", 
    "]"}]}]}]}], \
"CodeInput",ExpressionUUID->"c5b2bce4-8c9c-442f-bd11-4082ba87fcdb"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"End", "[", "]"}], 
  ";"}]], \
"InputSection",ExpressionUUID->"18a62587-8cbc-473d-a075-055980b09c1a"]
}, Open  ]],

Cell["", "SectionSeparator",ExpressionUUID->"4b8e69ee-4a28-4a2e-8e84-\
812108de38ab"]
},
NotebookEventActions->{{"MenuCommand", "Save"} :> 
  EasyIDE`Notebooks`Manipulation`IDESave[
    EvaluationNotebook[]], 
  "MouseDown" :> (Needs["EasyIDE`"]; 
   EasyIDE`Notebooks`Manipulation`EnsureNotebookUpdated[
     EvaluationNotebook[]]), PassEventsDown -> True, EvaluationOrder -> After},
WindowSize->{808, 755},
WindowMargins->{{44, Automatic}, {Automatic, 0}},
WindowTitle->"EasyIDE: BTools",
TaggingRules->{
 "EasyIDE" -> {
   "Project" -> {
     "Directory" -> 
      "/Users/Mark/Documents/Wolfram Mathematica/Applications/BTools/"}, 
    "Tabs" -> {
     "SiteBuilder" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/BTools/Packages/Web/SiteBuilder.nb", "Modified" -> 
        True}, "CustomServiceConnection" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/BTools/Packages/Frameworks/CustomServiceConnection.\
nb"}, "FrontEndTools" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/BTools/Packages/Developer/FrontEndTools.nb"}, 
      "PacletServerBuilder" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/BTools/Packages/Paclets/PacletServerBuilder.nb", 
        "Modified" -> False}, 
      "Git" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/BTools/Packages/External/Git/Git.nb", "Modified" -> 
        False}, "GitConnection" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/BTools/Packages/External/GitConnection.nb", 
        "Modified" -> False}}, "FileViewer" -> {"Visible" -> False}, 
    "Toolbars" -> {"Column" -> GridBox[{{
          GridBox[{{
             PaneBox["", ImageSize -> {0, 15}], 
             ButtonBox[
             "", BaseStyle -> "ToolbarShowButton", ButtonData -> 
              "CodePackage"]}}, BaseStyle -> "ToolbarCell"]}}, BaseStyle -> 
        "Toolbars"], "Tags" -> {}, 
      "Cells" -> {"Package" -> None, "CodePackage" -> None}}, "ActiveTab" -> 
    "SiteBuilder", "StyleSheet" -> 
    FrontEnd`FileName[{"EasyIDE", "Extensions", "LightMode"}, 
      "CodePackage.nb"], "FileToolbar" -> "CodePackage", 
    "Options" -> {
     WindowSize -> {808, 756}, 
      WindowMargins -> {{222, Automatic}, {Automatic, 0}}, 
      TaggingRules -> {
       "UUIDButtons" -> {
         "Active" -> {
           "Button-b8297203-6b28-48f9-8ba3-edbd5eb431d2" -> False, 
            "Button-8c92aebb-2725-4f7c-a6a8-f90e3a4dce9c" -> False, 
            "Button-ede3a027-3279-40a0-8aa4-1fcc5f60357d" -> False, 
            "Button-89ffd2c3-ec41-4179-a9b1-8e28670bca2c" -> False, 
            "Button-ca46e5e0-4fd1-47e8-8cf6-72998922b757" -> False, 
            "Button-a6d68254-3684-4d32-83fc-e5ef6f443930" -> False}}}, 
      FrontEndVersion -> 
      "11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, 2018)", 
      StyleDefinitions -> 
      FrontEnd`FileName[{"BTools"}, "CodePackage.nb", CharacterEncoding -> 
        "UTF-8"]}, "AutoGeneratePackage" -> True, "SavingAction" -> None, 
    "MainStyleName" -> "LightMode", 
    "Styles" -> {
     "UnthemedStylesheet" -> "CodePackage", "StyleSheet" -> 
      FrontEnd`FileName[{"EasyIDE", "Extensions", "LightMode"}, 
        "CodePackage.nb"], "Theme" -> "LightMode"}}, "IndentCharacter" -> 
  "  ", "UUIDButtons" -> {
   "Active" -> {"Button-218b63f2-ff44-42ce-90ef-7f03f91452c9" -> False}}},
FrontEndVersion->"12.0 for Mac OS X x86 (64-bit) (April 8, 2019)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> 
     FrontEnd`FileName[{"EasyIDE", "Extensions", "LightMode"}, 
       "CodePackage.nb"]]]}, Visible -> False, 
  TaggingRules -> {"EasyIDE" -> {"FileViewer" -> {"Visible" -> False}}}, 
  FrontEndVersion -> "12.0 for Mac OS X x86 (64-bit) (April 8, 2019)", 
  StyleDefinitions -> "PrivateStylesheetFormatting.nb"]
]
